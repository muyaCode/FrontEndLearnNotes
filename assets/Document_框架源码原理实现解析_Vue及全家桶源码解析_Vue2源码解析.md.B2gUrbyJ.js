import{_ as e,c as o,o as t,ah as a,j as n,a as r,t as l}from"./chunks/framework.DqD713j2.js";const c="/FrontEndLearnNotes/assets/Vue2.0%E6%BA%90%E7%A0%81.BNFFY42j.png",B="/FrontEndLearnNotes/assets/image-20240303205159540.DcCWWfd5.png",y="/FrontEndLearnNotes/assets/image-20240303205222152.BSxuNplC.png",i="/FrontEndLearnNotes/assets/image-20240303205244217.BdEFQaU8.png",b="/FrontEndLearnNotes/assets/image-20240303205314941.l0GRYIPQ.png",u="/FrontEndLearnNotes/assets/image-20240303205343438.BXx79puJ.png",F="/FrontEndLearnNotes/assets/image-20240303210607899.u8_JfDEk.png",A="/FrontEndLearnNotes/assets/image-20240303210953936.DEu1-Kvw.png",C="/FrontEndLearnNotes/assets/image-20240303211157133.Bk-aF3rS.png",m="/FrontEndLearnNotes/assets/image-20240303211216997.eGOEifeR.png",d="/FrontEndLearnNotes/assets/image-20240303211305979.B6_ggVzU.png",E="/FrontEndLearnNotes/assets/image-20240303211531976.DXl47BXu.png",h="/FrontEndLearnNotes/assets/image-20240303235429504.CAp03D9a.png",D="/FrontEndLearnNotes/assets/image-20240304000205513.DG4cmC8L.png",q="/FrontEndLearnNotes/assets/image-20240304000222107.CSnRcPge.png",p="/FrontEndLearnNotes/assets/image-20240304000243984.ipO-Ifgr.png",g="/FrontEndLearnNotes/assets/image-20240304000403428.BE2ar5yv.png",f="/FrontEndLearnNotes/assets/image-20240304010240972.TZHB1Kbr.png",v="/FrontEndLearnNotes/assets/image-20240304004336746.Ckwn1tYR.png",k="/FrontEndLearnNotes/assets/image-20240304001301141.C4JousFT.png",x="/FrontEndLearnNotes/assets/image-20240304002034531.D4kHh4lN.png",w="/FrontEndLearnNotes/assets/image-20240304002246646.C2GeQ96u.png",j="/FrontEndLearnNotes/assets/image-20240304002323699.BExRXAqY.png",_="/FrontEndLearnNotes/assets/image-20240304002356237.CppPHX1w.png",V="/FrontEndLearnNotes/assets/image-20240304002418827.DcR-uhvn.png",P="/FrontEndLearnNotes/assets/%E6%B5%81%E7%A8%8B%E5%9B%BE.BPe86oGM.png",S="/FrontEndLearnNotes/assets/image-20240304002503493.BZ633wHY.png",O="/FrontEndLearnNotes/assets/image-20240304002602954.Og0jQoDw.png",T="/FrontEndLearnNotes/assets/image-20240304002709171.BFxbjS5N.png",M="/FrontEndLearnNotes/assets/image-20240304002737168.C1rNWfg1.png",N="/FrontEndLearnNotes/assets/image-20240304002759285.DMtrWWXE.png",I="/FrontEndLearnNotes/assets/image-20240304002824645.BX8t7ujz.png",L="/FrontEndLearnNotes/assets/image-20240304002842533.4LQPdPyK.png",R="/FrontEndLearnNotes/assets/image-20240304032556845.5_42z9cE.png",W="/FrontEndLearnNotes/assets/image-20240304032630350.CwClVrmo.png",$="/FrontEndLearnNotes/assets/image-20240304032654767.CBoJ8PP1.png",U="/FrontEndLearnNotes/assets/image-20240304033127556.C5sF85JE.png",Y="/FrontEndLearnNotes/assets/image-20240304033458856.Yhl3xYyW.png",J="/FrontEndLearnNotes/assets/image-20240304033555946.BGlAq895.png",H="/FrontEndLearnNotes/assets/image-20240304033702159.CeC5ZAS4.png",G="/FrontEndLearnNotes/assets/image-20240304033757118.dD7PtTeD.png",z="/FrontEndLearnNotes/assets/image-20240304033847098.DUC6e81-.png",X="/FrontEndLearnNotes/assets/image-20240304033910144.B6fJxcco.png",Q="/FrontEndLearnNotes/assets/image-20240304033945456.CLqYqjYK.png",Z="/FrontEndLearnNotes/assets/image-20240304034003868.BlV5Rk1p.png",K="/FrontEndLearnNotes/assets/image-20240304034212281.Bq0CnI95.png",ss="/FrontEndLearnNotes/assets/image-20240304034257248.D0IYAUvD.png",ns="/FrontEndLearnNotes/assets/image-20240304034407166.CMc5_A06.png",as="/FrontEndLearnNotes/assets/image-20240304034519540.Cdlowy1c.png",ls="/FrontEndLearnNotes/assets/image-20240304034602885.4ZNfkH-F.png",ps="/FrontEndLearnNotes/assets/image-20240304034746693.OlWhsCCa.png",es="/FrontEndLearnNotes/assets/image-20240304034806320.BgFwgE8s.png",os="/FrontEndLearnNotes/assets/image-20240304034840380.BgMoFXOt.png",ts="/FrontEndLearnNotes/assets/image-20240304034853078.D04Y715j.png",rs="/FrontEndLearnNotes/assets/image-20240304035013378.DPXDiQ2k.png",cs="/FrontEndLearnNotes/assets/image-20240304035033878.CfARRUr3.png",Bs="/FrontEndLearnNotes/assets/image-20240304035059241.6Y91tJqz.png",ys="/FrontEndLearnNotes/assets/entry.fd620404.tGg0TaSJ.png",is="/FrontEndLearnNotes/assets/fow.34669a8f.DULF6AqP.png",hs=JSON.parse('{"title":"Vue2 æºç è§£æ","description":"","frontmatter":{},"headers":[],"relativePath":"Document/æ¡†æ¶æºç åŸç†å®ç°è§£æ/VueåŠå…¨å®¶æ¡¶æºç è§£æ/Vue2æºç è§£æ.md","filePath":"Document/æ¡†æ¶æºç åŸç†å®ç°è§£æ/VueåŠå…¨å®¶æ¡¶æºç è§£æ/Vue2æºç è§£æ.md","lastUpdated":1750954157000}'),bs={name:"Document/æ¡†æ¶æºç åŸç†å®ç°è§£æ/VueåŠå…¨å®¶æ¡¶æºç è§£æ/Vue2æºç è§£æ.md"};function us(Fs,s,As,Cs,ms,ds){return t(),o("div",null,[s[2]||(s[2]=a('<h1 id="vue2-æºç è§£æ" tabindex="-1">Vue2 æºç è§£æ <a class="header-anchor" href="#vue2-æºç è§£æ" aria-label="Permalink to &quot;Vue2 æºç è§£æ&quot;">â€‹</a></h1><p><a href="https://github.com/FrontEndGitHub/FrontEndGitHub/issues/35" target="_blank" rel="noreferrer">æ¨è 7 ä¸ª Vue2ã€Vue3 æºç è§£å¯†åˆ†æçš„å¼€æºé¡¹ç›® ğŸ‘ Â· Issue #35 Â· FrontEndGitHub/FrontEndGitHub</a></p><p>vue2 æºç åœ°å€ï¼š<a href="https://github.com/vuejs/vue.git" target="_blank" rel="noreferrer">https://github.com/vuejs/vue.git</a></p><p>petite-vue æºç è§£æ</p><ul><li>githubï¼š<a href="https://github.com/vuejs/petite-vue" target="_blank" rel="noreferrer">https://github.com/vuejs/petite-vue</a></li><li>petite-vue æºç è§£ææ–‡æ¡£ï¼š<a href="http://fsjohnhuang.gitee.io/petite-vue-source-reading/" target="_blank" rel="noreferrer">http://fsjohnhuang.gitee.io/petite-vue-source-reading/</a></li></ul><p>è§£æ vue2 æºç æµç¨‹ï¼š</p><ul><li>1.çŸ¥é“<code>Vue2</code>çš„åŠŸèƒ½åŸç†</li><li>2.æ‰‹å†™å®ç°ä¸€ä¸ªç®€ç‰ˆçš„<code>Vue2</code></li><li>3.æœ€åæˆ‘ä»¬å†å»è°ƒè¯• vue2 æºç çš„è¿è¡Œ</li></ul><h2 id="vueå…¨å®¶æ¡¶æºç æŠ€æœ¯æ­ç§˜" tabindex="-1">vueå…¨å®¶æ¡¶æºç æŠ€æœ¯æ­ç§˜ <a class="header-anchor" href="#vueå…¨å®¶æ¡¶æºç æŠ€æœ¯æ­ç§˜" aria-label="Permalink to &quot;vueå…¨å®¶æ¡¶æºç æŠ€æœ¯æ­ç§˜&quot;">â€‹</a></h2><p><a href="https://ustbhuangyi.github.io/vue-analysis/v2/prepare/" target="_blank" rel="noreferrer">å‡†å¤‡å·¥ä½œ | Vue.js æŠ€æœ¯æ­ç§˜ (ustbhuangyi.github.io)</a></p><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/ustbhuangyi/vue-analysis" target="_blank" rel="noreferrer">ustbhuangyi/vue-analysis: ğŸ‘ Vue.js æºç åˆ†æ (github.com)</a></p><h2 id="vue2-æºç åŠŸèƒ½æ€ç»´å¯¼å›¾" tabindex="-1">Vue2 æºç åŠŸèƒ½æ€ç»´å¯¼å›¾ <a class="header-anchor" href="#vue2-æºç åŠŸèƒ½æ€ç»´å¯¼å›¾" aria-label="Permalink to &quot;Vue2 æºç åŠŸèƒ½æ€ç»´å¯¼å›¾&quot;">â€‹</a></h2><p><img src="'+c+`" alt="Vue2.0æºç "></p><h2 id="ä¸€ã€mustache-æ¨¡æ¿å¼•æ“-å¸®åŠ©äº†è§£-vue-çš„æ¨¡æ¿æ¸²æŸ“å¼•æ“" tabindex="-1">ä¸€ã€mustache æ¨¡æ¿å¼•æ“ï¼ˆå¸®åŠ©äº†è§£ vue çš„æ¨¡æ¿æ¸²æŸ“å¼•æ“ï¼‰ <a class="header-anchor" href="#ä¸€ã€mustache-æ¨¡æ¿å¼•æ“-å¸®åŠ©äº†è§£-vue-çš„æ¨¡æ¿æ¸²æŸ“å¼•æ“" aria-label="Permalink to &quot;ä¸€ã€mustache æ¨¡æ¿å¼•æ“ï¼ˆå¸®åŠ©äº†è§£ vue çš„æ¨¡æ¿æ¸²æŸ“å¼•æ“ï¼‰&quot;">â€‹</a></h2><h3 id="_1-ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“" tabindex="-1">1.ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“ <a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“" aria-label="Permalink to &quot;1.ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“&quot;">â€‹</a></h3><h4 id="_1-æ¨¡æ¿å¼•æ“æ˜¯å°†æ•°æ®è¦å˜ä¸ºè§†å›¾æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ" tabindex="-1">1.æ¨¡æ¿å¼•æ“æ˜¯å°†æ•°æ®è¦å˜ä¸ºè§†å›¾æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#_1-æ¨¡æ¿å¼•æ“æ˜¯å°†æ•°æ®è¦å˜ä¸ºè§†å›¾æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;1.æ¨¡æ¿å¼•æ“æ˜¯å°†æ•°æ®è¦å˜ä¸ºè§†å›¾æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ&quot;">â€‹</a></h4><p>æ•°æ®ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;age&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;sex&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;age&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;sex&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¥³&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;age&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;sex&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Vue çš„è§£å†³æ–¹æ³•ï¼šè¿™å®é™…ä¸Šå°±æ˜¯ä¸€ç§æ¨¡æ¿å¼•æ“</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">li</span><span style="color:#D19A66;"> v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;item in arr&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è§†å›¾ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;hd&quot;</span><span style="color:#ABB2BF;">&gt;å°æ˜çš„åŸºæœ¬ä¿¡æ¯&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;bd&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å§“åï¼šå°æ˜&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å¹´é¾„ï¼š12&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;æ€§åˆ«ï¼šç”·&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;hd&quot;</span><span style="color:#ABB2BF;">&gt;å°çº¢çš„åŸºæœ¬ä¿¡æ¯&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;bd&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å§“åï¼šå°çº¢&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å¹´é¾„ï¼š11&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;æ€§åˆ«ï¼šå¥³&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	â€¦â€¦</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_2-å†å²ä¸Šæ›¾ç»å‡ºç°çš„-æ•°æ®å˜ä¸ºè§†å›¾-çš„æ–¹æ³•" tabindex="-1">2.å†å²ä¸Šæ›¾ç»å‡ºç°çš„[æ•°æ®å˜ä¸ºè§†å›¾]çš„æ–¹æ³• <a class="header-anchor" href="#_2-å†å²ä¸Šæ›¾ç»å‡ºç°çš„-æ•°æ®å˜ä¸ºè§†å›¾-çš„æ–¹æ³•" aria-label="Permalink to &quot;2.å†å²ä¸Šæ›¾ç»å‡ºç°çš„[æ•°æ®å˜ä¸ºè§†å›¾]çš„æ–¹æ³•&quot;">â€‹</a></h4><p><strong>çº¯ DOM æ³•</strong>ï¼š éå¸¸ç¬¨æ‹™ï¼Œæ²¡æœ‰å®æˆ˜ä»·å€¼</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¥³&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">			];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> list</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ¯éå†ä¸€é¡¹ï¼Œéƒ½è¦ç”¨DOMæ–¹æ³•å»åˆ›å»ºliæ ‡ç­¾</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> oLi</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºhdè¿™ä¸ªdiv</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> hdDiv</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">				hdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">className</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;hd&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				hdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;çš„åŸºæœ¬ä¿¡æ¯&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºbdè¿™ä¸ªdiv</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> bdDiv</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">				bdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">className</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;bd&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºä¸‰ä¸ªp</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> p1</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">				p1</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;å§“åï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				bdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> p2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">				p2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;å¹´é¾„ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				bdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> p3</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">				p3</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;æ€§åˆ«ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">				bdDiv</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">p3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯å­¤å„¿èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¿…é¡»è¦ä¸Šæ ‘æ‰èƒ½è¢«ç”¨æˆ·çœ‹è§</span></span>
<span class="line"><span style="color:#E5C07B;">				oLi</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">hdDiv</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯å­¤å„¿èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¿…é¡»è¦ä¸Šæ ‘æ‰èƒ½è¢«ç”¨æˆ·çœ‹è§</span></span>
<span class="line"><span style="color:#E5C07B;">				oLi</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">bdDiv</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯å­¤å„¿èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¿…é¡»è¦ä¸Šæ ‘æ‰èƒ½è¢«ç”¨æˆ·çœ‹è§</span></span>
<span class="line"><span style="color:#E5C07B;">				list</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oLi</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p><strong>æ•°ç»„ join æ³•</strong>ï¼š æ›¾å‡ ä½•æ—¶éå¸¸æµè¡Œï¼Œæ˜¯æ›¾ç»çš„å‰ç«¯å¿…ä¼šçŸ¥è¯†</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¥³&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">			];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> list</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// éå†arræ•°ç»„ï¼Œæ¯éå†ä¸€é¡¹ï¼Œå°±ä»¥å­—ç¬¦ä¸²çš„è§†è§’å°†HTMLå­—ç¬¦ä¸²æ·»åŠ åˆ°listä¸­</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				list</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> +=</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#98C379;">					&quot;&lt;li&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&#39;    &lt;div class=&quot;hd&quot;&gt;&#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;çš„ä¿¡æ¯&lt;/div&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&#39;    &lt;div class=&quot;bd&quot;&gt;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&quot;        &lt;p&gt;å§“åï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&lt;/p&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&quot;        &lt;p&gt;å¹´é¾„ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">age</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&lt;/p&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&quot;        &lt;p&gt;æ€§åˆ«ï¼š&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">sex</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;&lt;/p&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&quot;    &lt;/div&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">					&quot;&lt;/li&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				].</span><span style="color:#61AFEF;">join</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>ES6 çš„åå¼•å·æ³•</strong>ï¼š ES6 ä¸­æ–°å¢çš„<code>\${a}</code>è¯­æ³•ç³–ï¼Œå¾ˆå¥½ç”¨</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¥³&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">			];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> list</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;list&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// éå†arræ•°ç»„ï¼Œæ¯éå†ä¸€é¡¹ï¼Œå°±ä»¥å­—ç¬¦ä¸²çš„è§†è§’å°†HTMLå­—ç¬¦ä¸²æ·»åŠ åˆ°listä¸­</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				list</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> \`</span></span>
<span class="line"><span style="color:#98C379;">                &lt;li&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;div class=&quot;hd&quot;&gt;</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">çš„åŸºæœ¬ä¿¡æ¯&lt;/div&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                    &lt;div class=&quot;bd&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;p&gt;å§“åï¼š</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                        &lt;p&gt;æ€§åˆ«ï¼š</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">sex</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                        &lt;p&gt;å¹´é¾„ï¼š</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">age</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/div&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                &lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">            \`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>æ¨¡æ¿å¼•æ“</strong>ï¼š è§£å†³æ•°æ®å˜ä¸ºè§†å›¾çš„æœ€ä¼˜é›…çš„æ–¹æ³•</p><p>çœ‹ä¸‹é¢</p><h3 id="_2-mustache-åŸºæœ¬ä½¿ç”¨" tabindex="-1">2.mustache åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#_2-mustache-åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;2.mustache åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h3><h4 id="mustache-åº“ç®€ä»‹" tabindex="-1">mustache åº“ç®€ä»‹ <a class="header-anchor" href="#mustache-åº“ç®€ä»‹" aria-label="Permalink to &quot;mustache åº“ç®€ä»‹&quot;">â€‹</a></h4>`,32)),n("ul",null,[s[0]||(s[0]=n("li",null,[r("mustache å®˜æ–¹ gitï¼š "),n("a",{href:"https://github.com/janl/mustache.js",target:"_blank",rel:"noreferrer"},"https://github.com/janl/mustache.js")],-1)),n("li",null,"mustache æ˜¯â€œèƒ¡å­â€çš„æ„æ€ï¼Œå› ä¸ºå®ƒçš„åµŒå…¥æ ‡è®°"+l()+"éå¸¸åƒèƒ¡å­",1),n("li",null,"è€Œ"+l()+"çš„è¯­æ³•ä¹Ÿè¢« Vue æ²¿ç”¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å­¦ä¹  mustache çš„åŸå› ",1),s[1]||(s[1]=n("li",null,"mustache æ˜¯æœ€æ—©çš„æ¨¡æ¿å¼•æ“åº“ï¼Œæ¯” Vue è¯ç”Ÿçš„æ—©å¤šäº†ï¼Œå®ƒçš„åº•å±‚å®ç°æœºç†åœ¨å½“æ—¶æ˜¯éå¸¸æœ‰åˆ›é€ æ€§çš„ã€è½°åŠ¨æ€§çš„ï¼Œä¸ºåç»­æ¨¡æ¿å¼•æ“çš„å‘å±•æä¾›äº†å´­æ–°çš„æ€è·¯",-1))]),s[3]||(s[3]=a(`<h4 id="mustache-åº“åŸºæœ¬ä½¿ç”¨" tabindex="-1">mustache åº“åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#mustache-åº“åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;mustache åº“åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h4><p>å¿…é¡»è¦å¼•å…¥ mustache åº“ï¼Œå¯ä»¥åœ¨ bootcdn.com ä¸Šæ‰¾åˆ°å®ƒ</p><p>mustache çš„æ¨¡æ¿è¯­æ³•éå¸¸ç®€å•ï¼Œæ¯”å¦‚å‰è¿°æ¡ˆä¾‹çš„æ¨¡æ¿è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		&lt;!-- æ¨¡æ¿ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text/template&quot;</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;mytemplate&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			    {{#arr}}</span></span>
<span class="line"><span style="color:#ABB2BF;">			        &lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			            &lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;hd&quot;</span><span style="color:#ABB2BF;">&gt;{{name}}çš„åŸºæœ¬ä¿¡æ¯&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			            &lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;bd&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			                &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å§“åï¼š{{name}}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			                &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;æ€§åˆ«ï¼š{{sex}}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			                &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å¹´é¾„ï¼š{{age}}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			            &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			        &lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			    {{/arr}}</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;jslib/mustache.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> templateStr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;mytemplate&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">innerHTML</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				arr</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¥³&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sex</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç”·&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">				],</span></span>
<span class="line"><span style="color:#ABB2BF;">			};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> domStr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Mustache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			container</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> domStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h4 id="å¾ªç¯å¯¹è±¡æ•°ç»„" tabindex="-1">å¾ªç¯å¯¹è±¡æ•°ç»„ <a class="header-anchor" href="#å¾ªç¯å¯¹è±¡æ•°ç»„" aria-label="Permalink to &quot;å¾ªç¯å¯¹è±¡æ•°ç»„&quot;">â€‹</a></h4><p><img src="`+B+'" alt="image-20240303205159540"></p><h4 id="ä¸å¾ªç¯" tabindex="-1">ä¸å¾ªç¯ <a class="header-anchor" href="#ä¸å¾ªç¯" aria-label="Permalink to &quot;ä¸å¾ªç¯&quot;">â€‹</a></h4><p><img src="'+y+'" alt="image-20240303205222152"></p><h4 id="å¾ªç¯ç®€å•æ•°ç»„" tabindex="-1">å¾ªç¯ç®€å•æ•°ç»„ <a class="header-anchor" href="#å¾ªç¯ç®€å•æ•°ç»„" aria-label="Permalink to &quot;å¾ªç¯ç®€å•æ•°ç»„&quot;">â€‹</a></h4><p><img src="'+i+'" alt="image-20240303205244217"></p><h4 id="æ•°ç»„å¯ä»¥åµŒå¥—" tabindex="-1">æ•°ç»„å¯ä»¥åµŒå¥— <a class="header-anchor" href="#æ•°ç»„å¯ä»¥åµŒå¥—" aria-label="Permalink to &quot;æ•°ç»„å¯ä»¥åµŒå¥—&quot;">â€‹</a></h4><p><img src="'+b+'" alt="image-20240303205314941"></p><h4 id="å¸ƒå°”å€¼" tabindex="-1">å¸ƒå°”å€¼ <a class="header-anchor" href="#å¸ƒå°”å€¼" aria-label="Permalink to &quot;å¸ƒå°”å€¼&quot;">â€‹</a></h4><p><img src="'+u+`" alt="image-20240303205343438"></p><h3 id="_3-mustache-çš„åº•å±‚æ ¸å¿ƒæœºç†" tabindex="-1">3.mustache çš„åº•å±‚æ ¸å¿ƒæœºç† <a class="header-anchor" href="#_3-mustache-çš„åº•å±‚æ ¸å¿ƒæœºç†" aria-label="Permalink to &quot;3.mustache çš„åº•å±‚æ ¸å¿ƒæœºç†&quot;">â€‹</a></h3><p>mustache åº“ä¸èƒ½ç”¨ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼æ€è·¯å®ç°</p><p><strong>åœ¨è¾ƒä¸ºç®€å•çš„ç¤ºä¾‹æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°</strong></p><p>æ¨¡æ¿å­—ç¬¦ä¸²</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;æˆ‘ä¹°äº†ä¸€ä¸ª{{thing}}ï¼Œå¥½{{mood}}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ•°æ®</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;thing&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;åä¸ºæ‰‹æœº&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;mood&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¼€å¿ƒ&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä½†æ˜¯å½“æƒ…å†µå¤æ‚æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„æ€è·¯è‚¯å®šå°±ä¸è¡Œäº†ã€‚æ¯”å¦‚è¿™æ ·çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œ æ˜¯ä¸èƒ½ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ€è·¯å®ç°çš„æ¨¡æ¿å­—ç¬¦ä¸²</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		{{#arr}}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;{{.}}&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		{{/arr}}</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="mustache-åº“çš„æœºç†" tabindex="-1">mustache åº“çš„æœºç† <a class="header-anchor" href="#mustache-åº“çš„æœºç†" aria-label="Permalink to &quot;mustache åº“çš„æœºç†&quot;">â€‹</a></h4><p><img src="`+F+`" alt="image-20240303210607899"></p><h4 id="ä»€ä¹ˆæ˜¯-tokens" tabindex="-1">ä»€ä¹ˆæ˜¯ tokens <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-tokens" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ tokens&quot;">â€‹</a></h4><ul><li>tokens æ˜¯ä¸€ä¸ª JS çš„åµŒå¥—æ•°ç»„ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²çš„ JS è¡¨ç¤º</li><li>å®ƒæ˜¯â€œæŠ½è±¡è¯­æ³•æ ‘â€ã€â€œè™šæ‹ŸèŠ‚ç‚¹â€ç­‰ç­‰çš„å¼€å±±é¼»ç¥–</li></ul><h5 id="æ¨¡æ¿å­—ç¬¦ä¸²" tabindex="-1">æ¨¡æ¿å­—ç¬¦ä¸² <a class="header-anchor" href="#æ¨¡æ¿å­—ç¬¦ä¸²" aria-label="Permalink to &quot;æ¨¡æ¿å­—ç¬¦ä¸²&quot;">â€‹</a></h5><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;æˆ‘ä¹°äº†ä¸€ä¸ª{{thing}}ï¼Œå¥½{{mood}}å•Š&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="tokens-æœ€å¤–å±‚çš„-é‡Œé¢çš„æ¯ä¸€ä¸ª-éƒ½æ˜¯-token" tabindex="-1">tokensï¼šæœ€å¤–å±‚çš„[]é‡Œé¢çš„æ¯ä¸€ä¸ª[]éƒ½æ˜¯ token <a class="header-anchor" href="#tokens-æœ€å¤–å±‚çš„-é‡Œé¢çš„æ¯ä¸€ä¸ª-éƒ½æ˜¯-token" aria-label="Permalink to &quot;tokensï¼šæœ€å¤–å±‚çš„[]é‡Œé¢çš„æ¯ä¸€ä¸ª[]éƒ½æ˜¯ token&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&lt;h1&gt;æˆ‘ä¹°äº†ä¸€ä¸ª&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;thing&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ï¼Œå¥½&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;mood&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;å•Š&lt;/h1&gt;&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ¼”ç¤ºä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼å®ç°ç®€å•æ¨¡æ¿æ•°æ®å¡«å……</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> templateStr</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#98C379;">				&quot;&lt;h1&gt;æˆ‘ä¹°äº†ä¸€ä¸ª{{thing}}ï¼ŒèŠ±äº†{{money}}å…ƒï¼Œå¥½{{mood}}&lt;/h1&gt;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				thing</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç™½èœ&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				money</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				mood</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;æ¿€åŠ¨&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æœ€ç®€å•çš„æ¨¡æ¿å¼•æ“çš„å®ç°æœºç†ï¼Œåˆ©ç”¨çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„replace()æ–¹æ³•ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// replace()çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æä¾›æ•è·çš„ä¸œè¥¿çš„å‚æ•°ï¼Œå°±æ˜¯$1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ç»“åˆdataå¯¹è±¡ï¼Œå³å¯è¿›è¡Œæ™ºèƒ½çš„æ›¿æ¢</span></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">templateStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E5C07B;"> templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#56B6C2;">\\{\\{</span><span style="color:#E06C75;">(\\w</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\}\\}</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">g</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">findStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">$1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">					return</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">$1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">				});</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="æ¨¡æ¿è§£æåŸç†" tabindex="-1">æ¨¡æ¿è§£æåŸç† <a class="header-anchor" href="#æ¨¡æ¿è§£æåŸç†" aria-label="Permalink to &quot;æ¨¡æ¿è§£æåŸç†&quot;">â€‹</a></h4><p><img src="`+A+'" alt="image-20240303210953936"></p><h5 id="å¾ªç¯æƒ…å†µä¸‹çš„-tokens" tabindex="-1">å¾ªç¯æƒ…å†µä¸‹çš„ tokens <a class="header-anchor" href="#å¾ªç¯æƒ…å†µä¸‹çš„-tokens" aria-label="Permalink to &quot;å¾ªç¯æƒ…å†µä¸‹çš„ tokens&quot;">â€‹</a></h5><p><img src="'+C+'" alt="image-20240303211157133"></p><h5 id="åŒé‡å¾ªç¯æƒ…å†µä¸‹çš„-tokens" tabindex="-1">åŒé‡å¾ªç¯æƒ…å†µä¸‹çš„ tokens <a class="header-anchor" href="#åŒé‡å¾ªç¯æƒ…å†µä¸‹çš„-tokens" aria-label="Permalink to &quot;åŒé‡å¾ªç¯æƒ…å†µä¸‹çš„ tokens&quot;">â€‹</a></h5><p><img src="'+m+'" alt="image-20240303211216997"></p><h5 id="mustache-åº“çš„æœºç†-1" tabindex="-1">mustache åº“çš„æœºç† <a class="header-anchor" href="#mustache-åº“çš„æœºç†-1" aria-label="Permalink to &quot;mustache åº“çš„æœºç†&quot;">â€‹</a></h5><p><img src="'+d+`" alt="image-20240303211305979"></p><p>mustache åº“åº•å±‚é‡ç‚¹è¦åšä¸¤ä¸ªäº‹æƒ…ï¼š</p><ul><li>â‘  å°†æ¨¡æ¿å­—ç¬¦ä¸²ç¼–è¯‘ä¸º tokens å½¢å¼</li><li>â‘¡ å°† tokens ç»“åˆæ•°æ®ï¼Œè§£æä¸º dom å­—ç¬¦ä¸²</li></ul><h5 id="è§‚å¯Ÿ-tokens" tabindex="-1">è§‚å¯Ÿ tokens <a class="header-anchor" href="#è§‚å¯Ÿ-tokens" aria-label="Permalink to &quot;è§‚å¯Ÿ tokens&quot;">â€‹</a></h5><p>åœ¨ mustache.js æºç å†…æ‰¾åˆ° tokens çš„èµ‹å€¼ï¼Œæ‰“å° tokens çš„å€¼ï¼šconsole.log(tokens);</p><p>ç„¶åè°ƒç”¨ä»£ç çœ‹çœ‹ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;jslib/mustache.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> templateStr1</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> \`</span></span>
<span class="line"><span style="color:#98C379;">            &lt;ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">                {{#arr}}</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;li&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;div class=&quot;hd&quot;&gt;{{name}}çš„åŸºæœ¬ä¿¡æ¯&lt;/div&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                        &lt;div class=&quot;bd&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">                            &lt;p&gt;å§“åï¼š{{name}}&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                            &lt;p&gt;æ€§åˆ«ï¼š{{sex}}&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                            &lt;p&gt;å¹´é¾„ï¼š{{age}}&lt;/p&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">                {{/arr}}</span></span>
<span class="line"><span style="color:#98C379;">            &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">        \`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> templateStr2</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> \`</span></span>
<span class="line"><span style="color:#98C379;">            &lt;ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">                {{#arr}}</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;li&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        {{name}}çš„çˆ±å¥½æ˜¯ï¼š</span></span>
<span class="line"><span style="color:#98C379;">                        &lt;ol&gt;</span></span>
<span class="line"><span style="color:#98C379;">                            {{#hobbies}} </span></span>
<span class="line"><span style="color:#98C379;">                                &lt;li&gt;{{.}}&lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">                            {{/hobbies}} </span></span>
<span class="line"><span style="color:#98C379;">                        &lt;/ol&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    &lt;/li&gt;    </span></span>
<span class="line"><span style="color:#98C379;">                {{/arr}}</span></span>
<span class="line"><span style="color:#98C379;">            &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">        \`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">			Mustache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr2</span><span style="color:#ABB2BF;">, {});</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_4-æ‰‹å†™å®ç°-mustache-åº“" tabindex="-1">4.ğŸ…°ï¸æ‰‹å†™å®ç° mustache åº“ <a class="header-anchor" href="#_4-æ‰‹å†™å®ç°-mustache-åº“" aria-label="Permalink to &quot;4.:a:æ‰‹å†™å®ç° mustache åº“&quot;">â€‹</a></h3><h4 id="ä½¿ç”¨-webpack-å’Œ-webpack-dev-server-æ„å»º" tabindex="-1">ä½¿ç”¨ webpack å’Œ webpack-dev-server æ„å»º <a class="header-anchor" href="#ä½¿ç”¨-webpack-å’Œ-webpack-dev-server-æ„å»º" aria-label="Permalink to &quot;ä½¿ç”¨ webpack å’Œ webpack-dev-server æ„å»º&quot;">â€‹</a></h4><ul><li>æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·æœ‰ webpackï¼ˆwebpack-dev-serverï¼‰ã€rollupã€Parcel ç­‰</li><li>mustache å®˜æ–¹åº“ä½¿ç”¨ rollup è¿›è¡Œæ¨¡å—åŒ–æ‰“åŒ…ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©ä½¿ç”¨ webpackï¼ˆwebpack-dev-serverï¼‰è¿›è¡Œæ¨¡å—åŒ–æ‰“åŒ…ï¼Œè¿™æ˜¯å› ä¸º webpackï¼ˆwebpack-dev-serverï¼‰èƒ½è®©æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°åœ¨æµè§ˆå™¨ä¸­ï¼ˆè€Œä¸æ˜¯ nodejs ç¯å¢ƒä¸­ï¼‰å®æ—¶è°ƒè¯•ç¨‹åºï¼Œç›¸æ¯” nodejs æ§åˆ¶å°ï¼Œæµè§ˆå™¨æ§åˆ¶å°æ›´å¥½ç”¨ï¼Œæ¯”å¦‚èƒ½å¤Ÿç‚¹å‡»å±•å¼€æ•°ç»„çš„æ¯é¡¹ã€‚</li><li>ç”Ÿæˆåº“æ˜¯ UMD çš„ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åŒæ—¶åœ¨ nodejs ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ã€‚å®ç° UMD ä¸éš¾ï¼Œåªéœ€è¦ä¸€ä¸ªâ€œé€šç”¨å¤´â€å³å¯ã€‚</li></ul><p>æ¨¡å—åŒ–æ‰“åŒ…å·¥å…·æœ‰ webpackï¼ˆwebpack-dev-serverï¼‰ã€rollupã€Parcel ç­‰</p><p><img src="`+E+'" alt="image-20240303211531976"></p><h4 id="é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶" tabindex="-1">é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶ <a class="header-anchor" href="#é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶" aria-label="Permalink to &quot;é¡¹ç›®ç›®å½•å’Œæ–‡ä»¶&quot;">â€‹</a></h4><p><img src="'+h+`" alt="image-20240303235429504"></p><h5 id="src-ç›®å½•" tabindex="-1">src ç›®å½• <a class="header-anchor" href="#src-ç›®å½•" aria-label="Permalink to &quot;src ç›®å½•&quot;">â€‹</a></h5><ul><li>index.js</li><li>lookup.js</li><li>nestTokens.js</li><li>parseArray.js</li><li>parseTemplateToTokens.js</li><li>renderTemplate.js</li><li>Scanner.js</li></ul><h5 id="www-ç›®å½•" tabindex="-1">www ç›®å½• <a class="header-anchor" href="#www-ç›®å½•" aria-label="Permalink to &quot;www ç›®å½•&quot;">â€‹</a></h5><p>index.html</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/xuni/bundle.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ¨¡æ¿å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> templateStr</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> \`</span></span>
<span class="line"><span style="color:#98C379;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â &lt;ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">                    {{#students}}</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â &lt;li class=&quot;myli&quot;&gt;</span></span>
<span class="line"><span style="color:#98C379;">                        å­¦ç”Ÿ{{name}}çš„çˆ±å¥½æ˜¯</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â Â Â Â Â &lt;ol&gt;</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {{#hobbies}}</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;li&gt;{{.}}&lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {{/hobbies}}</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â Â Â Â Â &lt;/ol&gt;</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â &lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â Â Â Â Â {{/students}}</span></span>
<span class="line"><span style="color:#98C379;">            Â Â Â Â &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#98C379;">        \`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				students</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°æ˜&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">hobbies</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;ç¼–ç¨‹&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æ¸¸æ³³&quot;</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°çº¢&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">hobbies</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;çœ‹ä¹¦&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;å¼¹ç´&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç”»ç”»&quot;</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">					{ </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°å¼º&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">hobbies</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;é”»ç‚¼&quot;</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">				],</span></span>
<span class="line"><span style="color:#ABB2BF;">			};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è°ƒç”¨render</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> domStr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> SSG_TemplateEngine</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">domStr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ¸²æŸ“ä¸Šæ ‘</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			container</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> domStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h5 id="webpack-config-js-æ–‡ä»¶" tabindex="-1">webpack.config.js æ–‡ä»¶ <a class="header-anchor" href="#webpack-config-js-æ–‡ä»¶" aria-label="Permalink to &quot;webpack.config.js æ–‡ä»¶&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">const path = require(&#39;path&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">module.exports = {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ¨¡å¼ï¼Œå¼€å‘</span></span>
<span class="line"><span style="color:#FFFFFF;">    mode</span><span style="color:#ABB2BF;">: </span><span style="color:#FFFFFF;">&#39;development&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å…¥å£</span></span>
<span class="line"><span style="color:#FFFFFF;">    entry</span><span style="color:#ABB2BF;">: </span><span style="color:#FFFFFF;">&#39;./src/index.js&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ‰“åŒ…åˆ°ä»€ä¹ˆæ–‡ä»¶</span></span>
<span class="line"><span style="color:#FFFFFF;">    output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#FFFFFF;">        filename</span><span style="color:#ABB2BF;">: </span><span style="color:#FFFFFF;">&#39;bundle.js&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // é…ç½®ä¸€ä¸‹webpack-dev-server</span></span>
<span class="line"><span style="color:#FFFFFF;">    devServer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // é™æ€æ–‡ä»¶æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#FFFFFF;">        contentBase</span><span style="color:#ABB2BF;">: </span><span style="color:#FFFFFF;">path.join(__dirname</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;www&quot;</span><span style="color:#FFFFFF;">),</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ä¸å‹ç¼©</span></span>
<span class="line"><span style="color:#FFFFFF;">        compress</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // ç«¯å£å·</span></span>
<span class="line"><span style="color:#FFFFFF;">        port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è™šæ‹Ÿæ‰“åŒ…çš„è·¯å¾„ï¼Œbundle.jsæ–‡ä»¶æ²¡æœ‰çœŸæ­£çš„ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#FFFFFF;">        publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/xuni/&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h5 id="package-json" tabindex="-1">package.json <a class="header-anchor" href="#package-json" aria-label="Permalink to &quot;package.json&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;sgg_templateengine&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^4.44.2&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å¼€å‘æ—¶æ³¨æ„äº‹é¡¹</p><ul><li>å­¦ä¹ æºç æ—¶ï¼Œæºç æ€æƒ³è¦å€Ÿé‰´ï¼Œè€Œä¸è¦æŠ„è¢­ã€‚è¦èƒ½å¤Ÿå‘ç°æºç ä¸­ä¹¦å†™çš„ç²¾å½©çš„åœ°æ–¹ï¼›</li><li>å°†ç‹¬ç«‹çš„åŠŸèƒ½æ‹†å†™ä¸ºç‹¬ç«‹çš„ js æ–‡ä»¶ä¸­å®Œæˆï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œæ¯ä¸ªå•ç‹¬çš„åŠŸèƒ½å¿…é¡»èƒ½ç‹¬ç«‹çš„â€œå•å…ƒæµ‹è¯•â€ï¼›</li><li>åº”è¯¥å›´ç»•ä¸­å¿ƒåŠŸèƒ½ï¼Œå…ˆæŠŠä¸»å¹²å®Œæˆï¼Œç„¶åä¿®å‰ªæå¶ï¼›</li><li>åŠŸèƒ½å¹¶ä¸éœ€è¦ä¸€æ­¥åˆ°ä½ï¼ŒåŠŸèƒ½çš„æ‹“å±•è¦ä¸€æ­¥æ­¥å®Œæˆï¼Œæœ‰çš„éæ ¸å¿ƒåŠŸèƒ½ç”šè‡³ä¸éœ€å®ç°ï¼›</li></ul><h4 id="æ¨¡æ¿å¼•æ“æºç æ‰‹å†™å®ç°" tabindex="-1">ğŸ…±ï¸ æ¨¡æ¿å¼•æ“æºç æ‰‹å†™å®ç° <a class="header-anchor" href="#æ¨¡æ¿å¼•æ“æºç æ‰‹å†™å®ç°" aria-label="Permalink to &quot;:b: æ¨¡æ¿å¼•æ“æºç æ‰‹å†™å®ç°&quot;">â€‹</a></h4><p>index.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> parseTemplateToTokens</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./parseTemplateToTokens.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> renderTemplate</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./renderTemplate.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å…¨å±€æä¾›SSG_TemplateEngineå¯¹è±¡</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">SSG_TemplateEngine</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ¸²æŸ“æ–¹æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">templateStr</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è°ƒç”¨parseTemplateToTokenså‡½æ•°ï¼Œè®©æ¨¡æ¿å­—ç¬¦ä¸²èƒ½å¤Ÿå˜ä¸ºtokensæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> tokens</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parseTemplateToTokens</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è°ƒç”¨renderTemplateå‡½æ•°ï¼Œè®©tokensæ•°ç»„å˜ä¸ºdomå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> domStr</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> renderTemplate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tokens</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> domStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>lookup.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    åŠŸèƒ½æ˜¯å¯ä»¥åœ¨dataObjå¯¹è±¡ä¸­ï¼Œå¯»æ‰¾ç”¨è¿ç»­ç‚¹ç¬¦å·çš„keyNameå±æ€§</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    æ¯”å¦‚ï¼ŒdataObjæ˜¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        a: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            b: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                c: 100</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    é‚£ä¹ˆlookup(dataObj, &#39;a.b.c&#39;)ç»“æœå°±æ˜¯100</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    ä¸å¿½æ‚ å¤§å®¶ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯æŸä¸ªå¤§å‚çš„é¢è¯•é¢˜</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> lookup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">dataObj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">keyName</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// çœ‹çœ‹keyNameä¸­æœ‰æ²¡æœ‰ç‚¹ç¬¦å·ï¼Œä½†æ˜¯ä¸èƒ½æ˜¯.æœ¬èº«</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">keyName</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;">1</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> keyName</span><span style="color:#56B6C2;"> !=</span><span style="color:#98C379;"> &quot;.&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœæœ‰ç‚¹ç¬¦å·ï¼Œé‚£ä¹ˆæ‹†å¼€</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> keys</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> keyName</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è®¾ç½®ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œè¿™ä¸ªä¸´æ—¶å˜é‡ç”¨äºå‘¨è½¬ï¼Œä¸€å±‚ä¸€å±‚æ‰¾ä¸‹å»ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> dataObj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ¯æ‰¾ä¸€å±‚ï¼Œå°±æŠŠå®ƒè®¾ç½®ä¸ºæ–°çš„ä¸´æ—¶å˜é‡</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> keys</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">keys</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœè¿™é‡Œé¢æ²¡æœ‰ç‚¹ç¬¦å·</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> dataObj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">keyName</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>nestTokens.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    å‡½æ•°çš„åŠŸèƒ½æ˜¯æŠ˜å tokensï¼Œå°†#å’Œ/ä¹‹é—´çš„tokensèƒ½å¤Ÿæ•´åˆèµ·æ¥ï¼Œä½œä¸ºå®ƒçš„ä¸‹æ ‡ä¸º3çš„é¡¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> nestTokens</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">tokens</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»“æœæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> nestedTokens</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ ˆç»“æ„ï¼Œå­˜æ”¾å°tokensï¼Œæ ˆé¡¶ï¼ˆé è¿‘ç«¯å£çš„ï¼Œæœ€æ–°è¿›å…¥çš„ï¼‰çš„tokensæ•°ç»„ä¸­å½“å‰æ“ä½œçš„è¿™ä¸ªtokenså°æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> sections</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ”¶é›†å™¨ï¼Œå¤©ç”ŸæŒ‡å‘nestedTokensç»“æœæ•°ç»„ï¼Œå¼•ç”¨ç±»å‹å€¼ï¼Œæ‰€ä»¥æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ•°ç»„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ”¶é›†å™¨çš„æŒ‡å‘ä¼šå˜åŒ–ï¼Œå½“é‡è§#çš„æ—¶å€™ï¼Œæ”¶é›†å™¨ä¼šæŒ‡å‘è¿™ä¸ªtokençš„ä¸‹æ ‡ä¸º2çš„æ–°æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> collector</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> nestedTokens</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> token</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> tokens</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#C678DD;">			case</span><span style="color:#98C379;"> &quot;#&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ”¶é›†å™¨ä¸­æ”¾å…¥è¿™ä¸ªtoken</span></span>
<span class="line"><span style="color:#E5C07B;">				collector</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å…¥æ ˆ</span></span>
<span class="line"><span style="color:#E5C07B;">				sections</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ”¶é›†å™¨è¦æ¢äººã€‚ç»™tokenæ·»åŠ ä¸‹æ ‡ä¸º2çš„é¡¹ï¼Œå¹¶ä¸”è®©æ”¶é›†å™¨æŒ‡å‘å®ƒ</span></span>
<span class="line"><span style="color:#E06C75;">				collector</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">				break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			case</span><span style="color:#98C379;"> &quot;/&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å‡ºæ ˆã€‚pop()ä¼šè¿”å›åˆšåˆšå¼¹å‡ºçš„é¡¹</span></span>
<span class="line"><span style="color:#E5C07B;">				sections</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ”¹å˜æ”¶é›†å™¨ä¸ºæ ˆç»“æ„é˜Ÿå°¾ï¼ˆé˜Ÿå°¾æ˜¯æ ˆé¡¶ï¼‰é‚£é¡¹çš„ä¸‹æ ‡ä¸º2çš„æ•°ç»„</span></span>
<span class="line"><span style="color:#E06C75;">				collector</span><span style="color:#56B6C2;"> =</span></span>
<span class="line"><span style="color:#E5C07B;">					sections</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#C678DD;"> ?</span><span style="color:#E06C75;"> sections</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">sections</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">][</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> nestedTokens</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ç”­ç®¡å½“å‰çš„collectoræ˜¯è°ï¼Œå¯èƒ½æ˜¯ç»“æœnestedTokensï¼Œä¹Ÿå¯èƒ½æ˜¯æŸä¸ªtokençš„ä¸‹æ ‡ä¸º2çš„æ•°ç»„ï¼Œç”­ç®¡æ˜¯è°ï¼Œæ¨å…¥collctorå³å¯ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">				collector</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> nestedTokens</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>parseArray.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> lookup</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./lookup.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> renderTemplate</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./renderTemplate.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    å¤„ç†æ•°ç»„ï¼Œç»“åˆrenderTemplateå®ç°é€’å½’</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°æ”¶çš„å‚æ•°æ˜¯tokenï¼è€Œä¸æ˜¯tokensï¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    tokenæ˜¯ä»€ä¹ˆï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„[&#39;#&#39;, &#39;students&#39;, [</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    ]]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    è¿™ä¸ªå‡½æ•°è¦é€’å½’è°ƒç”¨renderTemplateå‡½æ•°ï¼Œè°ƒç”¨å¤šå°‘æ¬¡ï¼Ÿï¼Ÿï¼Ÿ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    åƒä¸‡åˆ«è’™åœˆï¼è°ƒç”¨çš„æ¬¡æ•°ç”±dataå†³å®š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    æ¯”å¦‚dataçš„å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        students: [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            { &#39;name&#39;: &#39;å°æ˜&#39;, &#39;hobbies&#39;: [&#39;æ¸¸æ³³&#39;, &#39;å¥èº«&#39;] },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            { &#39;name&#39;: &#39;å°çº¢&#39;, &#39;hobbies&#39;: [&#39;è¶³çƒ&#39;, &#39;è“çƒ&#39;, &#39;ç¾½æ¯›çƒ&#39;] },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            { &#39;name&#39;: &#39;å°å¼º&#39;, &#39;hobbies&#39;: [&#39;åƒé¥­&#39;, &#39;ç¡è§‰&#39;] },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        ]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    };</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    é‚£ä¹ˆparseArray()å‡½æ•°å°±è¦é€’å½’è°ƒç”¨renderTemplateå‡½æ•°3æ¬¡ï¼Œå› ä¸ºæ•°ç»„é•¿åº¦æ˜¯3</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> parseArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">token</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¾—åˆ°æ•´ä½“æ•°æ®dataä¸­è¿™ä¸ªæ•°ç»„è¦ä½¿ç”¨çš„éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> v</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> lookup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»“æœå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> resultStr</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå†væ•°ç»„ï¼Œvä¸€å®šæ˜¯æ•°ç»„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ³¨æ„ï¼Œä¸‹é¢è¿™ä¸ªå¾ªç¯å¯èƒ½æ˜¯æ•´ä¸ªåŒ…ä¸­æœ€éš¾æ€è€ƒçš„ä¸€ä¸ªå¾ªç¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®ƒæ˜¯éå†æ•°æ®ï¼Œè€Œä¸æ˜¯éå†tokensã€‚æ•°ç»„ä¸­çš„æ•°æ®æœ‰å‡ æ¡ï¼Œå°±è¦éå†å‡ æ¡ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> v</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™é‡Œè¦è¡¥ä¸€ä¸ªâ€œ.â€å±æ€§</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‹¼æ¥</span></span>
<span class="line"><span style="color:#E06C75;">		resultStr</span><span style="color:#56B6C2;"> +=</span><span style="color:#61AFEF;"> renderTemplate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">], {</span></span>
<span class="line"><span style="color:#ABB2BF;">			...</span><span style="color:#E06C75;">v</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#98C379;">			&quot;.&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">v</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> resultStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>parseTemplateToTokens.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Scanner</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Scanner.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> nestTokens</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./nestTokens.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    å°†æ¨¡æ¿å­—ç¬¦ä¸²å˜ä¸ºtokensæ•°ç»„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> parseTemplateToTokens</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">templateStr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> tokens</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ›å»ºæ‰«æå™¨</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> scanner</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Scanner</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateStr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> words</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è®©æ‰«æå™¨å·¥ä½œ</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">scanner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">eos</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ”¶é›†å¼€å§‹æ ‡è®°å‡ºç°ä¹‹å‰çš„æ–‡å­—</span></span>
<span class="line"><span style="color:#E06C75;">		words</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> scanner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scanUtil</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{{&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#56B6C2;"> !=</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°è¯•å†™ä¸€ä¸‹å»æ‰ç©ºæ ¼ï¼Œæ™ºèƒ½åˆ¤æ–­æ˜¯æ™®é€šæ–‡å­—çš„ç©ºæ ¼ï¼Œè¿˜æ˜¯æ ‡ç­¾ä¸­çš„ç©ºæ ¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ ‡ç­¾ä¸­çš„ç©ºæ ¼ä¸èƒ½å»æ‰ï¼Œæ¯”å¦‚&lt;div class=&quot;box&quot;&gt;ä¸èƒ½å»æ‰classå‰é¢çš„ç©ºæ ¼</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> isInJJH</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ç©ºç™½å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> _words</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> words</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ¤æ–­æ˜¯å¦åœ¨æ ‡ç­¾é‡Œ</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;&lt;&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					isInJJH</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;&gt;&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					isInJJH</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å¦‚æœè¿™é¡¹ä¸æ˜¯ç©ºæ ¼ï¼Œæ‹¼æ¥ä¸Š</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">/\\s/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">])) {</span></span>
<span class="line"><span style="color:#E06C75;">					_words</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> words</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å¦‚æœè¿™é¡¹æ˜¯ç©ºæ ¼ï¼Œåªæœ‰å½“å®ƒåœ¨æ ‡ç­¾å†…çš„æ—¶å€™ï¼Œæ‰æ‹¼æ¥ä¸Š</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">isInJJH</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						_words</span><span style="color:#56B6C2;"> +=</span><span style="color:#98C379;"> &quot; &quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å­˜èµ·æ¥ï¼Œå»æ‰ç©ºæ ¼</span></span>
<span class="line"><span style="color:#E5C07B;">			tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">_words</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿‡åŒå¤§æ‹¬å·</span></span>
<span class="line"><span style="color:#E5C07B;">		scanner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scan</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{{&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ”¶é›†å¼€å§‹æ ‡è®°å‡ºç°ä¹‹å‰çš„æ–‡å­—</span></span>
<span class="line"><span style="color:#E06C75;">		words</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> scanner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scanUtil</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;}}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#56B6C2;"> !=</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¿™ä¸ªwordså°±æ˜¯{{}}ä¸­é—´çš„ä¸œè¥¿ã€‚åˆ¤æ–­ä¸€ä¸‹é¦–å­—ç¬¦</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;#&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å­˜èµ·æ¥ï¼Œä»ä¸‹æ ‡ä¸º1çš„é¡¹å¼€å§‹å­˜ï¼Œå› ä¸ºä¸‹æ ‡ä¸º0çš„é¡¹æ˜¯#</span></span>
<span class="line"><span style="color:#E5C07B;">				tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;#&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">words</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;/&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å­˜èµ·æ¥ï¼Œä»ä¸‹æ ‡ä¸º1çš„é¡¹å¼€å§‹å­˜ï¼Œå› ä¸ºä¸‹æ ‡ä¸º0çš„é¡¹æ˜¯/</span></span>
<span class="line"><span style="color:#E5C07B;">				tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">words</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å­˜èµ·æ¥</span></span>
<span class="line"><span style="color:#E5C07B;">				tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">words</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿‡åŒå¤§æ‹¬å·</span></span>
<span class="line"><span style="color:#E5C07B;">		scanner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scan</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;}}&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¿”å›æŠ˜å æ”¶é›†çš„tokens</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> nestTokens</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tokens</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><p>renderTemplate.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> lookup</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./lookup.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> parseArray</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./parseArray.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    å‡½æ•°çš„åŠŸèƒ½æ˜¯è®©tokensæ•°ç»„å˜ä¸ºdomå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> renderTemplate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">tokens</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»“æœå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> resultStr</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå†tokens</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> tokens</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> token</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> tokens</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// çœ‹ç±»å‹</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;text&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ‹¼èµ·æ¥</span></span>
<span class="line"><span style="color:#E06C75;">			resultStr</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;name&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ˜¯nameç±»å‹ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä½¿ç”¨å®ƒçš„å€¼ï¼Œå½“ç„¶è¦ç”¨lookup</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å› ä¸ºé˜²æ­¢è¿™é‡Œæ˜¯â€œa.b.câ€æœ‰é€—å·çš„å½¢å¼</span></span>
<span class="line"><span style="color:#E06C75;">			resultStr</span><span style="color:#56B6C2;"> +=</span><span style="color:#61AFEF;"> lookup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;#&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			resultStr</span><span style="color:#56B6C2;"> +=</span><span style="color:#61AFEF;"> parseArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> resultStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>Scanner.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    æ‰«æå™¨ç±»</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Scanner</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">templateStr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å°†æ¨¡æ¿å­—ç¬¦ä¸²å†™åˆ°å®ä¾‹èº«ä¸Š</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">templateStr</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> templateStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æŒ‡é’ˆ</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å°¾å·´ï¼Œä¸€å¼€å§‹å°±æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²åŸæ–‡</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> templateStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åŠŸèƒ½å¼±ï¼Œå°±æ˜¯èµ°è¿‡æŒ‡å®šå†…å®¹ï¼Œæ²¡æœ‰è¿”å›å€¼</span></span>
<span class="line"><span style="color:#61AFEF;">	scan</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">tag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// tagæœ‰å¤šé•¿ï¼Œæ¯”å¦‚{{é•¿åº¦æ˜¯2ï¼Œå°±è®©æŒ‡é’ˆåç§»å¤šå°‘ä½</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> tag</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°¾å·´ä¹Ÿè¦å˜ï¼Œæ”¹å˜å°¾å·´ä¸ºä»å½“å‰æŒ‡é’ˆè¿™ä¸ªå­—ç¬¦å¼€å§‹ï¼Œåˆ°æœ€åçš„å…¨éƒ¨å­—ç¬¦</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è®©æŒ‡é’ˆè¿›è¡Œæ‰«æï¼Œç›´åˆ°é‡è§æŒ‡å®šå†…å®¹ç»“æŸï¼Œå¹¶ä¸”èƒ½å¤Ÿè¿”å›ç»“æŸä¹‹å‰è·¯è¿‡çš„æ–‡å­—</span></span>
<span class="line"><span style="color:#61AFEF;">	scanUtil</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">stopTag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è®°å½•ä¸€ä¸‹æ‰§è¡Œæœ¬æ–¹æ³•çš„æ—¶å€™posçš„å€¼</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> pos_backup</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å½“å°¾å·´çš„å¼€å¤´ä¸æ˜¯stopTagçš„æ—¶å€™ï¼Œå°±è¯´æ˜è¿˜æ²¡æœ‰æ‰«æåˆ°stopTag</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å†™&amp;&amp;å¾ˆæœ‰å¿…è¦ï¼Œå› ä¸ºé˜²æ­¢æ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆå¯»æ‰¾åˆ°æœ€åä¹Ÿè¦åœæ­¢ä¸‹æ¥</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">eos</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">stopTag</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ”¹å˜å°¾å·´ä¸ºä»å½“å‰æŒ‡é’ˆè¿™ä¸ªå­—ç¬¦å¼€å§‹ï¼Œåˆ°æœ€åçš„å…¨éƒ¨å­—ç¬¦</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">tail</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">pos_backup</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æŒ‡é’ˆæ˜¯å¦å·²ç»åˆ°å¤´ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚end of string</span></span>
<span class="line"><span style="color:#61AFEF;">	eos</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pos</span><span style="color:#56B6C2;"> &gt;=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><ul><li>Mustache åº•å±‚å¤ªç¾äº†ï¼tokens çš„æ„ä¹‰ä¹Ÿä¸è¨€è‡ªæ˜äº†ã€‚å¦‚æœæ²¡æœ‰ tokenï¼Œé‚£ ä¹ˆæ•°ç»„çš„å¾ªç¯å½¢å¼ï¼Œå°±å¾ˆéš¾å¤„ç†ã€‚æˆ‘ä»¬é€šè¿‡æœ¬è¯¾ï¼Œç¡®å®å­¦åˆ°äº†å¾ˆå¤šï¼Œè§†é‡é¢ å˜å¾—æ›´å¹¿ï¼Œæ„Ÿè§‰è‚šå­é‡Œçš„ä¸œè¥¿æ›´å¤šäº†ï¼›</li><li>åœ¨ Mustache æºç ä¸­ï¼Œè¿˜æœ‰ Context ç±»å’Œ Writer ç±»ï¼Œåœ¨æˆ‘ä»¬çš„ä»£ç æ¼”ç¤ºä¸­ï¼Œ éƒ½å°†å®ƒä»¬è¿›è¡Œäº†ç®€åŒ–ï¼Œä½†æ˜¯ä¸å½±å“ä¸»å¹²åŠŸèƒ½çš„å®ç°ã€‚æˆ‘ä»¬çš„è¿™ä¸ªâ€œç®€åŒ–ç‰ˆæœ¬ çš„â€ä»£ç éå¸¸å€¼å¾—å¤§å®¶è¿›è¡Œæ‰‹å†™ï¼Œä½ ä¼šå—ç›Šè‰¯å¤šçš„ï¼å½“ç„¶ï¼Œå¦‚æœæœ‰ç²¾åŠ›ï¼Œå¯ ä»¥å†ç ”ç©¶é€å½»è¿™ä¸ªâ€œç®€åŒ–ç‰ˆæœ¬çš„â€ä»£ç åï¼Œè‡ªå·±å¯¹ Mustache åŸåŒ…è¿›è¡Œå­¦ä¹ ï¼›</li></ul><h2 id="äºŒã€è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" tabindex="-1">äºŒã€è™šæ‹Ÿ DOM å’Œ diff ç®—æ³• <a class="header-anchor" href="#äºŒã€è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" aria-label="Permalink to &quot;äºŒã€è™šæ‹Ÿ DOM å’Œ diff ç®—æ³•&quot;">â€‹</a></h2><h3 id="ç®€å•ä»‹ç»ä¸€ä¸‹è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" tabindex="-1">ç®€å•ä»‹ç»ä¸€ä¸‹è™šæ‹Ÿ DOM å’Œ diff ç®—æ³• <a class="header-anchor" href="#ç®€å•ä»‹ç»ä¸€ä¸‹è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" aria-label="Permalink to &quot;ç®€å•ä»‹ç»ä¸€ä¸‹è™šæ‹Ÿ DOM å’Œ diff ç®—æ³•&quot;">â€‹</a></h3><p><img src="`+D+'" alt="image-20240304000205513"></p><p><img src="'+q+'" alt="image-20240304000222107"></p><p>diff æ˜¯å‘ç”Ÿåœ¨è™šæ‹Ÿ DOM ä¸Šçš„</p><p><img src="'+p+'" alt="image-20240304000243984"></p><h3 id="å¼€å§‹å­¦ä¹ " tabindex="-1">å¼€å§‹å­¦ä¹  <a class="header-anchor" href="#å¼€å§‹å­¦ä¹ " aria-label="Permalink to &quot;å¼€å§‹å­¦ä¹ &quot;">â€‹</a></h3><p><img src="'+g+`" alt="image-20240304000403428"></p><h3 id="_1-snabbdom-ç®€ä»‹å’Œæµ‹è¯•ç¯å¢ƒæ­å»º" tabindex="-1">1.snabbdom ç®€ä»‹å’Œæµ‹è¯•ç¯å¢ƒæ­å»º <a class="header-anchor" href="#_1-snabbdom-ç®€ä»‹å’Œæµ‹è¯•ç¯å¢ƒæ­å»º" aria-label="Permalink to &quot;1.snabbdom ç®€ä»‹å’Œæµ‹è¯•ç¯å¢ƒæ­å»º&quot;">â€‹</a></h3><ul><li>snabbdom æ˜¯ç‘å…¸è¯­å•è¯ï¼Œå•è¯åŸæ„â€œé€Ÿåº¦â€ï¼›</li><li>snabbdom æ˜¯è‘—åçš„è™šæ‹Ÿ DOM åº“ï¼Œæ˜¯ diff ç®—æ³•çš„é¼»ç¥–ï¼ŒVue æºç å€Ÿé‰´äº† snabbdomï¼› å®˜æ–¹ gitï¼š<a href="https://github.com/snabbdom/snabbdom" target="_blank" rel="noreferrer">https://github.com/snabbdom/snabbdom</a></li></ul><h4 id="_1-å®‰è£…-snabbdom" tabindex="-1">1.å®‰è£… snabbdom <a class="header-anchor" href="#_1-å®‰è£…-snabbdom" aria-label="Permalink to &quot;1.å®‰è£… snabbdom&quot;">â€‹</a></h4><p>1.åœ¨ git ä¸Šçš„ snabbdom æºç æ˜¯ç”¨ TypeScript å†™çš„ï¼Œgit ä¸Šå¹¶ä¸æä¾›ç¼–è¯‘å¥½çš„ JavaScript ç‰ˆæœ¬ï¼›</p><p>2.å¦‚æœè¦ç›´æ¥ä½¿ç”¨ build å‡ºæ¥çš„ JavaScript ç‰ˆçš„ snabbdom åº“ï¼Œå¯ä»¥ä» npm ä¸Šä¸‹ è½½ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> i</span><span style="color:#D19A66;"> -D</span><span style="color:#98C379;"> snabbdom</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å­¦ä¹ åº“åº•å±‚æ—¶ï¼Œå»ºè®®å¤§å®¶é˜…è¯»åŸæ±åŸå‘³çš„ TS ä»£ç ï¼Œæœ€å¥½å¸¦æœ‰åº“ä½œè€…åŸæ³¨é‡Šï¼Œ è¿™æ ·å¯¹ä½ çš„æºç é˜…è¯»èƒ½åŠ›ä¼šæœ‰å¾ˆå¤§çš„æå‡ã€‚</p><h4 id="_2-snabbdom-çš„æµ‹è¯•ç¯å¢ƒæ­å»º" tabindex="-1">2.snabbdom çš„æµ‹è¯•ç¯å¢ƒæ­å»º <a class="header-anchor" href="#_2-snabbdom-çš„æµ‹è¯•ç¯å¢ƒæ­å»º" aria-label="Permalink to &quot;2.snabbdom çš„æµ‹è¯•ç¯å¢ƒæ­å»º&quot;">â€‹</a></h4><h5 id="æ–°å»ºä¸€ä¸ªç›®å½•-study-snabbdom" tabindex="-1">æ–°å»ºä¸€ä¸ªç›®å½• study-snabbdom <a class="header-anchor" href="#æ–°å»ºä¸€ä¸ªç›®å½•-study-snabbdom" aria-label="Permalink to &quot;æ–°å»ºä¸€ä¸ªç›®å½• study-snabbdom&quot;">â€‹</a></h5><p>1.snabbdom åº“æ˜¯ DOM åº“ï¼Œå½“ç„¶ä¸èƒ½åœ¨ nodejs ç¯å¢ƒè¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ­å»º webpack å’Œ webpack-dev-server å¼€å‘ç¯å¢ƒï¼Œå¥½æ¶ˆæ¯æ˜¯ä¸éœ€è¦å®‰è£…ä»»ä½• loader</p><p>2.è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ<strong>å¿…é¡»å®‰è£…æœ€æ–°ç‰ˆ webpack@5</strong>ï¼Œä¸èƒ½å®‰è£… webpack@4ï¼Œè¿™æ˜¯å› ä¸º webpack4 æ²¡æœ‰è¯»å–èº«ä»½è¯ä¸­ exports çš„èƒ½åŠ›ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨è¿™æ ·çš„ç‰ˆæœ¬ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> i</span><span style="color:#D19A66;"> -D</span><span style="color:#98C379;"> webpack@5</span><span style="color:#98C379;"> webpack-cli@3</span><span style="color:#98C379;"> webpack-dev-server@3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="webpack-config-js" tabindex="-1">webpack.config.js <a class="header-anchor" href="#webpack-config-js" aria-label="Permalink to &quot;webpack.config.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ä»https://www.webpackjs.com/å®˜ç½‘ç…§ç€é…ç½®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;path&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å…¥å£</span></span>
<span class="line"><span style="color:#E06C75;">	entry</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;./src/index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡ºå£</span></span>
<span class="line"><span style="color:#E06C75;">	output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è™šæ‹Ÿæ‰“åŒ…è·¯å¾„ï¼Œå°±æ˜¯è¯´æ–‡ä»¶å¤¹ä¸ä¼šçœŸæ­£ç”Ÿæˆï¼Œè€Œæ˜¯åœ¨8080ç«¯å£è™šæ‹Ÿç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;xuni&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åï¼Œä¸ä¼šçœŸæ­£çš„ç‰©ç†ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		filename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bundle.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	devServer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç«¯å£å·</span></span>
<span class="line"><span style="color:#E06C75;">		port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#E06C75;">		contentBase</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;www&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="package-json-1" tabindex="-1">package.json <a class="header-anchor" href="#package-json-1" aria-label="Permalink to &quot;package.json&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;study-snabbdom&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;dependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;snabbdom&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.6.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.11.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="src-index-js" tabindex="-1">src/index.js <a class="header-anchor" href="#src-index-js" aria-label="Permalink to &quot;src/index.js&quot;">â€‹</a></h5><p>å®˜æ–¹ä»“åº“çš„ Example ä»£ç ï¼š</p><p><img src="`+f+`" alt="image-20240304010240972"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	init</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	classModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	propsModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	styleModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	eventListenersModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	h</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> patch</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> init</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// Init patch function with chosen modules</span></span>
<span class="line"><span style="color:#E06C75;">	classModule</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// makes it easy to toggle classes</span></span>
<span class="line"><span style="color:#E06C75;">	propsModule</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// for setting properties on DOM elements</span></span>
<span class="line"><span style="color:#E06C75;">	styleModule</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// handles styling on elements with support for animations</span></span>
<span class="line"><span style="color:#E06C75;">	eventListenersModule</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// attaches event listeners</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> vnode</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">	&quot;div#container.two.classes&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">on</span><span style="color:#ABB2BF;">: { </span><span style="color:#61AFEF;">click</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div clicked&quot;</span><span style="color:#ABB2BF;">) } },</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span></span>
<span class="line"><span style="color:#61AFEF;">		h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;span&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">fontWeight</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bold&quot;</span><span style="color:#ABB2BF;"> } }, </span><span style="color:#98C379;">&quot;This is bold&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#98C379;">		&quot; and this is just normal text&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">		h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/foo&quot;</span><span style="color:#ABB2BF;"> } }, </span><span style="color:#98C379;">&quot;I&#39;ll take you places!&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">	]</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Patch into empty DOM element â€“ this modifies the DOM as a side effect</span></span>
<span class="line"><span style="color:#61AFEF;">patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">container</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">vnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">	&quot;div#container.two.classes&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">on</span><span style="color:#ABB2BF;">: { </span><span style="color:#61AFEF;">click</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;updated div clicked&quot;</span><span style="color:#ABB2BF;">) } },</span></span>
<span class="line"><span style="color:#ABB2BF;">	[</span></span>
<span class="line"><span style="color:#61AFEF;">		h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">			&quot;span&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			{ </span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">fontWeight</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;normal&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">fontStyle</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;italic&quot;</span><span style="color:#ABB2BF;"> } },</span></span>
<span class="line"><span style="color:#98C379;">			&quot;This is now italic type&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">		),</span></span>
<span class="line"><span style="color:#98C379;">		&quot; and this is still just normal text&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">		h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/bar&quot;</span><span style="color:#ABB2BF;"> } }, </span><span style="color:#98C379;">&quot;I&#39;ll take you places!&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">	]</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Second \`patch\` invocation</span></span>
<span class="line"><span style="color:#61AFEF;">patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">vnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newVnode</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// Snabbdom efficiently updates the old view to the new state</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h5 id="www-index-html" tabindex="-1">www/index.html <a class="header-anchor" href="#www-index-html" aria-label="Permalink to &quot;www/index.html&quot;">â€‹</a></h5><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;btn&quot;</span><span style="color:#ABB2BF;">&gt;æŒ‰æˆ‘æ”¹å˜DOM&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/xuni/bundle.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å¼€å§‹å¯åŠ¨é¡¹ç›®ï¼Œå³è¯æ˜è°ƒè¯•ç¯å¢ƒå·²ç»æ­å»ºæˆåŠŸã€‚</p><h4 id="_3-snabbdom-å®˜æ–¹-git-ä»“åº“-examples-ç›®å½•çš„-demo-ç¨‹åº" tabindex="-1">3.snabbdom å®˜æ–¹ git ä»“åº“ examples ç›®å½•çš„ demo ç¨‹åº <a class="header-anchor" href="#_3-snabbdom-å®˜æ–¹-git-ä»“åº“-examples-ç›®å½•çš„-demo-ç¨‹åº" aria-label="Permalink to &quot;3.snabbdom å®˜æ–¹ git ä»“åº“ examples ç›®å½•çš„ demo ç¨‹åº&quot;">â€‹</a></h4><p>è·‘é€š snabbdom å®˜æ–¹ git ä»“åº“çš„ Example çš„ä»£ç ä¹Ÿå¯ä»¥æ‰¾ examples ç›®å½•çš„ demo ç¨‹åºè·‘è·‘è¯•ä¸‹ã€‚</p><p><img src="`+v+'" alt="image-20240304004336746"></p><h3 id="_2-è™šæ‹Ÿ-dom-å’Œ-h-å‡½æ•°" tabindex="-1">2.è™šæ‹Ÿ DOM å’Œ h å‡½æ•° <a class="header-anchor" href="#_2-è™šæ‹Ÿ-dom-å’Œ-h-å‡½æ•°" aria-label="Permalink to &quot;2.è™šæ‹Ÿ DOM å’Œ h å‡½æ•°&quot;">â€‹</a></h3><p><img src="'+k+'" alt="image-20240304001301141"></p><p>diff æ˜¯å‘ç”Ÿåœ¨è™šæ‹Ÿ DOM ä¸Šçš„</p><p><img src="'+p+`" alt="image-20240304000243984"></p><h3 id="_3-ä½“éªŒ-h-å’Œ-diff-å‡½æ•°" tabindex="-1">3.ä½“éªŒ h å’Œ diff å‡½æ•° <a class="header-anchor" href="#_3-ä½“éªŒ-h-å’Œ-diff-å‡½æ•°" aria-label="Permalink to &quot;3.ä½“éªŒ h å’Œ diff å‡½æ•°&quot;">â€‹</a></h3><p>åŸºäºä¸Šé¢çš„åˆ›å»ºçš„ study-snabbdom é¡¹ç›®</p><h5 id="package-json-è£…ä¸Š-snabbdom-åº“" tabindex="-1">package.json è£…ä¸Š snabbdom åº“ <a class="header-anchor" href="#package-json-è£…ä¸Š-snabbdom-åº“" aria-label="Permalink to &quot;package.json è£…ä¸Š snabbdom åº“&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;study-snabbdom&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;dependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;snabbdom&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.6.2&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.11.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="src-index-å­¦ä¹ -h-å‡½æ•°-js" tabindex="-1">src/index-å­¦ä¹  h å‡½æ•°.js <a class="header-anchor" href="#src-index-å­¦ä¹ -h-å‡½æ•°-js" aria-label="Permalink to &quot;src/index-å­¦ä¹  h å‡½æ•°.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">init</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/init&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">classModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/class&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">propsModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/props&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">styleModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/style&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">eventListenersModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/eventlisteners&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/h&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºå‡ºpatchå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> patch</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> init</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#E06C75;">	classModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	propsModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	styleModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	eventListenersModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> myVnode1</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">	&quot;a&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#E06C75;">		props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;http://www.atguigu.com&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			target</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;_blank&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#98C379;">	&quot;å°šç¡…è°·&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> myVnode2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;æˆ‘æ˜¯ä¸€ä¸ªç›’å­&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> myVnode3</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, [</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, {}, </span><span style="color:#98C379;">&quot;è‹¹æœ&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;è¥¿ç“œ&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, [</span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;div&quot;</span><span style="color:#ABB2BF;">, [</span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;å“ˆå“ˆ&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;å˜»å˜»&quot;</span><span style="color:#ABB2BF;">)])]),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;p&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ç«é¾™æœ&quot;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">myVnode3</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Šæ ‘</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">container</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">myVnode3</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h5 id="src-index-ä½“éªŒ-diff-ç®—æ³•-js" tabindex="-1">src/index-ä½“éªŒ diff ç®—æ³•.js <a class="header-anchor" href="#src-index-ä½“éªŒ-diff-ç®—æ³•-js" aria-label="Permalink to &quot;src/index-ä½“éªŒ diff ç®—æ³•.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">init</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/init&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">classModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/class&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">propsModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/props&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">styleModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/style&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">eventListenersModule</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/modules/eventlisteners&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">h</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;snabbdom/h&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¾—åˆ°ç›’å­å’ŒæŒ‰é’®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> btn</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;btn&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºå‡ºpatchå‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> patch</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> init</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#E06C75;">	classModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	propsModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	styleModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	eventListenersModule</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> vnode1</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, {}, [</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">container</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">vnode1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> vnode2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, {}, [</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå°†vnode1å˜ä¸ºvnode2</span></span>
<span class="line"><span style="color:#E5C07B;">btn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onclick</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">	patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">vnode1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">vnode2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_4-snabbdom-çš„-h-å‡½æ•°å¦‚ä½•å·¥ä½œ" tabindex="-1">4.snabbdom çš„ h å‡½æ•°å¦‚ä½•å·¥ä½œ <a class="header-anchor" href="#_4-snabbdom-çš„-h-å‡½æ•°å¦‚ä½•å·¥ä½œ" aria-label="Permalink to &quot;4.snabbdom çš„ h å‡½æ•°å¦‚ä½•å·¥ä½œ&quot;">â€‹</a></h3><h4 id="h-å‡½æ•°ç”¨æ¥äº§ç”Ÿè™šæ‹ŸèŠ‚ç‚¹-vnode" tabindex="-1">h å‡½æ•°ç”¨æ¥äº§ç”Ÿè™šæ‹ŸèŠ‚ç‚¹ï¼ˆvnodeï¼‰ <a class="header-anchor" href="#h-å‡½æ•°ç”¨æ¥äº§ç”Ÿè™šæ‹ŸèŠ‚ç‚¹-vnode" aria-label="Permalink to &quot;h å‡½æ•°ç”¨æ¥äº§ç”Ÿè™šæ‹ŸèŠ‚ç‚¹ï¼ˆvnodeï¼‰&quot;">â€‹</a></h4><p>æ¯”å¦‚è¿™æ ·è°ƒç”¨ h å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;http://www.atguigu.com&quot;</span><span style="color:#ABB2BF;"> } }, </span><span style="color:#98C379;">&quot;å°šç¡…è°·&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å°†å¾—åˆ°è¿™æ ·çš„è™šæ‹ŸèŠ‚ç‚¹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#98C379;">&quot;sel&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;http://www.atguigu.com&#39;</span><span style="color:#ABB2BF;"> } }, </span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å°šç¡…è°·&quot;</span><span style="color:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å®ƒè¡¨ç¤ºçš„çœŸæ­£çš„ DOM èŠ‚ç‚¹ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">a</span><span style="color:#D19A66;"> href</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://www.atguigu.com&quot;</span><span style="color:#ABB2BF;">&gt;å°šç¡…è°·&lt;/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æœ‰å“ªäº›å±æ€§" tabindex="-1">ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æœ‰å“ªäº›å±æ€§ï¼Ÿ <a class="header-anchor" href="#ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æœ‰å“ªäº›å±æ€§" aria-label="Permalink to &quot;ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æœ‰å“ªäº›å±æ€§ï¼Ÿ&quot;">â€‹</a></h4><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#FFFFFF;">    children</span><span style="color:#ABB2BF;">: </span><span style="color:#FFFFFF;">undefined</span></span>
<span class="line"><span style="color:#FFFFFF;">    data:</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#FFFFFF;">    elm:</span><span style="color:#FFFFFF;"> undefined</span></span>
<span class="line"><span style="color:#FFFFFF;">    key:</span><span style="color:#FFFFFF;"> undefined</span></span>
<span class="line"><span style="color:#FFFFFF;">    sel:</span><span style="color:#98C379;"> &quot;div&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">    text:</span><span style="color:#98C379;"> &quot;æˆ‘æ˜¯ä¸€ä¸ªç›’å­&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>h å‡½æ•°å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œä»è€Œå¾—åˆ°è™šæ‹Ÿ DOM æ ‘ï¼ˆé‡è¦ï¼‰</p><p>æ¯”å¦‚è¿™æ ·åµŒå¥—ä½¿ç”¨ h å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, {}, [</span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, {}, </span><span style="color:#98C379;">&quot;ç‰›å¥¶&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, {}, </span><span style="color:#98C379;">&quot;å’–å•¡&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#61AFEF;">h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, {}, </span><span style="color:#98C379;">&quot;å¯ä¹&quot;</span><span style="color:#ABB2BF;">)]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å°†å¾—åˆ°è¿™æ ·çš„è™šæ‹Ÿ DOM æ ‘ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;sel&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;data&quot;</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;children&quot;</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">		{ </span><span style="color:#E06C75;">&quot;sel&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;text&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ç‰›å¥¶&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">		{ </span><span style="color:#E06C75;">&quot;sel&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;text&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å’–å•¡&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">		{ </span><span style="color:#E06C75;">&quot;sel&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;text&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;å¯ä¹&quot;</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">	]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="h-å‡½æ•°ç”¨æ³•å¾ˆæ´»" tabindex="-1">h å‡½æ•°ç”¨æ³•å¾ˆæ´» <a class="header-anchor" href="#h-å‡½æ•°ç”¨æ³•å¾ˆæ´»" aria-label="Permalink to &quot;h å‡½æ•°ç”¨æ³•å¾ˆæ´»&quot;">â€‹</a></h4><p>æ¼”ç¤ºä¸€ä¸‹ h å‡½æ•°çš„å¤šç§ç”¨æ³•</p><p><img src="`+x+'" alt="image-20240304002034531"></p><h3 id="_5-diff-ç®—æ³•åŸç†" tabindex="-1">5.diff ç®—æ³•åŸç† <a class="header-anchor" href="#_5-diff-ç®—æ³•åŸç†" aria-label="Permalink to &quot;5.diff ç®—æ³•åŸç†&quot;">â€‹</a></h3><ul><li>æœ€å°é‡æ›´æ–°å¤ªå‰å®³å•¦ï¼çœŸçš„æ˜¯æœ€å°é‡æ›´æ–°ï¼å½“ç„¶ï¼Œkey å¾ˆé‡è¦ã€‚key æ˜¯è¿™ä¸ªèŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œå‘Šè¯‰ diff ç®—æ³•ï¼Œåœ¨æ›´æ”¹å‰åå®ƒä»¬æ˜¯åŒä¸€ä¸ª DOM èŠ‚ç‚¹ã€‚</li><li><strong>åªæœ‰æ˜¯åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œæ‰è¿›è¡Œç²¾ç»†åŒ–æ¯”è¾ƒ</strong>ï¼Œå¦åˆ™å°±æ˜¯æš´åŠ›åˆ é™¤æ—§çš„ã€æ’å…¥æ–°çš„ã€‚å»¶ä¼¸é—®é¢˜ï¼šå¦‚ä½•å®šä¹‰æ˜¯åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Ÿç­”ï¼šé€‰æ‹©å™¨ç›¸åŒä¸” key ç›¸åŒã€‚</li><li><strong>åªè¿›è¡ŒåŒå±‚æ¯”è¾ƒï¼Œä¸ä¼šè¿›è¡Œè·¨å±‚æ¯”è¾ƒ</strong>ã€‚å³ä½¿æ˜¯åŒä¸€ç‰‡è™šæ‹ŸèŠ‚ç‚¹ï¼Œä½†æ˜¯è·¨å±‚äº†ï¼Œå¯¹ä¸èµ·ï¼Œç²¾ç»†åŒ–æ¯”è¾ƒä¸ diff ä½ ï¼Œè€Œæ˜¯æš´åŠ›åˆ é™¤æ—§çš„ã€ç„¶åæ’å…¥æ–°çš„ã€‚</li></ul><p>diff å¹¶ä¸æ˜¯é‚£ä¹ˆçš„â€œæ— å¾®ä¸è‡³â€å•Šï¼çœŸçš„å½±å“æ•ˆç‡ä¹ˆï¼Ÿï¼Ÿ</p><p>ç­”ï¼šä¸Šé¢ 2ã€3 æ“ä½œåœ¨å®é™… Vue å¼€å‘ä¸­ï¼ŒåŸºæœ¬ä¸ä¼šé‡è§ï¼Œæ‰€ä»¥è¿™æ˜¯åˆç†çš„ä¼˜åŒ– æœºåˆ¶ã€‚</p><h4 id="åŒå±‚å¯¹æ¯”ç¤ºæ„å›¾" tabindex="-1">åŒå±‚å¯¹æ¯”ç¤ºæ„å›¾ <a class="header-anchor" href="#åŒå±‚å¯¹æ¯”ç¤ºæ„å›¾" aria-label="Permalink to &quot;åŒå±‚å¯¹æ¯”ç¤ºæ„å›¾&quot;">â€‹</a></h4><p><img src="'+w+'" alt="image-20240304002246646"></p><h4 id="diff-å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶" tabindex="-1">diff å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ <a class="header-anchor" href="#diff-å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶" aria-label="Permalink to &quot;diff å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶&quot;">â€‹</a></h4><p><img src="'+j+'" alt="image-20240304002323699"></p><h4 id="å¦‚ä½•å®šä¹‰-åŒä¸€ä¸ªèŠ‚ç‚¹" tabindex="-1">å¦‚ä½•å®šä¹‰â€œåŒä¸€ä¸ªèŠ‚ç‚¹â€ <a class="header-anchor" href="#å¦‚ä½•å®šä¹‰-åŒä¸€ä¸ªèŠ‚ç‚¹" aria-label="Permalink to &quot;å¦‚ä½•å®šä¹‰â€œåŒä¸€ä¸ªèŠ‚ç‚¹â€&quot;">â€‹</a></h4><p><img src="'+_+'" alt="image-20240304002356237"></p><h4 id="åˆ›å»ºèŠ‚ç‚¹æ—¶-æ‰€æœ‰å­èŠ‚ç‚¹éœ€è¦é€’å½’åˆ›å»ºçš„" tabindex="-1">åˆ›å»ºèŠ‚ç‚¹æ—¶ï¼Œæ‰€æœ‰å­èŠ‚ç‚¹éœ€è¦é€’å½’åˆ›å»ºçš„ <a class="header-anchor" href="#åˆ›å»ºèŠ‚ç‚¹æ—¶-æ‰€æœ‰å­èŠ‚ç‚¹éœ€è¦é€’å½’åˆ›å»ºçš„" aria-label="Permalink to &quot;åˆ›å»ºèŠ‚ç‚¹æ—¶ï¼Œæ‰€æœ‰å­èŠ‚ç‚¹éœ€è¦é€’å½’åˆ›å»ºçš„&quot;">â€‹</a></h4><p><img src="'+V+'" alt="image-20240304002418827"></p><h4 id="diff-ç®—æ³•å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸ºåŒä¸€èŠ‚ç‚¹æ—¶" tabindex="-1">diff ç®—æ³•å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸ºåŒä¸€èŠ‚ç‚¹æ—¶ <a class="header-anchor" href="#diff-ç®—æ³•å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸ºåŒä¸€èŠ‚ç‚¹æ—¶" aria-label="Permalink to &quot;diff ç®—æ³•å¤„ç†æ–°æ—§èŠ‚ç‚¹ä¸ºåŒä¸€èŠ‚ç‚¹æ—¶&quot;">â€‹</a></h4><p><img src="'+P+'" alt="æµç¨‹å›¾"></p><h4 id="ç»å…¸çš„-diff-ç®—æ³•ä¼˜åŒ–ç­–ç•¥" tabindex="-1">ç»å…¸çš„ diff ç®—æ³•ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#ç»å…¸çš„-diff-ç®—æ³•ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;ç»å…¸çš„ diff ç®—æ³•ä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h4><p><img src="'+S+'" alt="image-20240304002503493"></p><h4 id="ç®—æ³•-æ—§å‰ã€æ—§å-æ–°å‰ã€æ–°åæ¦‚å¿µ" tabindex="-1">ç®—æ³•ï¼šæ—§å‰ã€æ—§å | æ–°å‰ã€æ–°åæ¦‚å¿µ <a class="header-anchor" href="#ç®—æ³•-æ—§å‰ã€æ—§å-æ–°å‰ã€æ–°åæ¦‚å¿µ" aria-label="Permalink to &quot;ç®—æ³•ï¼šæ—§å‰ã€æ—§å | æ–°å‰ã€æ–°åæ¦‚å¿µ&quot;">â€‹</a></h4><p>æ—§å‰ï¼šæ—§èŠ‚ç‚¹åˆé›†çš„çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</p><p>æ—§åï¼šæ—§èŠ‚ç‚¹åˆé›†çš„çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</p><p>æ–°å‰ï¼šæ–°èŠ‚ç‚¹åˆé›†çš„çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</p><p>æ–°åï¼šæ–°èŠ‚ç‚¹åˆé›†çš„çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</p><p>è¿™äº›åˆ¤æ–­å¯¹æ¯”åè™šæ‹Ÿ DOM å‘½ä¸­åä¼šç§»åŠ¨ä½ç½®ï¼Œè¿™äº›å‘½åä¹Ÿä¼šç§»åŠ¨ä½ç½®ï¼Œæ¢ä¸€ä¸ª DOM æˆä¸ºæ—§å‰ã€æ—§å | æ–°å‰ã€æ–°åã€‚</p><h4 id="æ›´æ–°å­èŠ‚ç‚¹-å¯¹åº”-updatechildren-js-é‡Œçš„æ–¹æ³•" tabindex="-1">æ›´æ–°å­èŠ‚ç‚¹ï¼šå¯¹åº” updateChildren.js é‡Œçš„æ–¹æ³• <a class="header-anchor" href="#æ›´æ–°å­èŠ‚ç‚¹-å¯¹åº”-updatechildren-js-é‡Œçš„æ–¹æ³•" aria-label="Permalink to &quot;æ›´æ–°å­èŠ‚ç‚¹ï¼šå¯¹åº” updateChildren.js é‡Œçš„æ–¹æ³•&quot;">â€‹</a></h4><h5 id="æ–°å¢çš„æƒ…å†µ" tabindex="-1">æ–°å¢çš„æƒ…å†µ <a class="header-anchor" href="#æ–°å¢çš„æƒ…å†µ" aria-label="Permalink to &quot;æ–°å¢çš„æƒ…å†µ&quot;">â€‹</a></h5><p><img src="'+O+'" alt="image-20240304002602954"></p><p><img src="'+T+'" alt="image-20240304002709171"></p><h5 id="åˆ é™¤çš„æƒ…å†µ" tabindex="-1">åˆ é™¤çš„æƒ…å†µ <a class="header-anchor" href="#åˆ é™¤çš„æƒ…å†µ" aria-label="Permalink to &quot;åˆ é™¤çš„æƒ…å†µ&quot;">â€‹</a></h5><p><img src="'+M+'" alt="image-20240304002737168"></p><h5 id="å¤šåˆ é™¤çš„æƒ…å†µ" tabindex="-1">å¤šåˆ é™¤çš„æƒ…å†µ <a class="header-anchor" href="#å¤šåˆ é™¤çš„æƒ…å†µ" aria-label="Permalink to &quot;å¤šåˆ é™¤çš„æƒ…å†µ&quot;">â€‹</a></h5><p><img src="'+N+'" alt="image-20240304002759285"></p><h5 id="å¤æ‚çš„æƒ…å†µ" tabindex="-1">å¤æ‚çš„æƒ…å†µ <a class="header-anchor" href="#å¤æ‚çš„æƒ…å†µ" aria-label="Permalink to &quot;å¤æ‚çš„æƒ…å†µ&quot;">â€‹</a></h5><p><img src="'+I+'" alt="image-20240304002824645"></p><p><img src="'+L+`" alt="image-20240304002842533"></p><h3 id="_6-æ‰‹å†™å®ç°è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" tabindex="-1">6.æ‰‹å†™å®ç°è™šæ‹Ÿ DOM å’Œ diff ç®—æ³•ğŸ…°ï¸ <a class="header-anchor" href="#_6-æ‰‹å†™å®ç°è™šæ‹Ÿ-dom-å’Œ-diff-ç®—æ³•" aria-label="Permalink to &quot;6.æ‰‹å†™å®ç°è™šæ‹Ÿ DOM å’Œ diff ç®—æ³•:a:&quot;">â€‹</a></h3><p>åŸºäºä¸Šé¢çš„åˆ›å»ºçš„ study-snabbdom é¡¹ç›®ï¼Œæ‰‹å†™å®ç° snabbdom</p><h4 id="_6-1-è°ƒè¯•ä»£ç " tabindex="-1">6.1 è°ƒè¯•ä»£ç  <a class="header-anchor" href="#_6-1-è°ƒè¯•ä»£ç " aria-label="Permalink to &quot;6.1 è°ƒè¯•ä»£ç &quot;">â€‹</a></h4><h5 id="src-index-js-1" tabindex="-1">src/index.js <a class="header-anchor" href="#src-index-js-1" aria-label="Permalink to &quot;src/index.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> h</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./mysnabbdom/h.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> patch</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./mysnabbdom/patch.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> myVnode1</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, {}, [</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;E&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;E&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¾—åˆ°ç›’å­å’ŒæŒ‰é’®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> container</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> btn</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;btn&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç¬¬ä¸€æ¬¡ä¸Šæ ‘</span></span>
<span class="line"><span style="color:#61AFEF;">patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">container</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">myVnode1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ–°èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> myVnode2</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ul&quot;</span><span style="color:#ABB2BF;">, {}, [</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Q&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;Q&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;T&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;T&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Z&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;Z&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#61AFEF;">	h</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;li&quot;</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;E&quot;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#98C379;">&quot;E&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">btn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onclick</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">	patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">myVnode1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">myVnode2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="_6-2-src-mysnabbdom-ç›®å½•-è‡ªå·±å®ç°çš„-snabbdom" tabindex="-1">6.2 ğŸ…±ï¸src/mysnabbdom ç›®å½•ï¼šè‡ªå·±å®ç°çš„ snabbdom <a class="header-anchor" href="#_6-2-src-mysnabbdom-ç›®å½•-è‡ªå·±å®ç°çš„-snabbdom" aria-label="Permalink to &quot;6.2 :b:src/mysnabbdom ç›®å½•ï¼šè‡ªå·±å®ç°çš„ snabbdom&quot;">â€‹</a></h4><p>snabbdom çš„æºç æ˜¯ ts å†™çš„ï¼š<a href="https://github.com/snabbdom/snabbdom%EF%BC%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E4%BB%BF%E5%86%99js%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%8F%AA%E8%A6%81%E4%B8%BB%E5%B9%B2%E5%8A%9F%E8%83%BD" target="_blank" rel="noreferrer">https://github.com/snabbdom/snabbdomï¼Œæˆ‘ä»¬éœ€è¦ä»¿å†™jsä»£ç ï¼Œåªè¦ä¸»å¹²åŠŸèƒ½</a></p><h5 id="src-mysnabbdom-vnode-js" tabindex="-1">src/mysnabbdom/vnode.js <a class="header-anchor" href="#src-mysnabbdom-vnode-js" aria-label="Permalink to &quot;src/mysnabbdom/vnode.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// å‡½æ•°çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œå°±æ˜¯æŠŠä¼ å…¥çš„5ä¸ªå‚æ•°ç»„åˆæˆå¯¹è±¡è¿”å›</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">sel</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">children</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">text</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">elm</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> key</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		sel</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		data</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		children</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		text</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		elm</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		key</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="src-mysnabbdom-h-js-åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹" tabindex="-1">src/mysnabbdom/h.jsï¼šåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ <a class="header-anchor" href="#src-mysnabbdom-h-js-åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹" aria-label="Permalink to &quot;src/mysnabbdom/h.jsï¼šåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> vnode</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./vnode.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç¼–å†™ä¸€ä¸ªä½é…ç‰ˆæœ¬çš„hå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥å—3ä¸ªå‚æ•°ï¼Œç¼ºä¸€ä¸å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›¸å½“äºå®ƒçš„é‡è½½åŠŸèƒ½è¾ƒå¼±ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨çš„æ—¶å€™å½¢æ€å¿…é¡»æ˜¯ä¸‹é¢çš„ä¸‰ç§ä¹‹ä¸€ï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// â€”â€”å½¢æ€â‘ ï¼šh(&#39;div&#39;, {}, &#39;æ–‡å­—&#39;)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// â€”â€”å½¢æ€â‘¡ï¼šh(&#39;div&#39;, {}, [])</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// â€”â€”å½¢æ€â‘¢ï¼šh(&#39;div&#39;, {}, h())</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">sel</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">c</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ£€æŸ¥å‚æ•°çš„ä¸ªæ•°</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">		throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å¯¹ä¸èµ·ï¼Œhå‡½æ•°å¿…é¡»ä¼ å…¥3ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬æ˜¯ä½é…ç‰ˆhå‡½æ•°&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ£€æŸ¥å‚æ•°cçš„ç±»å‹</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;string&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¯´æ˜ç°åœ¨è°ƒç”¨hå‡½æ•°æ˜¯å½¢æ€â‘ </span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> vnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sel</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¯´æ˜ç°åœ¨è°ƒç”¨hå‡½æ•°æ˜¯å½¢æ€â‘¡</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> children</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// éå†cï¼Œæ”¶é›†children</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ£€æŸ¥c[i]å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸æ»¡è¶³</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> c</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sel&quot;</span><span style="color:#ABB2BF;">)))</span></span>
<span class="line"><span style="color:#C678DD;">				throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä¼ å…¥çš„æ•°ç»„å‚æ•°ä¸­æœ‰é¡¹ä¸æ˜¯hå‡½æ•°&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¿™é‡Œä¸ç”¨æ‰§è¡Œc[i]ï¼Œå› ä¸ºä½ çš„æµ‹è¯•è¯­å¥ä¸­å·²ç»æœ‰äº†æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ­¤æ—¶åªéœ€è¦æ”¶é›†å¥½å°±å¯ä»¥äº†</span></span>
<span class="line"><span style="color:#E5C07B;">			children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¾ªç¯ç»“æŸäº†ï¼Œå°±è¯´æ˜childrenæ”¶é›†å®Œæ¯•äº†ï¼Œæ­¤æ—¶å¯ä»¥è¿”å›è™šæ‹ŸèŠ‚ç‚¹äº†ï¼Œå®ƒæœ‰childrenå±æ€§çš„</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> vnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sel</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> c</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> c</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sel&quot;</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¯´æ˜ç°åœ¨è°ƒç”¨hå‡½æ•°æ˜¯å½¢æ€â‘¢</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å³ï¼Œä¼ å…¥çš„cæ˜¯å”¯ä¸€çš„childrenã€‚ä¸ç”¨æ‰§è¡Œcï¼Œå› ä¸ºæµ‹è¯•è¯­å¥ä¸­å·²ç»æ‰§è¡Œäº†cã€‚</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> children</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> vnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sel</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">undefined</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä¼ å…¥çš„ç¬¬ä¸‰ä¸ªå‚æ•°ç±»å‹ä¸å¯¹&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h5 id="src-mysnabbdom-patch-js-è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Š-dom-æ ‘" tabindex="-1">src/mysnabbdom/patch.jsï¼šè®©è™šæ‹ŸèŠ‚ç‚¹ä¸Š dom æ ‘ <a class="header-anchor" href="#src-mysnabbdom-patch-js-è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Š-dom-æ ‘" aria-label="Permalink to &quot;src/mysnabbdom/patch.jsï¼šè®©è™šæ‹ŸèŠ‚ç‚¹ä¸Š dom æ ‘&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> vnode</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./vnode.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> createElement</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./createElement.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> patchVnode</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./patchVnode.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> patch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">oldVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newVnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯DOMèŠ‚ç‚¹è¿˜æ˜¯è™šæ‹ŸèŠ‚ç‚¹ï¼Ÿ</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯DOMèŠ‚ç‚¹ï¼Œæ­¤æ—¶è¦åŒ…è£…ä¸ºè™šæ‹ŸèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#E06C75;">		oldVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> vnode</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E5C07B;">			oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tagName</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toLowerCase</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">			{},</span></span>
<span class="line"><span style="color:#ABB2BF;">			[],</span></span>
<span class="line"><span style="color:#D19A66;">			undefined</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			oldVnode</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­oldVnodeå’ŒnewVnodeæ˜¯ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">		patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œæš´åŠ›æ’å…¥æ–°çš„ï¼Œåˆ é™¤æ—§çš„&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ ¹æ®è™šæ‹ŸDOMèŠ‚ç‚¹åˆ›å»ºçœŸå®çš„DOMèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> newVnodeElm</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ’å…¥åˆ°è€èŠ‚ç‚¹ä¹‹å‰</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">parentNode</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> newVnodeElm</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">parentNode</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newVnodeElm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åˆ é™¤è€èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#E5C07B;">		oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">parentNode</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h5 id="src-mysnabbdom-createelement-js-å°†-vnode-è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºä¸ºçœŸå®-dom-èŠ‚ç‚¹" tabindex="-1">src/mysnabbdom/createElement.jsï¼šå°† vnode è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºä¸ºçœŸå® DOM èŠ‚ç‚¹ <a class="header-anchor" href="#src-mysnabbdom-createelement-js-å°†-vnode-è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºä¸ºçœŸå®-dom-èŠ‚ç‚¹" aria-label="Permalink to &quot;src/mysnabbdom/createElement.jsï¼šå°† vnode è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºä¸ºçœŸå® DOM èŠ‚ç‚¹&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// çœŸæ­£åˆ›å»ºèŠ‚ç‚¹ï¼šå°†vnodeåˆ›å»ºä¸ºDOMï¼Œæ˜¯å­¤å„¿èŠ‚ç‚¹ï¼Œä¸è¿›è¡Œæ’å…¥</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">vnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// console.log(&#39;ç›®çš„æ˜¯æŠŠè™šæ‹ŸèŠ‚ç‚¹&#39;, vnode, &#39;çœŸæ­£å˜ä¸ºDOM&#39;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ›å»ºä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹ç°åœ¨è¿˜æ˜¯å­¤å„¿èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> domNode</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æœ‰å­èŠ‚ç‚¹è¿˜æ˜¯æœ‰æ–‡æœ¬ï¼Ÿï¼Ÿ</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#E5C07B;">		vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#56B6C2;"> !=</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span></span>
<span class="line"><span style="color:#ABB2BF;">		(</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å®ƒå†…éƒ¨æ˜¯æ–‡å­—</span></span>
<span class="line"><span style="color:#E5C07B;">		domNode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å®ƒå†…éƒ¨æ˜¯å­èŠ‚ç‚¹ï¼Œå°±è¦é€’å½’åˆ›å»ºèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¾—åˆ°å½“å‰è¿™ä¸ªchildren</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> ch</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ›å»ºå‡ºå®ƒçš„DOMï¼Œä¸€æ—¦è°ƒç”¨createElementæ„å‘³ç€ï¼šåˆ›å»ºå‡ºDOMäº†ï¼Œå¹¶ä¸”å®ƒçš„elmå±æ€§æŒ‡å‘äº†åˆ›å»ºå‡ºçš„DOMï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ä¸Šæ ‘ï¼Œæ˜¯ä¸€ä¸ªå­¤å„¿èŠ‚ç‚¹ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> chDOM</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ch</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ä¸Šæ ‘</span></span>
<span class="line"><span style="color:#E5C07B;">			domNode</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">chDOM</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¡¥å……elmå±æ€§</span></span>
<span class="line"><span style="color:#E5C07B;">	vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> domNode</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// è¿”å›elmï¼Œelmå±æ€§æ˜¯ä¸€ä¸ªçº¯DOMå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> vnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h5 id="src-mysnabbdom-patchvnode-js-åŒä¸€è™šæ‹Ÿ-dom-çš„æ–°è€èŠ‚ç‚¹å¯¹æ¯”" tabindex="-1">src/mysnabbdom/patchVnode.jsï¼šåŒä¸€è™šæ‹Ÿ DOM çš„æ–°è€èŠ‚ç‚¹å¯¹æ¯” <a class="header-anchor" href="#src-mysnabbdom-patchvnode-js-åŒä¸€è™šæ‹Ÿ-dom-çš„æ–°è€èŠ‚ç‚¹å¯¹æ¯”" aria-label="Permalink to &quot;src/mysnabbdom/patchVnode.jsï¼šåŒä¸€è™šæ‹Ÿ DOM çš„æ–°è€èŠ‚ç‚¹å¯¹æ¯”&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> createElement</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./createElement&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> updateChildren</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./updateChildren.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¯¹æ¯”åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">oldVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newVnode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ–°æ—§vnodeæ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldVnode</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> newVnode</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// åˆ¤æ–­æ–°vnodeæœ‰æ²¡æœ‰textå±æ€§</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#E5C07B;">		newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> &amp;&amp;</span></span>
<span class="line"><span style="color:#ABB2BF;">		(</span><span style="color:#E5C07B;">newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> ||</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ–°vnodeæœ‰textå±æ€§</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ–°vnodeæœ‰textå±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#56B6C2;"> !=</span><span style="color:#E5C07B;"> oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ–°è™šæ‹ŸèŠ‚ç‚¹ä¸­çš„textå’Œè€çš„è™šæ‹ŸèŠ‚ç‚¹çš„textä¸åŒï¼Œé‚£ä¹ˆç›´æ¥è®©æ–°çš„textå†™å…¥è€çš„elmä¸­å³å¯ã€‚å¦‚æœè€çš„elmä¸­æ˜¯childrenï¼Œé‚£ä¹ˆä¹Ÿä¼šç«‹å³æ¶ˆå¤±æ‰ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">			oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerText</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ–°vnodeæ²¡æœ‰textå±æ€§ï¼Œæœ‰children</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ–°vnodeæ²¡æœ‰textå±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åˆ¤æ–­è€çš„æœ‰æ²¡æœ‰children</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> undefined</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è€çš„æœ‰childrenï¼Œæ–°çš„ä¹Ÿæœ‰childrenï¼Œæ­¤æ—¶å°±æ˜¯æœ€å¤æ‚çš„æƒ…å†µã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">			updateChildren</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è€çš„æ²¡æœ‰childrenï¼Œæ–°çš„æœ‰children</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ¸…ç©ºè€çš„èŠ‚ç‚¹çš„å†…å®¹</span></span>
<span class="line"><span style="color:#E5C07B;">			oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// éå†æ–°çš„vnodeçš„å­èŠ‚ç‚¹ï¼Œåˆ›å»ºDOMï¼Œä¸Šæ ‘</span></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> dom</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">newVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E5C07B;">				oldVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">dom</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h5 id="src-mysnabbdom-updatechildren-js-diff-å¯¹æ¯”åæ›´æ–°å­-dom-èŠ‚ç‚¹" tabindex="-1">src/mysnabbdom/updateChildren.jsï¼šdiff å¯¹æ¯”åæ›´æ–°å­ DOM èŠ‚ç‚¹ <a class="header-anchor" href="#src-mysnabbdom-updatechildren-js-diff-å¯¹æ¯”åæ›´æ–°å­-dom-èŠ‚ç‚¹" aria-label="Permalink to &quot;src/mysnabbdom/updateChildren.jsï¼šdiff å¯¹æ¯”åæ›´æ–°å­ DOM èŠ‚ç‚¹&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> patchVnode</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./patchVnode.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> createElement</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./createElement.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> checkSameVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sel</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> a</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;"> ==</span><span style="color:#E5C07B;"> b</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> updateChildren</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">parentElm</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldCh</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">newCh</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æˆ‘æ˜¯updateChildren&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldCh</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newCh</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ—§å‰</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> oldStartIdx</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–°å‰</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newStartIdx</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ—§å</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> oldEndIdx</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> oldCh</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–°å</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newEndIdx</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> newCh</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ—§å‰èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> oldStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ—§åèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> oldEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">oldEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–°å‰èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–°åèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> newEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">newEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> keyMap</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¼€å§‹å¤§whileäº†</span></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> oldEndIdx</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E06C75;"> newStartIdx</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> newEndIdx</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â˜…&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é¦–å…ˆä¸æ˜¯åˆ¤æ–­â‘ â‘¡â‘¢â‘£å‘½ä¸­ï¼Œè€Œæ˜¯è¦ç•¥è¿‡å·²ç»åŠ undefinedæ ‡è®°çš„ä¸œè¥¿</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldStartVnode</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> null</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			oldStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldEndVnode</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> null</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">oldEndIdx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			oldEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">oldEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">newStartVnode</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> null</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			newStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">newEndVnode</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> null</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">newEndIdx</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			newEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">newEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">checkSameVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldStartVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ–°å‰å’Œæ—§å‰</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â‘ æ–°å‰å’Œæ—§å‰å‘½ä¸­&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">			patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldStartVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			oldStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">			newStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">checkSameVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldEndVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newEndVnode</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ–°åå’Œæ—§å</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â‘¡æ–°åå’Œæ—§åå‘½ä¸­&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">			patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldEndVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newEndVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			oldEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">oldEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">			newEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">newEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">checkSameVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldStartVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newEndVnode</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ–°åå’Œæ—§å‰</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â‘¢æ–°åå’Œæ—§å‰å‘½ä¸­&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">			patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldStartVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newEndVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“â‘¢æ–°åä¸æ—§å‰å‘½ä¸­çš„æ—¶å€™ï¼Œæ­¤æ—¶è¦ç§»åŠ¨èŠ‚ç‚¹ã€‚ç§»åŠ¨æ–°å‰æŒ‡å‘çš„è¿™ä¸ªèŠ‚ç‚¹åˆ°è€èŠ‚ç‚¹çš„æ—§åçš„åé¢</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚ä½•ç§»åŠ¨èŠ‚ç‚¹ï¼Ÿï¼Ÿåªè¦ä½ æ’å…¥ä¸€ä¸ªå·²ç»åœ¨DOMæ ‘ä¸Šçš„èŠ‚ç‚¹ï¼Œå®ƒå°±ä¼šè¢«ç§»åŠ¨</span></span>
<span class="line"><span style="color:#E5C07B;">			parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">oldStartVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">oldEndVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">elm</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">nextSibling</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">			oldStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">			newEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">newEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#61AFEF;">checkSameVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldEndVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ–°å‰å’Œæ—§å</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â‘£æ–°å‰å’Œæ—§åå‘½ä¸­&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">			patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldEndVnode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“â‘£æ–°å‰å’Œæ—§åå‘½ä¸­çš„æ—¶å€™ï¼Œæ­¤æ—¶è¦ç§»åŠ¨èŠ‚ç‚¹ã€‚ç§»åŠ¨æ–°å‰æŒ‡å‘çš„è¿™ä¸ªèŠ‚ç‚¹åˆ°è€èŠ‚ç‚¹çš„æ—§å‰çš„å‰é¢</span></span>
<span class="line"><span style="color:#E5C07B;">			parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">oldEndVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">oldStartVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚ä½•ç§»åŠ¨èŠ‚ç‚¹ï¼Ÿï¼Ÿåªè¦ä½ æ’å…¥ä¸€ä¸ªå·²ç»åœ¨DOMæ ‘ä¸Šçš„èŠ‚ç‚¹ï¼Œå®ƒå°±ä¼šè¢«ç§»åŠ¨</span></span>
<span class="line"><span style="color:#E06C75;">			oldEndVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">--</span><span style="color:#E06C75;">oldEndIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">			newStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å››ç§å‘½ä¸­éƒ½æ²¡æœ‰å‘½ä¸­</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ¶ä½œkeyMapä¸€ä¸ªæ˜ å°„å¯¹è±¡ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½éå†è€å¯¹è±¡äº†ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">keyMap</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				keyMap</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ä»oldStartIdxå¼€å§‹ï¼Œåˆ°oldEndIdxç»“æŸï¼Œåˆ›å»ºkeyMapæ˜ å°„å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">				for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldStartIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> oldEndIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">					const</span><span style="color:#E5C07B;"> key</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">key</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">						keyMap</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">keyMap</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¯»æ‰¾å½“å‰è¿™é¡¹ï¼ˆnewStartIdxï¼‰è¿™é¡¹åœ¨keyMapä¸­çš„æ˜ å°„çš„ä½ç½®åºå·</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> idxInOld</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> keyMap</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">newStartVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">idxInOld</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">idxInOld</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ¤æ–­ï¼Œå¦‚æœidxInOldæ˜¯undefinedè¡¨ç¤ºå®ƒæ˜¯å…¨æ–°çš„é¡¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// è¢«åŠ å…¥çš„é¡¹ï¼ˆå°±æ˜¯newStartVnodeè¿™é¡¹)ç°ä¸æ˜¯çœŸæ­£çš„DOMèŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#E5C07B;">				parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">), </span><span style="color:#E5C07B;">oldStartVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å¦‚æœä¸æ˜¯undefinedï¼Œä¸æ˜¯å…¨æ–°çš„é¡¹ï¼Œè€Œæ˜¯è¦ç§»åŠ¨</span></span>
<span class="line"><span style="color:#C678DD;">				const</span><span style="color:#E5C07B;"> elmToMove</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">idxInOld</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#61AFEF;">				patchVnode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">elmToMove</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newStartVnode</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æŠŠè¿™é¡¹è®¾ç½®ä¸ºundefinedï¼Œè¡¨ç¤ºæˆ‘å·²ç»å¤„ç†å®Œè¿™é¡¹äº†</span></span>
<span class="line"><span style="color:#E06C75;">				oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">idxInOld</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ç§»åŠ¨ï¼Œè°ƒç”¨insertBeforeä¹Ÿå¯ä»¥å®ç°ç§»åŠ¨ã€‚</span></span>
<span class="line"><span style="color:#E5C07B;">				parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">elmToMove</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">oldStartVnode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡é’ˆä¸‹ç§»ï¼Œåªç§»åŠ¨æ–°çš„å¤´</span></span>
<span class="line"><span style="color:#E06C75;">			newStartVnode</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#56B6C2;">++</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»§ç»­çœ‹çœ‹æœ‰æ²¡æœ‰å‰©ä½™çš„ã€‚å¾ªç¯ç»“æŸäº†startè¿˜æ˜¯æ¯”oldå°</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">newStartIdx</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> newEndIdx</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">			&quot;newè¿˜æœ‰å‰©ä½™èŠ‚ç‚¹æ²¡æœ‰å¤„ç†ï¼Œè¦åŠ é¡¹ã€‚è¦æŠŠæ‰€æœ‰å‰©ä½™çš„èŠ‚ç‚¹ï¼Œéƒ½è¦æ’å…¥åˆ°oldStartIdxä¹‹å‰&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// éå†æ–°çš„newChï¼Œæ·»åŠ åˆ°è€çš„æ²¡æœ‰å¤„ç†çš„ä¹‹å‰</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newStartIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> newEndIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// insertBeforeæ–¹æ³•å¯ä»¥è‡ªåŠ¨è¯†åˆ«nullï¼Œå¦‚æœæ˜¯nullå°±ä¼šè‡ªåŠ¨æ’åˆ°é˜Ÿå°¾å»ã€‚å’ŒappendChildæ˜¯ä¸€è‡´äº†ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// newCh[i]ç°åœ¨è¿˜æ²¡æœ‰çœŸæ­£çš„DOMï¼Œæ‰€ä»¥è¦è°ƒç”¨createElement()å‡½æ•°å˜ä¸ºDOM</span></span>
<span class="line"><span style="color:#E5C07B;">			parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insertBefore</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">createElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]), </span><span style="color:#E06C75;">oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldStartIdx</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> oldEndIdx</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;oldè¿˜æœ‰å‰©ä½™èŠ‚ç‚¹æ²¡æœ‰å¤„ç†ï¼Œè¦åˆ é™¤é¡¹&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰¹é‡åˆ é™¤oldStartå’ŒoldEndæŒ‡é’ˆä¹‹é—´çš„é¡¹</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> oldStartIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E06C75;"> oldEndIdx</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#E5C07B;">				parentElm</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldCh</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">elm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br></div></div><h2 id="ä¸‰ã€æ•°æ®å“åº”å¼åŸç†-æ•°æ®å˜åŒ–ä¾¦æµ‹" tabindex="-1">ä¸‰ã€æ•°æ®å“åº”å¼åŸç†(æ•°æ®å˜åŒ–ä¾¦æµ‹) <a class="header-anchor" href="#ä¸‰ã€æ•°æ®å“åº”å¼åŸç†-æ•°æ®å˜åŒ–ä¾¦æµ‹" aria-label="Permalink to &quot;ä¸‰ã€æ•°æ®å“åº”å¼åŸç†(æ•°æ®å˜åŒ–ä¾¦æµ‹)&quot;">â€‹</a></h2><p>å½»åº•å¼„æ‡‚ Vue2 çš„æ•°æ®æ›´æ–°åŸç†ï¼Œæ‰‹å†™ç›¸å…³å®ç°ä»£ç ï¼Œå®˜æ–¹åŸç†å›¾ï¼š</p><p><img src="`+R+'" alt="image-20240304032556845"></p><h3 id="_1-ä»-mvvm-æ¨¡å¼å¼€å§‹" tabindex="-1">1.ä» MVVM æ¨¡å¼å¼€å§‹ <a class="header-anchor" href="#_1-ä»-mvvm-æ¨¡å¼å¼€å§‹" aria-label="Permalink to &quot;1.ä» MVVM æ¨¡å¼å¼€å§‹&quot;">â€‹</a></h3><p><img src="'+W+'" alt="image-20240304032630350"></p><h3 id="_2-ä¾µå…¥å¼å’Œéä¾µå…¥å¼" tabindex="-1">2.ä¾µå…¥å¼å’Œéä¾µå…¥å¼ <a class="header-anchor" href="#_2-ä¾µå…¥å¼å’Œéä¾µå…¥å¼" aria-label="Permalink to &quot;2.ä¾µå…¥å¼å’Œéä¾µå…¥å¼&quot;">â€‹</a></h3><p><img src="'+$+`" alt="image-20240304032654767"></p><h3 id="_3-æ•°æ®çš„åŠ«æŒå’Œä»£ç†æ–¹æ³•-object-defineproperty" tabindex="-1">3.æ•°æ®çš„åŠ«æŒå’Œä»£ç†æ–¹æ³•ï¼šObject.defineProperty() <a class="header-anchor" href="#_3-æ•°æ®çš„åŠ«æŒå’Œä»£ç†æ–¹æ³•-object-defineproperty" aria-label="Permalink to &quot;3.æ•°æ®çš„åŠ«æŒå’Œä»£ç†æ–¹æ³•ï¼šObject.defineProperty()&quot;">â€‹</a></h3><p>åˆ©ç”¨ JavaScript å¼•æ“èµ‹äºˆçš„åŠŸèƒ½æ–¹æ³•ï¼šObject.defineProperty()ï¼Œæ£€æµ‹å¯¹è±¡å±æ€§å˜åŒ–ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noreferrer">Object.defineProperty() - JavaScript | MDN (mozilla.org)</a></p><p>Object.defineProperty()æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;b&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Object.defineProperty()æ–¹æ³•å¯ä»¥è®¾ç½®ä¸€äº›é¢å¤–éšè—çš„å±æ€§ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ˜¯å¦å¯å†™</span></span>
<span class="line"><span style="color:#E06C75;">	writable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;b&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">	value</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ˜¯å¦å¯ä»¥è¢«æšä¸¾</span></span>
<span class="line"><span style="color:#E06C75;">	enumerable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="getter-setter" tabindex="-1">getter/setter <a class="header-anchor" href="#getter-setter" aria-label="Permalink to &quot;getter/setter&quot;">â€‹</a></h4><p>çœ‹ MDN æ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noreferrer">Object.defineProperty() - JavaScript | MDN (mozilla.org)</a></p><p><img src="`+U+`" alt="image-20240304033127556"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// getter</span></span>
<span class="line"><span style="color:#61AFEF;">	get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾è®¿é—®objçš„aå±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// setter</span></span>
<span class="line"><span style="color:#61AFEF;">	set</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾æ”¹å˜objçš„aå±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¿™é‡Œæœ‰ä¸€ä¸ªå°å‘ï¼šéœ€è¦ç”¨é—­åŒ…å­˜å‚¨ get å’Œ set çš„å€¼</p><h4 id="definereactive-é—­åŒ…å‡½æ•°" tabindex="-1">defineReactive é—­åŒ…å‡½æ•° <a class="header-anchor" href="#definereactive-é—­åŒ…å‡½æ•°" aria-label="Permalink to &quot;defineReactive é—­åŒ…å‡½æ•°&quot;">â€‹</a></h4><h5 id="getter-setter-éœ€è¦å˜é‡å‘¨è½¬æ‰èƒ½å·¥ä½œ" tabindex="-1">getter/setter éœ€è¦å˜é‡å‘¨è½¬æ‰èƒ½å·¥ä½œ <a class="header-anchor" href="#getter-setter-éœ€è¦å˜é‡å‘¨è½¬æ‰èƒ½å·¥ä½œ" aria-label="Permalink to &quot;getter/setter éœ€è¦å˜é‡å‘¨è½¬æ‰èƒ½å·¥ä½œ&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰å¤–éƒ¨çš„å˜é‡ä½œä¸ºå‘¨è½¬</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// getter</span></span>
<span class="line"><span style="color:#61AFEF;">	get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾è®¿é—®objçš„aå±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> temp</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// setter</span></span>
<span class="line"><span style="color:#61AFEF;">	set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾æ”¹å˜objçš„aå±æ€§&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">		temp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newValue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 9</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="ä½¿ç”¨-definereactive-å‡½æ•°ä¸éœ€è¦è®¾ç½®ä¸´æ—¶å˜é‡äº†-è€Œæ˜¯ç”¨é—­åŒ…" tabindex="-1">ä½¿ç”¨ defineReactive å‡½æ•°ä¸éœ€è¦è®¾ç½®ä¸´æ—¶å˜é‡äº†ï¼Œè€Œæ˜¯ç”¨é—­åŒ… <a class="header-anchor" href="#ä½¿ç”¨-definereactive-å‡½æ•°ä¸éœ€è¦è®¾ç½®ä¸´æ—¶å˜é‡äº†-è€Œæ˜¯ç”¨é—­åŒ…" aria-label="Permalink to &quot;ä½¿ç”¨ defineReactive å‡½æ•°ä¸éœ€è¦è®¾ç½®ä¸´æ—¶å˜é‡äº†ï¼Œè€Œæ˜¯ç”¨é—­åŒ…&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¯æšä¸¾</span></span>
<span class="line"><span style="color:#E06C75;">		enumerable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¯ä»¥è¢«é…ç½®ï¼Œæ¯”å¦‚å¯ä»¥è¢«delete</span></span>
<span class="line"><span style="color:#E06C75;">		configurable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// getter</span></span>
<span class="line"><span style="color:#61AFEF;">		get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾è®¿é—®objçš„&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> key</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;å±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// val å‚æ•°å½“åšä¸Šé¢å¤–éƒ¨çš„ä¸´æ—¶å˜é‡</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// setter</span></span>
<span class="line"><span style="color:#61AFEF;">		set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾æ”¹å˜objçš„&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> key</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;å±æ€§&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// val å‚æ•°å½“åšä¸Šé¢å¤–éƒ¨çš„ä¸´æ—¶å˜é‡</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newValue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#61AFEF;">defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 29</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 30</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="_4-é€’å½’ä¾¦æµ‹å¯¹è±¡å…¨éƒ¨å±æ€§" tabindex="-1">4.é€’å½’ä¾¦æµ‹å¯¹è±¡å…¨éƒ¨å±æ€§ <a class="header-anchor" href="#_4-é€’å½’ä¾¦æµ‹å¯¹è±¡å…¨éƒ¨å±æ€§" aria-label="Permalink to &quot;4.é€’å½’ä¾¦æµ‹å¯¹è±¡å…¨éƒ¨å±æ€§&quot;">â€‹</a></h3><p>Observerï¼šè§‚å¯Ÿç±»</p><p><img src="`+Y+'" alt="image-20240304033458856"></p><h3 id="_5-æ•°ç»„çš„å“åº”å¼å¤„ç†" tabindex="-1">5.æ•°ç»„çš„å“åº”å¼å¤„ç† <a class="header-anchor" href="#_5-æ•°ç»„çš„å“åº”å¼å¤„ç†" aria-label="Permalink to &quot;5.æ•°ç»„çš„å“åº”å¼å¤„ç†&quot;">â€‹</a></h3><h4 id="vue-åº•å±‚æ”¹å†™äº†æ•°ç»„åŸç”Ÿçš„ä¸ƒä¸ªæ–¹æ³•" tabindex="-1">Vue åº•å±‚æ”¹å†™äº†æ•°ç»„åŸç”Ÿçš„ä¸ƒä¸ªæ–¹æ³• <a class="header-anchor" href="#vue-åº•å±‚æ”¹å†™äº†æ•°ç»„åŸç”Ÿçš„ä¸ƒä¸ªæ–¹æ³•" aria-label="Permalink to &quot;Vue åº•å±‚æ”¹å†™äº†æ•°ç»„åŸç”Ÿçš„ä¸ƒä¸ªæ–¹æ³•&quot;">â€‹</a></h4><p><img src="'+J+'" alt="image-20240304033555946"></p><h3 id="_6-ä¾èµ–æ”¶é›†" tabindex="-1">6.ä¾èµ–æ”¶é›† <a class="header-anchor" href="#_6-ä¾èµ–æ”¶é›†" aria-label="Permalink to &quot;6.ä¾èµ–æ”¶é›†&quot;">â€‹</a></h3><h4 id="ä»€ä¹ˆæ˜¯ä¾èµ–" tabindex="-1">ä»€ä¹ˆæ˜¯ä¾èµ–ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯ä¾èµ–" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ä¾èµ–ï¼Ÿ&quot;">â€‹</a></h4><ul><li>éœ€è¦ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç§°ä¸ºä¾èµ–</li><li>Vue1.xï¼Œç»†ç²’åº¦ä¾èµ–ï¼Œç”¨åˆ°æ•°æ®çš„ DOM éƒ½æ˜¯ä¾èµ–ï¼›</li><li>Vue2.xï¼Œä¸­ç­‰ç²’åº¦ä¾èµ–ï¼Œç”¨åˆ°æ•°æ®çš„ç»„ä»¶æ˜¯ä¾èµ–ï¼›</li><li>åœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–</li></ul><h4 id="dep-ç±»å’Œ-watcher-ç±»" tabindex="-1">Dep ç±»å’Œ Watcher ç±» <a class="header-anchor" href="#dep-ç±»å’Œ-watcher-ç±»" aria-label="Permalink to &quot;Dep ç±»å’Œ Watcher ç±»&quot;">â€‹</a></h4><p>1.æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œå®ƒä¸“é—¨ç”¨æ¥ç®¡ç†ä¾èµ–ï¼Œ<strong>æ¯ä¸ª Observer çš„å®ä¾‹ï¼Œæˆå‘˜ä¸­éƒ½æœ‰ä¸€ä¸ª Dep çš„å®ä¾‹ï¼›</strong></p><p>2.Watcher æ˜¯ä¸€ä¸ªä¸­ä»‹ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šè¿‡ Watcher ä¸­è½¬ï¼Œé€šçŸ¥ç»„ä»¶ã€‚</p><p><img src="'+H+'" alt="image-20240304033702159"></p><ul><li>ä¾èµ–å°±æ˜¯ Watcherã€‚åªæœ‰ Watcher è§¦å‘çš„ getter æ‰ä¼šæ”¶é›†ä¾èµ–ï¼Œå“ªä¸ª Watcher è§¦å‘äº† getterï¼Œå°±æŠŠå“ªä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚</li><li>Dep ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚</li></ul><p>ä»£ç å®ç°çš„å·§å¦™ä¹‹å¤„ï¼šWatcher æŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€çš„ä¸€ä¸ªæŒ‡å®šä½ç½®ï¼Œç„¶åè¯»å–æ•°æ®ï¼Œå› ä¸ºè¯»å–äº†æ•°æ®ï¼Œæ‰€ä»¥ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getterã€‚åœ¨ getter ä¸­å°±èƒ½å¾—åˆ°å½“å‰æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚</p><p><img src="'+G+`" alt="image-20240304033757118"></p><h3 id="_7-æ ¹æ®-vue2-å“åº”å¼åŸç†æ‰‹å†™å®ç°å“åº”å¼ä»£ç " tabindex="-1">7.ğŸ…°ï¸æ ¹æ® Vue2 å“åº”å¼åŸç†æ‰‹å†™å®ç°å“åº”å¼ä»£ç  <a class="header-anchor" href="#_7-æ ¹æ®-vue2-å“åº”å¼åŸç†æ‰‹å†™å®ç°å“åº”å¼ä»£ç " aria-label="Permalink to &quot;7.:a:æ ¹æ® Vue2 å“åº”å¼åŸç†æ‰‹å†™å®ç°å“åº”å¼ä»£ç &quot;">â€‹</a></h3><p>é¡¹ç›®ä¾ç„¶æ˜¯ä½¿ç”¨ webpack æ‰“åŒ…çš„ã€‚</p><h4 id="_1-æ–°å»ºé¡¹ç›®ç›®å½•-study-data-reactive" tabindex="-1">1.æ–°å»ºé¡¹ç›®ç›®å½•ï¼šstudy-data-reactive <a class="header-anchor" href="#_1-æ–°å»ºé¡¹ç›®ç›®å½•-study-data-reactive" aria-label="Permalink to &quot;1.æ–°å»ºé¡¹ç›®ç›®å½•ï¼šstudy-data-reactive&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">srcï¼šæ‰‹å†™å®ç°çš„æºç ç›®å½•</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”array.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”defineReactive.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”Dep.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”index.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”observe.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”Observer.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”utils.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">__Watcher.js</span></span>
<span class="line"><span style="color:#61AFEF;">wwwï¼šå¯¼å…¥æ‰‹å†™æ‰“åŒ…è€Œæˆçš„bundle.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”index.html</span></span>
<span class="line"><span style="color:#61AFEF;">package.json</span></span>
<span class="line"><span style="color:#61AFEF;">webpack.config.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_2-æ‰‹å†™çš„å“åº”å¼ä»£ç " tabindex="-1">2.ğŸ…±ï¸æ‰‹å†™çš„å“åº”å¼ä»£ç  <a class="header-anchor" href="#_2-æ‰‹å†™çš„å“åº”å¼ä»£ç " aria-label="Permalink to &quot;2.:b:æ‰‹å†™çš„å“åº”å¼ä»£ç &quot;">â€‹</a></h4><p>www/index.html</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/xuni/bundle.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>package.json</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;study-snabbdom&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;dependencies&quot;</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.11.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>webpack.config.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ä»https://www.webpackjs.com/å®˜ç½‘ç…§ç€é…ç½®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;path&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å…¥å£</span></span>
<span class="line"><span style="color:#E06C75;">	entry</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;./src/index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡ºå£</span></span>
<span class="line"><span style="color:#E06C75;">	output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è™šæ‹Ÿæ‰“åŒ…è·¯å¾„ï¼Œå°±æ˜¯è¯´æ–‡ä»¶å¤¹ä¸ä¼šçœŸæ­£ç”Ÿæˆï¼Œè€Œæ˜¯åœ¨8080ç«¯å£è™šæ‹Ÿç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;xuni&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åï¼Œä¸ä¼šçœŸæ­£çš„ç‰©ç†ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		filename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bundle.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	devServer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç«¯å£å·</span></span>
<span class="line"><span style="color:#E06C75;">		port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#E06C75;">		contentBase</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;www&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>src/index.jsï¼šè°ƒç”¨æ‰‹å†™å®ç°çš„å“åº”å¼ç›¸å…³çš„æ–¹æ³•</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> observe</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./observe.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Watcher</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Watcher.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">	a</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		m</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			n</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	c</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		d</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			e</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">				f</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">6666</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			},</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	g</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">33</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">44</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">55</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">observe</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">new</span><span style="color:#61AFEF;"> Watcher</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;a.m.n&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;â˜…æˆ‘æ˜¯watcherï¼Œæˆ‘åœ¨ç›‘æ§a.m.n&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">m</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">n</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 88</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// obj.g.push(66);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="src-definereactive-js-é€šè¿‡é—­åŒ…å‡½æ•°ä½¿ç”¨-object-defineproperty" tabindex="-1">src/defineReactive.jsï¼šé€šè¿‡é—­åŒ…å‡½æ•°ä½¿ç”¨ Object.defineProperty() <a class="header-anchor" href="#src-definereactive-js-é€šè¿‡é—­åŒ…å‡½æ•°ä½¿ç”¨-object-defineproperty" aria-label="Permalink to &quot;src/defineReactive.jsï¼šé€šè¿‡é—­åŒ…å‡½æ•°ä½¿ç”¨ Object.defineProperty()&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> observe</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./observe.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Dep</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Dep.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> dep</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Dep</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// console.log(&#39;æˆ‘æ˜¯defineReactive&#39;, key);</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å­å…ƒç´ è¦è¿›è¡Œobserveï¼Œè‡³æ­¤å½¢æˆäº†é€’å½’ã€‚è¿™ä¸ªé€’å½’ä¸æ˜¯å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œè€Œæ˜¯å¤šä¸ªå‡½æ•°ã€ç±»å¾ªç¯è°ƒç”¨</span></span>
<span class="line"><span style="color:#C678DD;">	let</span><span style="color:#E06C75;"> childOb</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> observe</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">	Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¯æšä¸¾</span></span>
<span class="line"><span style="color:#E06C75;">		enumerable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¯ä»¥è¢«é…ç½®ï¼Œæ¯”å¦‚å¯ä»¥è¢«delete</span></span>
<span class="line"><span style="color:#E06C75;">		configurable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// getter</span></span>
<span class="line"><span style="color:#61AFEF;">		get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾è®¿é—®&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> key</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;å±æ€§&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœç°åœ¨å¤„äºä¾èµ–æ”¶é›†é˜¶æ®µ</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">depend</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">childOb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">					childOb</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">depend</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// setter</span></span>
<span class="line"><span style="color:#61AFEF;">		set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ä½ è¯•å›¾æ”¹å˜&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> key</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;å±æ€§&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">val</span><span style="color:#56B6C2;"> ===</span><span style="color:#E06C75;"> newValue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#E06C75;">			val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newValue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“è®¾ç½®äº†æ–°å€¼ï¼Œè¿™ä¸ªæ–°å€¼ä¹Ÿè¦è¢«observe</span></span>
<span class="line"><span style="color:#E06C75;">			childOb</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> observe</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œé€šçŸ¥dep</span></span>
<span class="line"><span style="color:#E5C07B;">			dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">notify</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h5 id="src-observe-js-è®©-observer-å·¥å…·ç±»åªä¸ºå¯¹è±¡æœåŠ¡" tabindex="-1">src/observe.jsï¼šè®© Observer å·¥å…·ç±»åªä¸ºå¯¹è±¡æœåŠ¡ <a class="header-anchor" href="#src-observe-js-è®©-observer-å·¥å…·ç±»åªä¸ºå¯¹è±¡æœåŠ¡" aria-label="Permalink to &quot;src/observe.jsï¼šè®© Observer å·¥å…·ç±»åªä¸ºå¯¹è±¡æœåŠ¡&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Observer</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Observer.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¦‚æœvalueä¸æ˜¯å¯¹è±¡ï¼Œä»€ä¹ˆéƒ½ä¸åš</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> value</span><span style="color:#56B6C2;"> !=</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®šä¹‰ob</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> ob</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E5C07B;"> value</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">__ob__</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &quot;undefined&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		ob</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> value</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">__ob__</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		ob</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Observer</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> ob</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="src-observer-js-å°†ä¸€ä¸ªæ­£å¸¸çš„-object-è½¬æ¢ä¸ºæ¯ä¸ªå±‚çº§çš„å±æ€§éƒ½æ˜¯å“åº”å¼-å¯ä»¥è¢«ä¾¦æµ‹çš„-çš„-object" tabindex="-1">src/Observer.jsï¼šå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢ä¸ºæ¯ä¸ªå±‚çº§çš„å±æ€§éƒ½æ˜¯å“åº”å¼(å¯ä»¥è¢«ä¾¦æµ‹çš„)çš„ object <a class="header-anchor" href="#src-observer-js-å°†ä¸€ä¸ªæ­£å¸¸çš„-object-è½¬æ¢ä¸ºæ¯ä¸ªå±‚çº§çš„å±æ€§éƒ½æ˜¯å“åº”å¼-å¯ä»¥è¢«ä¾¦æµ‹çš„-çš„-object" aria-label="Permalink to &quot;src/Observer.jsï¼šå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢ä¸ºæ¯ä¸ªå±‚çº§çš„å±æ€§éƒ½æ˜¯å“åº”å¼(å¯ä»¥è¢«ä¾¦æµ‹çš„)çš„ object&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">def</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./utils.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> defineReactive</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./defineReactive.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">arrayMethods</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./array.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> observe</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./observe.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Dep</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Dep.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Observer</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ¯ä¸€ä¸ªObserverçš„å®ä¾‹èº«ä¸Šï¼Œéƒ½æœ‰ä¸€ä¸ªdep</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dep</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Dep</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç»™å®ä¾‹ï¼ˆthisï¼Œä¸€å®šè¦æ³¨æ„ï¼Œæ„é€ å‡½æ•°ä¸­çš„thisä¸æ˜¯è¡¨ç¤ºç±»æœ¬èº«ï¼Œè€Œæ˜¯è¡¨ç¤ºå®ä¾‹ï¼‰æ·»åŠ äº†__ob__å±æ€§ï¼Œå€¼æ˜¯è¿™æ¬¡newçš„å®ä¾‹</span></span>
<span class="line"><span style="color:#61AFEF;">		def</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;__ob__&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(&#39;æˆ‘æ˜¯Observeræ„é€ å™¨&#39;, value);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ä¸è¦å¿˜è®°åˆå¿ƒï¼ŒObserverç±»çš„ç›®çš„æ˜¯ï¼šå°†ä¸€ä¸ªæ­£å¸¸çš„objectè½¬æ¢ä¸ºæ¯ä¸ªå±‚çº§çš„å±æ€§éƒ½æ˜¯å“åº”å¼ï¼ˆå¯ä»¥è¢«ä¾¦æµ‹çš„ï¼‰çš„object</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ£€æŸ¥å®ƒæ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ˜¯æ•°ç»„ï¼Œè¦éå¸¸å¼ºè¡Œçš„è›®å¹²ï¼šå°†è¿™ä¸ªæ•°ç»„çš„åŸå‹ï¼ŒæŒ‡å‘arrayMethods</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//ï¼ˆarrayMethodsåœ¨array.jsé‡Œï¼Œæ˜¯vue2åº•å±‚æ”¹å†™è¿‡çš„7ä¸ªæ•°ç»„çš„æ–¹æ³•ï¼‰</span></span>
<span class="line"><span style="color:#E5C07B;">			Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setPrototypeOf</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">arrayMethods</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è®©è¿™ä¸ªæ•°ç»„å˜çš„observe</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">observeArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">walk</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå†value,æŠŠvalueçš„æ¯ä¸€ä¸ªå€¼éƒ½è½¬ä¸ºå“åº”å¼çš„</span></span>
<span class="line"><span style="color:#61AFEF;">	walk</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> k</span><span style="color:#C678DD;"> in</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">			defineReactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ•°ç»„çš„ç‰¹æ®Šéå†</span></span>
<span class="line"><span style="color:#61AFEF;">	observeArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">l</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> arr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> l</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é€é¡¹è¿›è¡Œobserve</span></span>
<span class="line"><span style="color:#61AFEF;">			observe</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>ä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶çš„å…³ç³»ï¼šobserve.js å¼•ç”¨ =&gt; Observer.js å¼•ç”¨ =&gt; defineReactive.js å¼•ç”¨ =&gt; observe.js</p><p>å½¢æˆäº†ä¸€ä¸ªåœˆç›¸äº’ä¾èµ–å’Œå¼•ç”¨çš„å…³ç³»ã€‚</p><h5 id="src-utils-js-å®šä¹‰-object-defineproperty-çš„å±æ€§" tabindex="-1">src/utils.jsï¼šå®šä¹‰ Object.defineProperty()çš„å±æ€§ <a class="header-anchor" href="#src-utils-js-å®šä¹‰-object-defineproperty-çš„å±æ€§" aria-label="Permalink to &quot;src/utils.jsï¼šå®šä¹‰ Object.defineProperty()çš„å±æ€§&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#61AFEF;"> def</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">enumerable</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">		value</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		enumerable</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		writable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		configurable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="src-array-js-æ•°ç»„çš„å“åº”å¼å¤„ç†" tabindex="-1">src/array.jsï¼šæ•°ç»„çš„å“åº”å¼å¤„ç† <a class="header-anchor" href="#src-array-js-æ•°ç»„çš„å“åº”å¼å¤„ç†" aria-label="Permalink to &quot;src/array.jsï¼šæ•°ç»„çš„å“åº”å¼å¤„ç†&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">def</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./utils.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¾—åˆ°Array.prototype</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> arrayPrototype</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Array</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä»¥Array.prototypeä¸ºåŸå‹åˆ›å»ºarrayMethodså¯¹è±¡ï¼Œå¹¶æš´éœ²</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> arrayMethods</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arrayPrototype</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// vueåº•å±‚æ”¹å†™äº†æ•°ç»„çš„7ä¸ªæ–¹æ³•ï¼ˆå…³é”®ï¼‰ï¼šè¦è¢«æ”¹å†™çš„7ä¸ªæ•°ç»„æ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> methodsNeedChange</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#98C379;">	&quot;push&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;pop&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;shift&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;unshift&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;splice&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;sort&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">	&quot;reverse&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">methodsNeedChange</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">methodName</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¤‡ä»½åŸæ¥çš„æ–¹æ³•ï¼Œå› ä¸ºpushã€popç­‰7ä¸ªæ•°ç»„å‡½æ•°çš„åŠŸèƒ½ä¸èƒ½è¢«å‰¥å¤º</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> original</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> arrayPrototype</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">methodName</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å®šä¹‰æ–°çš„æ–¹æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">	def</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">		arrayMethods</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		methodName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">		function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ¢å¤åŸæ¥7ä¸ªæ•°ç»„å‡½æ•°çš„åŠŸèƒ½</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> original</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŠŠç±»æ•°ç»„å¯¹è±¡å˜ä¸ºæ•°ç»„ï¼Œä¸‹é¢æ‰èƒ½ç”¨spliceæ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> args</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [...</span><span style="color:#E5C07B;">arguments</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŠŠè¿™ä¸ªæ•°ç»„èº«ä¸Šçš„__ob__å–å‡ºæ¥ï¼Œ__ob__å·²ç»è¢«æ·»åŠ äº†ï¼Œä¸ºä»€ä¹ˆå·²ç»è¢«æ·»åŠ äº†ï¼Ÿå› ä¸ºæ•°ç»„è‚¯å®šä¸æ˜¯æœ€é«˜å±‚ï¼Œæ¯”å¦‚obj.gå±æ€§æ˜¯æ•°ç»„ï¼Œobjä¸èƒ½æ˜¯æ•°ç»„ï¼Œç¬¬ä¸€æ¬¡éå†objè¿™ä¸ªå¯¹è±¡çš„ç¬¬ä¸€å±‚çš„æ—¶å€™ï¼Œå·²ç»ç»™gå±æ€§ï¼ˆå°±æ˜¯è¿™ä¸ªæ•°ç»„ï¼‰æ·»åŠ äº†__ob__å±æ€§ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> ob</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">__ob__</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æœ‰ä¸‰ç§æ–¹æ³•push\\unshift\\spliceèƒ½å¤Ÿæ’å…¥æ–°é¡¹ï¼Œç°åœ¨è¦æŠŠæ’å…¥çš„æ–°é¡¹ä¹Ÿè¦å˜ä¸ºobserveçš„</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> inserted</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">methodName</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				case</span><span style="color:#98C379;"> &quot;push&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#C678DD;">				case</span><span style="color:#98C379;"> &quot;unshift&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;">					inserted</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> args</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">					break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				case</span><span style="color:#98C379;"> &quot;splice&quot;</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// spliceæ ¼å¼æ˜¯splice(ä¸‹æ ‡, æ•°é‡, æ’å…¥çš„æ–°é¡¹)</span></span>
<span class="line"><span style="color:#E06C75;">					inserted</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> args</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">					break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ¤æ–­æœ‰æ²¡æœ‰è¦æ’å…¥çš„æ–°é¡¹ï¼Œè®©æ–°é¡¹ä¹Ÿå˜ä¸ºå“åº”çš„</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">inserted</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				ob</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">observeArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">inserted</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å•¦å•¦å•¦&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">			ob</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">dep</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">notify</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#D19A66;">		false</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h5 id="src-dep-js-æ”¶é›†ä¾èµ–-ç„¶åé€šçŸ¥-watcherâ€”â€”dep-ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼-å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶-ä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨-æŠŠæ‰€æœ‰çš„-watcher-éƒ½é€šçŸ¥ä¸€éã€‚" tabindex="-1">src/Dep.jsï¼šæ”¶é›†ä¾èµ–ï¼Œç„¶åé€šçŸ¥ Watcherâ€”â€”Dep ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚ <a class="header-anchor" href="#src-dep-js-æ”¶é›†ä¾èµ–-ç„¶åé€šçŸ¥-watcherâ€”â€”dep-ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼-å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶-ä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨-æŠŠæ‰€æœ‰çš„-watcher-éƒ½é€šçŸ¥ä¸€éã€‚" aria-label="Permalink to &quot;src/Dep.jsï¼šæ”¶é›†ä¾èµ–ï¼Œç„¶åé€šçŸ¥ Watcherâ€”â€”Dep ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> uid</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Dep</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æˆ‘æ˜¯DEPç±»çš„æ„é€ å™¨&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> uid</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç”¨æ•°ç»„å­˜å‚¨è‡ªå·±çš„è®¢é˜…è€…ã€‚subsæ˜¯è‹±è¯­subscribesè®¢é˜…è€…çš„æ„æ€ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™ä¸ªæ•°ç»„é‡Œé¢æ”¾çš„æ˜¯Watcherçš„å®ä¾‹</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">subs</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ·»åŠ è®¢é˜…</span></span>
<span class="line"><span style="color:#61AFEF;">	addSub</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">sub</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">subs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">sub</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ·»åŠ ä¾èµ–</span></span>
<span class="line"><span style="color:#61AFEF;">	depend</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// Dep.targetå°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„å…¨å±€çš„ä½ç½®ï¼Œä½ ç”¨window.targetä¹Ÿè¡Œï¼Œåªè¦æ˜¯å…¨å‰§å”¯ä¸€ï¼Œæ²¡æœ‰æ­§ä¹‰å°±è¡Œ</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addSub</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é€šçŸ¥æ›´æ–°</span></span>
<span class="line"><span style="color:#61AFEF;">	notify</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æˆ‘æ˜¯notify&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æµ…å…‹éš†ä¸€ä»½</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> subs</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">subs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">slice</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// éå†</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">l</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> subs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E06C75;"> l</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			subs</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h5 id="src-watcher-js-é‡ç‚¹ç†è§£-åé¢ç”Ÿå‘½å‘¨æœŸçš„å®ç°ä¹Ÿä¾é è¿™ä¸ªå·¥å…·ç±»-ä¾¦å¬ä¾èµ–-ä¾èµ–å°±æ˜¯-watcherâ€”â€”åªæœ‰-watcher-è§¦å‘çš„-getter-æ‰ä¼šæ”¶é›†ä¾èµ–-å“ªä¸ª-watcher-è§¦å‘äº†-getter-å°±æŠŠå“ªä¸ª-watcher-æ”¶é›†åˆ°-dep-ä¸­ã€‚" tabindex="-1">src/Watcher.jsï¼ˆé‡ç‚¹ç†è§£ï¼Œåé¢ç”Ÿå‘½å‘¨æœŸçš„å®ç°ä¹Ÿä¾é è¿™ä¸ªå·¥å…·ç±»ï¼‰ï¼šä¾¦å¬ä¾èµ–ï¼šä¾èµ–å°±æ˜¯ Watcherâ€”â€”åªæœ‰ Watcher è§¦å‘çš„ getter æ‰ä¼šæ”¶é›†ä¾èµ–ï¼Œå“ªä¸ª Watcher è§¦å‘äº† getterï¼Œå°±æŠŠå“ªä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚ <a class="header-anchor" href="#src-watcher-js-é‡ç‚¹ç†è§£-åé¢ç”Ÿå‘½å‘¨æœŸçš„å®ç°ä¹Ÿä¾é è¿™ä¸ªå·¥å…·ç±»-ä¾¦å¬ä¾èµ–-ä¾èµ–å°±æ˜¯-watcherâ€”â€”åªæœ‰-watcher-è§¦å‘çš„-getter-æ‰ä¼šæ”¶é›†ä¾èµ–-å“ªä¸ª-watcher-è§¦å‘äº†-getter-å°±æŠŠå“ªä¸ª-watcher-æ”¶é›†åˆ°-dep-ä¸­ã€‚" aria-label="Permalink to &quot;src/Watcher.jsï¼ˆé‡ç‚¹ç†è§£ï¼Œåé¢ç”Ÿå‘½å‘¨æœŸçš„å®ç°ä¹Ÿä¾é è¿™ä¸ªå·¥å…·ç±»ï¼‰ï¼šä¾¦å¬ä¾èµ–ï¼šä¾èµ–å°±æ˜¯ Watcherâ€”â€”åªæœ‰ Watcher è§¦å‘çš„ getter æ‰ä¼šæ”¶é›†ä¾èµ–ï¼Œå“ªä¸ª Watcher è§¦å‘äº† getterï¼Œå°±æŠŠå“ªä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Dep</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Dep&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> uid</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Watcher</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">expression</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æˆ‘æ˜¯Watcherç±»çš„æ„é€ å™¨&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> uid</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">getter</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parsePath</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">expression</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">callback</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> callback</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	update</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	get</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿›å…¥ä¾èµ–æ”¶é›†é˜¶æ®µã€‚è®©å…¨å±€çš„Dep.targetè®¾ç½®ä¸ºWatcheræœ¬èº«ï¼Œé‚£ä¹ˆå°±æ˜¯è¿›å…¥ä¾èµ–æ”¶é›†é˜¶æ®µ</span></span>
<span class="line"><span style="color:#E5C07B;">		Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> obj</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// åªè¦èƒ½æ‰¾ï¼Œå°±ä¸€ç›´æ‰¾</span></span>
<span class="line"><span style="color:#C678DD;">		try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">finally</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			Dep</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	run</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getAndInvoke</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	getAndInvoke</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">cb</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> !==</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> ||</span><span style="color:#C678DD;"> typeof</span><span style="color:#E06C75;"> value</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;object&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> oldValue</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">			cb</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">oldValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> parsePath</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">str</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> segments</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> segments</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			obj</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">segments</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">]];</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> obj</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="å››ã€ast-æŠ½è±¡è¯­æ³•æ ‘" tabindex="-1">å››ã€AST æŠ½è±¡è¯­æ³•æ ‘ <a class="header-anchor" href="#å››ã€ast-æŠ½è±¡è¯­æ³•æ ‘" aria-label="Permalink to &quot;å››ã€AST æŠ½è±¡è¯­æ³•æ ‘&quot;">â€‹</a></h2><h3 id="_1-äº†è§£æŠ½è±¡è¯­æ³•æ ‘" tabindex="-1">1.äº†è§£æŠ½è±¡è¯­æ³•æ ‘ <a class="header-anchor" href="#_1-äº†è§£æŠ½è±¡è¯­æ³•æ ‘" aria-label="Permalink to &quot;1.äº†è§£æŠ½è±¡è¯­æ³•æ ‘&quot;">â€‹</a></h3><h4 id="_1-1-æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆ" tabindex="-1">1.1 æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-1-æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1.1 æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h4><p><img src="`+z+'" alt="image-20240304033847098"></p><p><img src="'+X+'" alt="image-20240304033910144"></p><h4 id="_1-2-æŠ½è±¡è¯­æ³•æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª-js-å¯¹è±¡" tabindex="-1">1.2 æŠ½è±¡è¯­æ³•æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª JS å¯¹è±¡ <a class="header-anchor" href="#_1-2-æŠ½è±¡è¯­æ³•æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª-js-å¯¹è±¡" aria-label="Permalink to &quot;1.2 æŠ½è±¡è¯­æ³•æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª JS å¯¹è±¡&quot;">â€‹</a></h4><p><img src="'+Q+'" alt="image-20240304033945456"></p><h4 id="_1-3-æŠ½è±¡è¯­æ³•æ ‘å’Œè™šæ‹ŸèŠ‚ç‚¹çš„å…³ç³»" tabindex="-1">1.3 æŠ½è±¡è¯­æ³•æ ‘å’Œè™šæ‹ŸèŠ‚ç‚¹çš„å…³ç³» <a class="header-anchor" href="#_1-3-æŠ½è±¡è¯­æ³•æ ‘å’Œè™šæ‹ŸèŠ‚ç‚¹çš„å…³ç³»" aria-label="Permalink to &quot;1.3 æŠ½è±¡è¯­æ³•æ ‘å’Œè™šæ‹ŸèŠ‚ç‚¹çš„å…³ç³»&quot;">â€‹</a></h4><p><img src="'+Z+'" alt="image-20240304034003868"></p><h3 id="_2-ç›¸å…³ç®—æ³•å‚¨å¤‡" tabindex="-1">2.ç›¸å…³ç®—æ³•å‚¨å¤‡ <a class="header-anchor" href="#_2-ç›¸å…³ç®—æ³•å‚¨å¤‡" aria-label="Permalink to &quot;2.ç›¸å…³ç®—æ³•å‚¨å¤‡&quot;">â€‹</a></h3><h4 id="æŒ‡é’ˆæ€æƒ³â€”â€”é¢˜ç›®-1" tabindex="-1">æŒ‡é’ˆæ€æƒ³â€”â€”é¢˜ç›® 1 <a class="header-anchor" href="#æŒ‡é’ˆæ€æƒ³â€”â€”é¢˜ç›®-1" aria-label="Permalink to &quot;æŒ‡é’ˆæ€æƒ³â€”â€”é¢˜ç›® 1&quot;">â€‹</a></h4><p><img src="'+K+`" alt="image-20240304034212281"></p><p>æŒ‡é’ˆæ€æƒ³å®ç°ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯•å¯»æ‰¾å­—ç¬¦ä¸²ä¸­ï¼Œè¿ç»­é‡å¤æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> str</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;abbbccc&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡é’ˆ</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“å‰é‡å¤æ¬¡æ•°æœ€å¤šçš„æ¬¡æ•°</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> maxRepeatCount</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é‡å¤æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> maxRepeatChar</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“iè¿˜åœ¨èŒƒå›´å†…çš„æ—¶å€™ï¼Œåº”è¯¥ç»§ç»­å¯»æ‰¾</span></span>
<span class="line"><span style="color:#C678DD;">			while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#E5C07B;"> str</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// çœ‹iæŒ‡å‘çš„å­—ç¬¦å’ŒjæŒ‡å‘çš„å­—ç¬¦æ˜¯ä¸æ˜¯ä¸ç›¸åŒ</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">!=</span><span style="color:#E06C75;"> str</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">j</span><span style="color:#ABB2BF;">]) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// console.log(&#39;æŠ¥ï¼ï¼ï¼&#39; + i + &#39;å’Œ&#39; + j + &#39;ä¹‹é—´çš„æ–‡å­—è¿ç»­ç›¸åŒï¼ï¼éƒ½æ˜¯å­—æ¯&#39; + str[i] + &#39;å®ƒé‡å¤äº†&#39; + (j - i) + &#39;æ¬¡&#39;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å’Œå½“å‰é‡å¤æ¬¡æ•°æœ€å¤šçš„è¿›è¡Œæ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">j</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#E06C75;"> maxRepeatCount</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å¦‚æœå½“å‰æ–‡å­—é‡å¤æ¬¡æ•°ï¼ˆj - iï¼‰è¶…è¿‡äº†æ­¤æ—¶çš„æœ€å¤§å€¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å°±è®©å®ƒæˆä¸ºæœ€å¤§å€¼</span></span>
<span class="line"><span style="color:#E06C75;">						maxRepeatCount</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> -</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å°†iæŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦å­˜ä¸ºmaxRepeatChar</span></span>
<span class="line"><span style="color:#E06C75;">						maxRepeatChar</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> str</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// è®©æŒ‡é’ˆiè¿½ä¸ŠæŒ‡é’ˆj</span></span>
<span class="line"><span style="color:#E06C75;">					i</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> j</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ä¸ç®¡ç›¸ä¸ç›¸åŒï¼Œjæ°¸è¿œè¦åç§»</span></span>
<span class="line"><span style="color:#E06C75;">				j</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¾ªç¯ç»“æŸä¹‹åï¼Œå°±å¯ä»¥è¾“å‡ºç­”æ¡ˆäº†</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#E06C75;">				maxRepeatChar</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;é‡å¤äº†&quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> maxRepeatCount</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;æ¬¡ï¼Œæ˜¯æœ€å¤šçš„è¿ç»­é‡å¤å­—ç¬¦&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">			);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h4 id="é€’å½’æ·±å…¥â€”â€”é¢˜ç›®-1" tabindex="-1">é€’å½’æ·±å…¥â€”â€”é¢˜ç›® 1 <a class="header-anchor" href="#é€’å½’æ·±å…¥â€”â€”é¢˜ç›®-1" aria-label="Permalink to &quot;é€’å½’æ·±å…¥â€”â€”é¢˜ç›® 1&quot;">â€‹</a></h4><p><img src="`+ss+`" alt="image-20240304034257248"></p><p>æ–æ³¢é‚£å¥‘æ•°åˆ—è¾“å‡ºâ€”â€”ä½¿ç”¨ç¼“å­˜å¯¹è±¡å®ç°</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯•è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰10é¡¹ï¼Œå³1ã€1ã€2ã€3ã€5ã€8ã€13ã€21ã€34ã€55</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ç¼“å­˜å¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> cache</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯è¿”å›ä¸‹æ ‡ä¸ºnçš„è¿™é¡¹çš„æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> fib</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">n</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// åˆ¤æ–­ç¼“å­˜å¯¹è±¡ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªå€¼ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasOwnProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">					return</span><span style="color:#E06C75;"> cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ç¼“å­˜å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå€¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// çœ‹ä¸‹æ ‡næ˜¯ä¸æ˜¯0æˆ–è€…æ˜¯ä¸æ˜¯1ï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿”å›å¸¸æ•°1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å¦‚æœä¸æ˜¯ï¼Œå°±é€’å½’</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> v</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> n</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 0</span><span style="color:#56B6C2;"> ||</span><span style="color:#E06C75;"> n</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 1</span><span style="color:#C678DD;"> ?</span><span style="color:#D19A66;"> 1</span><span style="color:#C678DD;"> :</span><span style="color:#61AFEF;"> fib</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">n</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">+</span><span style="color:#61AFEF;"> fib</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">n</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å†™å…¥ç¼“å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ç®—ä¸€ä¸ªå€¼ï¼Œå°±è¦æŠŠè¿™ä¸ªå€¼å­˜å…¥ç¼“å­˜å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">				cache</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">n</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;=</span><span style="color:#D19A66;"> 9</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fib</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h5 id="ä¸Šé¢ä»£ç çš„-cache-ç¼“å­˜æ€æƒ³" tabindex="-1">ä¸Šé¢ä»£ç çš„ cache ç¼“å­˜æ€æƒ³ <a class="header-anchor" href="#ä¸Šé¢ä»£ç çš„-cache-ç¼“å­˜æ€æƒ³" aria-label="Permalink to &quot;ä¸Šé¢ä»£ç çš„ cache ç¼“å­˜æ€æƒ³&quot;">â€‹</a></h5><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;0&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;1&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;2&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;3&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;4&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;5&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="é€’å½’æ·±å…¥â€”â€”é¢˜ç›®-2" tabindex="-1">é€’å½’æ·±å…¥â€”â€”é¢˜ç›® 2 <a class="header-anchor" href="#é€’å½’æ·±å…¥â€”â€”é¢˜ç›®-2" aria-label="Permalink to &quot;é€’å½’æ·±å…¥â€”â€”é¢˜ç›® 2&quot;">â€‹</a></h4><p><img src="`+ns+`" alt="image-20240304034407166"></p><p>é€’å½’å®ç°é«˜ç»´æ•°ç»„å˜æˆå¯¹è±¡ï¼š</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è½¬æ¢æ•°ç»„çš„å½¢å¼[1, 2, 3, [4, 5]]è¦å˜ä¸ºè¿™æ ·çš„å¯¹è±¡ï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     chidren: [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             value: 1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             value: 2</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             value: 3</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             children: [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                 {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                     {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                         value: 4</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                     },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                     {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                         value: 5</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                 }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             ]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     ]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æµ‹è¯•æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> arr</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, [</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">], [[[</span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">9</span><span style="color:#ABB2BF;">], </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å†™æ³•1ï¼šforå¾ªç¯è½¬æ¢å‡½æ•°</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// function convert(arr) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span><span style="color:#7F848E;font-style:italic;">     // å‡†å¤‡ä¸€ä¸ªç»“æœæ•°ç»„</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     var result = [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span><span style="color:#7F848E;font-style:italic;">     // éå†ä¼ å…¥çš„arrçš„æ¯ä¸€é¡¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     for (let i = 0; i &lt; arr.length; i++) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span><span style="color:#7F848E;font-style:italic;">         // å¦‚æœéå†åˆ°çš„æ•°å­—æ˜¯numberï¼Œç›´æ¥æ”¾è¿›å…¥</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         if (typeof arr[i] == &#39;number&#39;) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             result.push({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                 value: arr[i]</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         } else if (Array.isArray(arr[i])) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//</span><span style="color:#7F848E;font-style:italic;">             // å¦‚æœéå†åˆ°çš„è¿™é¡¹æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆå°±é€’å½’</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             result.push({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//                 children: convert(arr[i])</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//             });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//         }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			//     return result;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å†™æ³•2ï¼šmapè½¬æ¢å‡½æ•°ï¼Œå‚æ•°ä¸æ˜¯arrè¿™ä¸ªè¯è¯­ï¼Œè€Œæ˜¯itemï¼Œæ„å‘³ç€ç°åœ¨itemå¯èƒ½æ˜¯æ•°ç»„ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°å­—</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å³ï¼Œå†™æ³•1çš„é€’å½’æ¬¡æ•°è¦å¤§å¤§å°äºå†™æ³•2ã€‚å› ä¸ºå†™æ³•2ä¸­ï¼Œé‡è§ä»€ä¹ˆä¸œè¥¿éƒ½è¦é€’å½’ä¸€ä¸‹ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> convert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">typeof</span><span style="color:#E06C75;"> item</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;number&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å¦‚æœä¼ è¿›æ¥çš„å‚æ•°æ˜¯æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">					return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">						value</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">					};</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Array</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isArray</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å¦‚æœä¼ è¿›æ¥çš„å‚æ•°æ˜¯æ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">					return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">						children</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">_item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> convert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">_item</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">					};</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> o</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> convert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h4 id="æ ˆ-é‡è¦" tabindex="-1">æ ˆï¼ˆé‡è¦ï¼‰ <a class="header-anchor" href="#æ ˆ-é‡è¦" aria-label="Permalink to &quot;æ ˆï¼ˆé‡è¦ï¼‰&quot;">â€‹</a></h4><ul><li>æ ˆï¼ˆstackï¼‰åˆåå †æ ˆï¼Œå®ƒæ˜¯ä¸€ç§è¿ç®—å—é™çš„çº¿æ€§è¡¨ï¼Œ<strong>ä»…åœ¨è¡¨å°¾èƒ½è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œ</strong>ã€‚è¿™ä¸€ç«¯è¢«ç§°ä¸º<strong>æ ˆé¡¶</strong>ï¼Œç›¸å¯¹åœ°ï¼ŒæŠŠå¦ä¸€ç«¯ç§°ä¸º<strong>æ ˆåº•</strong>ã€‚</li><li>å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ åˆç§°ä½œ<strong>è¿›æ ˆã€å…¥æ ˆæˆ–å‹æ ˆ</strong>ï¼›ä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä½œ<strong>å‡ºæ ˆæˆ–é€€æ ˆ</strong>ã€‚</li><li>**åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰**ç‰¹ç‚¹ï¼šæ ˆä¸­çš„å…ƒç´ ï¼Œæœ€å…ˆè¿›æ ˆçš„å¿…å®šæ˜¯æœ€åå‡ºæ ˆï¼Œåè¿›æ ˆçš„ä¸€å®šä¼šå…ˆå‡ºæ ˆã€‚</li><li>JavaScript ä¸­ï¼Œæ ˆå¯ä»¥<strong>ç”¨æ•°ç»„æ¨¡æ‹Ÿ</strong>ã€‚éœ€è¦é™åˆ¶åªèƒ½ä½¿ç”¨ push()å’Œ pop()ï¼Œä¸èƒ½ ä½¿ç”¨ unshift()å’Œ shift()ã€‚å³ï¼Œ<strong>æ•°ç»„å°¾æ˜¯æ ˆé¡¶</strong>ã€‚</li><li>å½“ç„¶ï¼Œå¯ä»¥ç”¨é¢å‘å¯¹è±¡ç­‰æ‰‹æ®µï¼Œå°†æ ˆå°è£…çš„æ›´å¥½ã€‚</li></ul><p><img src="`+as+'" alt="image-20240304034519540"></p><h5 id="åˆ©ç”¨-æ ˆ-çš„é¢˜ç›®" tabindex="-1">åˆ©ç”¨â€œæ ˆâ€çš„é¢˜ç›® <a class="header-anchor" href="#åˆ©ç”¨-æ ˆ-çš„é¢˜ç›®" aria-label="Permalink to &quot;åˆ©ç”¨â€œæ ˆâ€çš„é¢˜ç›®&quot;">â€‹</a></h5><p><img src="'+ls+`" alt="image-20240304034602885"></p><p>æ–‡å­—é¢˜ç›®ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">è¯•ç¼–å†™â€œæ™ºèƒ½é‡å¤â€smartRepeatå‡½æ•°ï¼Œå®ç°ï¼š</span></span>
<span class="line"><span style="color:#61AFEF;">â€¢</span><span style="color:#98C379;"> å°†3[abc]å˜ä¸ºabcabcabc</span></span>
<span class="line"><span style="color:#61AFEF;">â€¢</span><span style="color:#98C379;"> å°†3[2[a]2[b]]å˜ä¸ºaabbaabbaabb</span></span>
<span class="line"><span style="color:#61AFEF;">â€¢</span><span style="color:#98C379;"> å°†2[1[a]3[b]2[3[c]4[d]]]å˜ä¸ºabbbcccddddcccddddabbbcccddddcccdddd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">ä¸ç”¨è€ƒè™‘è¾“å…¥å­—ç¬¦ä¸²æ˜¯éæ³•çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š</span></span>
<span class="line"><span style="color:#61AFEF;">â€¢</span><span style="color:#98C379;"> 2[a3[b]]æ˜¯é”™è¯¯çš„ï¼Œåº”è¯¥è¡¥ä¸€ä¸ª1ï¼Œå³2[1[a]3[b]]</span></span>
<span class="line"><span style="color:#61AFEF;">â€¢</span><span style="color:#ABB2BF;"> [abc]æ˜¯é”™è¯¯çš„ï¼Œåº”è¯¥è¡¥ä¸€ä¸ª1ï¼Œå³1[abc]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="ä½¿ç”¨-æ ˆ-ä¼˜é›…è§£é¢˜" tabindex="-1">ä½¿ç”¨â€œæ ˆâ€ ä¼˜é›…è§£é¢˜ <a class="header-anchor" href="#ä½¿ç”¨-æ ˆ-ä¼˜é›…è§£é¢˜" aria-label="Permalink to &quot;ä½¿ç”¨â€œæ ˆâ€ ä¼˜é›…è§£é¢˜&quot;">â€‹</a></h5><p>è¯æ³•åˆ†æçš„æ—¶å€™ï¼Œç»å¸¸è¦ç”¨åˆ°æ ˆè¿™ä¸ªæ•°æ®ç»“æ„ï¼›</p><p>åˆå­¦è€…å¤§å‘ï¼šæ ˆçš„é¢˜ç›®å’Œé€’å½’éå¸¸åƒï¼Œè¿™ç±»é¢˜ç›®ç»™äººçš„æ„Ÿè§‰éƒ½æ˜¯ç”¨é€’å½’è§£é¢˜ã€‚ä¿¡ å¿ƒæ»¡æ»¡åŠ¨æ‰‹å¼€å§‹å†™äº†ï¼Œå´å‘ç°é€’å½’æ€ä¹ˆéƒ½é€’å½’ä¸å‡ºæ¥ã€‚æ­¤æ—¶å°±è¦æƒ³åˆ°ï¼Œä¸æ˜¯ç”¨é€’ å½’ï¼Œè€Œæ˜¯ç”¨æ ˆã€‚</p><p><img src="`+ps+'" alt="image-20240304034746693"></p><p><img src="'+es+`" alt="image-20240304034806320"></p><h5 id="æ ˆ-é¢˜ç›®å®ç°ä»£ç " tabindex="-1">[æ ˆ]é¢˜ç›®å®ç°ä»£ç ï¼š <a class="header-anchor" href="#æ ˆ-é¢˜ç›®å®ç°ä»£ç " aria-label="Permalink to &quot;[æ ˆ]é¢˜ç›®å®ç°ä»£ç ï¼š&quot;">â€‹</a></h5><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯•ç¼–å†™â€œæ™ºèƒ½é‡å¤â€smartRepeatå‡½æ•°ï¼Œå®ç°ï¼š</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†3[abc]å˜ä¸ºabcabcabc</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†3[2[a]2[b]]å˜ä¸ºaabbaabbaabb</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†2[1[a]3[b]2[3[c]4[d]]]å˜ä¸ºabbbcccddddcccddddabbbcccddddcccdddd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> smartRepeat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">templateStr</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æŒ‡é’ˆ</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ ˆ1ï¼Œå­˜æ”¾æ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> stack1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ ˆ2ï¼Œå­˜æ”¾ä¸´æ—¶å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> stack2</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// å‰©ä½™éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">				var</span><span style="color:#E06C75;"> rest</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> templateStr</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">				while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// å‰©ä½™éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#E06C75;">					rest</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> templateStr</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// çœ‹å½“å‰å‰©ä½™éƒ¨åˆ†æ˜¯ä¸æ˜¯ä»¥æ•°å­—å’Œ[å¼€å¤´</span></span>
<span class="line"><span style="color:#C678DD;">					if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\\d</span><span style="color:#D19A66;">+</span><span style="color:#56B6C2;">\\[</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å¾—åˆ°è¿™ä¸ªæ•°å­—</span></span>
<span class="line"><span style="color:#C678DD;">						let</span><span style="color:#E06C75;"> times</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> Number</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">(\\d</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\[</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å°±æŠŠæ•°å­—å‹æ ˆï¼ŒæŠŠç©ºå­—ç¬¦ä¸²å‹æ ˆ</span></span>
<span class="line"><span style="color:#E5C07B;">						stack1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">times</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">						stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// è®©æŒ‡é’ˆåç§»ï¼Œtimesè¿™ä¸ªæ•°å­—æ˜¯å¤šå°‘ä½å°±åç§»å¤šå°‘ä½åŠ 1ä½ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// ä¸ºä»€ä¹ˆè¦åŠ 1å‘¢ï¼ŸåŠ çš„1ä½æ˜¯[ã€‚</span></span>
<span class="line"><span style="color:#E06C75;">						index</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> times</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\\w</span><span style="color:#D19A66;">+</span><span style="color:#56B6C2;">\\]</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å¦‚æœè¿™ä¸ªå­—ç¬¦æ˜¯å­—æ¯ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æŠŠæ ˆé¡¶è¿™é¡¹æ”¹ä¸ºè¿™ä¸ªå­—æ¯</span></span>
<span class="line"><span style="color:#C678DD;">						let</span><span style="color:#E06C75;"> word</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">(\\w</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\]</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E06C75;">						stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> word</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// è®©æŒ‡é’ˆåç§»ï¼Œwordè¿™ä¸ªè¯è¯­æ˜¯å¤šå°‘ä½å°±åç§»å¤šå°‘ä½</span></span>
<span class="line"><span style="color:#E06C75;">						index</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> word</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#98C379;"> &quot;]&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// å¦‚æœè¿™ä¸ªå­—ç¬¦æ˜¯]ï¼Œé‚£ä¹ˆå°±â‘ å°†stack1å¼¹æ ˆï¼Œâ‘¡stack2å¼¹æ ˆï¼Œâ‘¢æŠŠå­—ç¬¦ä¸²æ ˆçš„æ–°æ ˆé¡¶çš„å…ƒç´ é‡å¤åˆšåˆšå¼¹å‡ºçš„é‚£ä¸ªå­—ç¬¦ä¸²æŒ‡å®šæ¬¡æ•°æ‹¼æ¥åˆ°æ–°æ ˆé¡¶ä¸Šã€‚</span></span>
<span class="line"><span style="color:#C678DD;">						let</span><span style="color:#E06C75;"> times</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> stack1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">						let</span><span style="color:#E06C75;"> word</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">						// repeatæ˜¯ES6çš„æ–¹æ³•ï¼Œæ¯”å¦‚&#39;a&#39;.repeat(3)å¾—åˆ°&#39;aaa&#39;</span></span>
<span class="line"><span style="color:#E06C75;">						stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">+=</span><span style="color:#E5C07B;"> word</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">times</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">						index</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">					console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">stack1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">stack2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// whileç»“æŸä¹‹åï¼Œstack1å’Œstack2ä¸­è‚¯å®šè¿˜å‰©ä½™1é¡¹ã€‚è¿”å›æ ˆ2ä¸­å‰©ä¸‹çš„è¿™ä¸€é¡¹ï¼Œé‡å¤æ ˆ1ä¸­å‰©ä¸‹çš„è¿™1é¡¹æ¬¡æ•°ï¼Œç»„æˆçš„è¿™ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœå‰©çš„ä¸ªæ•°ä¸å¯¹ï¼Œé‚£å°±æ˜¯ç”¨æˆ·çš„é—®é¢˜ï¼Œæ–¹æ‹¬å·æ²¡æœ‰é—­åˆã€‚</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E06C75;"> stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#61AFEF;">repeat</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">stack1</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> smartRepeat</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;3[2[3[a]1[b]]4[d]]&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h5 id="ä¸Šè¯‰æ ˆç®—æ³•-å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•çš„è¾“å‡º" tabindex="-1">ä¸Šè¯‰æ ˆç®—æ³• å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•çš„è¾“å‡º <a class="header-anchor" href="#ä¸Šè¯‰æ ˆç®—æ³•-å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•çš„è¾“å‡º" aria-label="Permalink to &quot;ä¸Šè¯‰æ ˆç®—æ³• å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³æ–¹æ³•çš„è¾“å‡º&quot;">â€‹</a></h5><p><img src="`+os+'" alt="image-20240304034840380"></p><p><img src="'+ts+'" alt="image-20240304034853078"></p><h3 id="_3-æ‰‹å†™å®ç°-ast-æŠ½è±¡è¯­æ³•æ ‘" tabindex="-1">3.ğŸ…°ï¸æ‰‹å†™å®ç° AST æŠ½è±¡è¯­æ³•æ ‘ <a class="header-anchor" href="#_3-æ‰‹å†™å®ç°-ast-æŠ½è±¡è¯­æ³•æ ‘" aria-label="Permalink to &quot;3.:a:æ‰‹å†™å®ç° AST æŠ½è±¡è¯­æ³•æ ‘&quot;">â€‹</a></h3><ul><li>å­¦ä¹ æºç æ—¶ï¼Œæºç æ€æƒ³è¦å€Ÿé‰´ï¼Œè€Œä¸è¦æŠ„è¢­ã€‚è¦èƒ½å¤Ÿå‘ç°æºç ä¸­ä¹¦å†™çš„ç²¾å½©çš„åœ°æ–¹ï¼›</li><li>å°†ç‹¬ç«‹çš„åŠŸèƒ½æ‹†å†™ä¸ºç‹¬ç«‹çš„ js æ–‡ä»¶ä¸­å®Œæˆï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œæ¯ä¸ªå•ç‹¬çš„åŠŸèƒ½å¿…é¡»èƒ½ç‹¬ç«‹çš„â€œå•å…ƒæµ‹è¯•â€ï¼›</li><li>åº”è¯¥å›´ç»•ä¸­å¿ƒåŠŸèƒ½ï¼Œå…ˆæŠŠä¸»å¹²å®Œæˆï¼Œç„¶åä¿®å‰ªæå¶ï¼›</li><li>åŠŸèƒ½å¹¶ä¸éœ€è¦ä¸€æ­¥åˆ°ä½ï¼ŒåŠŸèƒ½çš„æ‹“å±•è¦ä¸€æ­¥æ­¥å®Œæˆï¼Œæœ‰çš„éæ ¸å¿ƒåŠŸèƒ½ç”šè‡³ä¸éœ€å®ç°ï¼›</li></ul><h4 id="_1-å®ç°æµç¨‹" tabindex="-1">1.å®ç°æµç¨‹ <a class="header-anchor" href="#_1-å®ç°æµç¨‹" aria-label="Permalink to &quot;1.å®ç°æµç¨‹&quot;">â€‹</a></h4><h5 id="_1-ast-å½¢æˆç®—æ³•" tabindex="-1">1.AST å½¢æˆç®—æ³• <a class="header-anchor" href="#_1-ast-å½¢æˆç®—æ³•" aria-label="Permalink to &quot;1.AST å½¢æˆç®—æ³•&quot;">â€‹</a></h5><p><img src="'+rs+'" alt="image-20240304035013378"></p><p><img src="'+cs+'" alt="image-20240304035033878"></p><h5 id="_2-æ‰‹å†™-ast-ç¼–è¯‘å™¨" tabindex="-1">2.æ‰‹å†™ AST ç¼–è¯‘å™¨ <a class="header-anchor" href="#_2-æ‰‹å†™-ast-ç¼–è¯‘å™¨" aria-label="Permalink to &quot;2.æ‰‹å†™ AST ç¼–è¯‘å™¨&quot;">â€‹</a></h5><h5 id="_3-æ‰‹å†™æ–‡æœ¬è§£æåŠŸèƒ½" tabindex="-1">3.æ‰‹å†™æ–‡æœ¬è§£æåŠŸèƒ½ <a class="header-anchor" href="#_3-æ‰‹å†™æ–‡æœ¬è§£æåŠŸèƒ½" aria-label="Permalink to &quot;3.æ‰‹å†™æ–‡æœ¬è§£æåŠŸèƒ½&quot;">â€‹</a></h5><h5 id="_4-ast-ä¼˜åŒ–" tabindex="-1">4.AST ä¼˜åŒ– <a class="header-anchor" href="#_4-ast-ä¼˜åŒ–" aria-label="Permalink to &quot;4.AST ä¼˜åŒ–&quot;">â€‹</a></h5><h5 id="_5-å°†-ast-ç”Ÿæˆ-h-å‡½æ•°" tabindex="-1">5.å°† AST ç”Ÿæˆ h()å‡½æ•° <a class="header-anchor" href="#_5-å°†-ast-ç”Ÿæˆ-h-å‡½æ•°" aria-label="Permalink to &quot;5.å°† AST ç”Ÿæˆ h()å‡½æ•°&quot;">â€‹</a></h5><h5 id="_6-è¯†åˆ«-attrs" tabindex="-1">6.è¯†åˆ« attrs <a class="header-anchor" href="#_6-è¯†åˆ«-attrs" aria-label="Permalink to &quot;6.è¯†åˆ« attrs&quot;">â€‹</a></h5><p>attrs å°±æ˜¯æ ‡ç­¾å†…çš„å±æ€§ï¼Œå¦‚ classã€id ç­‰...</p><p><img src="'+Bs+`" alt="image-20240304035059241"></p><h4 id="_2-æ–°å»ºé¡¹ç›®-study-ast" tabindex="-1">2.æ–°å»ºé¡¹ç›® study-ast <a class="header-anchor" href="#_2-æ–°å»ºé¡¹ç›®-study-ast" aria-label="Permalink to &quot;2.æ–°å»ºé¡¹ç›® study-ast&quot;">â€‹</a></h4><p>ç›®å½•æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">src</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> index.js</span><span style="color:#7F848E;font-style:italic;">  # è°ƒè¯•è¯•éªŒçš„jsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> parse.js</span><span style="color:#7F848E;font-style:italic;">  # æ ‡ç­¾çš„è¯†åˆ«å’Œæ”¶é›†</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> parseAttrsString.js</span><span style="color:#7F848E;font-style:italic;">  # æŠŠattrsStringå˜ä¸ºæ•°ç»„è¿”å›</span></span>
<span class="line"><span style="color:#61AFEF;">www</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> index.html</span><span style="color:#7F848E;font-style:italic;">  # ç”¨æ¥å¼•ç”¨çš„webpackæ‰“åŒ…åçš„jsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">package.json</span><span style="color:#7F848E;font-style:italic;"> # npmä¾èµ–</span></span>
<span class="line"><span style="color:#61AFEF;">webpack.config.js</span><span style="color:#7F848E;font-style:italic;"> # wepacké…ç½®æ–‡ä»¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>package.json</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;study-snabbdom&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.11.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>webpack.config.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ä»https://www.webpackjs.com/å®˜ç½‘ç…§ç€é…ç½®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;path&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å…¥å£</span></span>
<span class="line"><span style="color:#E06C75;">	entry</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;./src/index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡ºå£</span></span>
<span class="line"><span style="color:#E06C75;">	output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è™šæ‹Ÿæ‰“åŒ…è·¯å¾„ï¼Œå°±æ˜¯è¯´æ–‡ä»¶å¤¹ä¸ä¼šçœŸæ­£ç”Ÿæˆï¼Œè€Œæ˜¯åœ¨8080ç«¯å£è™šæ‹Ÿç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;xuni&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åï¼Œä¸ä¼šçœŸæ­£çš„ç‰©ç†ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		filename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bundle.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	devServer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç«¯å£å·</span></span>
<span class="line"><span style="color:#E06C75;">		port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#E06C75;">		contentBase</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;www&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>www/index.html</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;container&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/xuni/bundle.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>src/index.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> parse</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./parse.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> templateString</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> \`&lt;div&gt;</span></span>
<span class="line"><span style="color:#98C379;">    &lt;h3 class=&quot;aa bb cc&quot; data-n=&quot;7&quot; id=&quot;mybox&quot;&gt;ä½ å¥½&lt;/h3&gt;</span></span>
<span class="line"><span style="color:#98C379;">    &lt;ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">        &lt;li&gt;A&lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">        &lt;li&gt;B&lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">        &lt;li&gt;C&lt;/li&gt;</span></span>
<span class="line"><span style="color:#98C379;">    &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#98C379;">&lt;/div&gt;\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> ast</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">templateString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ast</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-æ‰‹å†™å®ç°-ast-æŠ½è±¡è¯­æ³•æ ‘è§£æ" tabindex="-1">3.ğŸ…±ï¸æ‰‹å†™å®ç° AST æŠ½è±¡è¯­æ³•æ ‘è§£æ <a class="header-anchor" href="#_3-æ‰‹å†™å®ç°-ast-æŠ½è±¡è¯­æ³•æ ‘è§£æ" aria-label="Permalink to &quot;3.:b:æ‰‹å†™å®ç° AST æŠ½è±¡è¯­æ³•æ ‘è§£æ&quot;">â€‹</a></h4><h5 id="src-parseattrsstring-js-è¯†åˆ«-attrs-æ ‡ç­¾çš„å±æ€§å­—ç¬¦ä¸²-ç„¶åå˜ä¸ºæ•°ç»„è¿”å›å‡ºå»" tabindex="-1">src/parseAttrsString.jsï¼šè¯†åˆ« attrs æ ‡ç­¾çš„å±æ€§å­—ç¬¦ä¸²ï¼Œç„¶åå˜ä¸ºæ•°ç»„è¿”å›å‡ºå» <a class="header-anchor" href="#src-parseattrsstring-js-è¯†åˆ«-attrs-æ ‡ç­¾çš„å±æ€§å­—ç¬¦ä¸²-ç„¶åå˜ä¸ºæ•°ç»„è¿”å›å‡ºå»" aria-label="Permalink to &quot;src/parseAttrsString.jsï¼šè¯†åˆ« attrs æ ‡ç­¾çš„å±æ€§å­—ç¬¦ä¸²ï¼Œç„¶åå˜ä¸ºæ•°ç»„è¿”å›å‡ºå»&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è¯†åˆ«attrsæ ‡ç­¾çš„å±æ€§å­—ç¬¦ä¸²ï¼Œç„¶åå˜ä¸ºæ•°ç»„è¿”å›å‡ºå»</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">attrsString</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">attrsString</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">attrsString</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å½“å‰æ˜¯å¦åœ¨å¼•å·å†…</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> isYinhao</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ–­ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> point</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»“æœæ•°ç»„</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// éå†attrsStringï¼Œè€Œä¸æ˜¯ä½ æƒ³çš„ç”¨split()è¿™ç§æš´åŠ›æ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">	for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> attrsString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		let</span><span style="color:#E06C75;"> char</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> attrsString</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">char</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &#39;&quot;&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			isYinhao</span><span style="color:#56B6C2;"> =</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">isYinhao</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">char</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot; &quot;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">isYinhao</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// é‡è§äº†ç©ºæ ¼ï¼Œå¹¶ä¸”ä¸åœ¨å¼•å·ä¸­</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\\s</span><span style="color:#D19A66;">*</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">attrsString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">point</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">))) {</span></span>
<span class="line"><span style="color:#E5C07B;">				result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">attrsString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">point</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#E06C75;">				point</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¾ªç¯ç»“æŸä¹‹åï¼Œæœ€åè¿˜å‰©ä¸€ä¸ªå±æ€§k=&quot;v&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">	result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">attrsString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">point</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">trim</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ä¸‹é¢çš„ä»£ç åŠŸèƒ½æ˜¯ï¼Œå°†[&quot;k=v&quot;,&quot;k=v&quot;,&quot;k=v&quot;]å˜ä¸º[{name:k, value:v}, {name:k, value:v}, {name:k,value:v}];</span></span>
<span class="line"><span style="color:#E06C75;">	result</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> result</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ ¹æ®ç­‰å·æ‹†åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> o</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">(.</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)=&quot;(.</span><span style="color:#D19A66;">+</span><span style="color:#E06C75;">)&quot;</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			name</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">			value</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">o</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h5 id="src-parse-js" tabindex="-1">src/parse.js <a class="header-anchor" href="#src-parse-js" aria-label="Permalink to &quot;src/parse.js&quot;">â€‹</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> parseAttrsString</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./parseAttrsString.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// parseå‡½æ•°ï¼Œä¸»å‡½æ•°</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">templateString</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æŒ‡é’ˆ</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> index</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‰©ä½™éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> rest</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å¼€å§‹æ ‡è®°</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> startRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /</span><span style="color:#C678DD;">^</span><span style="color:#56B6C2;">\\&lt;</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">[a-z]+[1-6]?</span><span style="color:#E06C75;">)(\\s</span><span style="color:#D19A66;">[</span><span style="color:#ABB2BF;">^</span><span style="color:#56B6C2;">\\&lt;</span><span style="color:#D19A66;">]+</span><span style="color:#E06C75;">)</span><span style="color:#D19A66;">?</span><span style="color:#56B6C2;">\\&gt;</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ç»“æŸæ ‡è®°</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> endRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /</span><span style="color:#C678DD;">^</span><span style="color:#56B6C2;">\\&lt;\\/</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">[a-z]+[1-6]?</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\&gt;</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æŠ“å–ç»“æŸæ ‡è®°å‰çš„æ–‡å­—</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> wordRegExp</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">[</span><span style="color:#ABB2BF;">^</span><span style="color:#56B6C2;">\\&lt;</span><span style="color:#D19A66;">]+</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\&lt;\\/</span><span style="color:#D19A66;">[a-z]+[1-6]?</span><span style="color:#56B6C2;">\\&gt;</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡†å¤‡ä¸¤ä¸ªæ ˆ</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> stack1</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#C678DD;">	var</span><span style="color:#E06C75;"> stack2</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [{ </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">: [] }];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">	while</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">index</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> templateString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		rest</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> templateString</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">index</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(templateString[index]);</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">startRegExp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯†åˆ«éå†åˆ°çš„è¿™ä¸ªå­—ç¬¦ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªå¼€å§‹æ ‡ç­¾</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> tag</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">startRegExp</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> attrsString</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">startRegExp</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// console.log(&#39;æ£€æµ‹åˆ°å¼€å§‹æ ‡è®°&#39;, tag);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†å¼€å§‹æ ‡è®°æ¨å…¥æ ˆ1ä¸­</span></span>
<span class="line"><span style="color:#E5C07B;">			stack1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å°†ç©ºæ•°ç»„æ¨å…¥æ ˆ2ä¸­</span></span>
<span class="line"><span style="color:#E5C07B;">			stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">				tag</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">tag</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				children</span><span style="color:#ABB2BF;">: [],</span></span>
<span class="line"><span style="color:#E06C75;">				attrs</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">parseAttrsString</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">attrsString</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¾—åˆ°attrså­—ç¬¦ä¸²çš„é•¿åº¦</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> attrsStringLength</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> attrsString</span><span style="color:#56B6C2;"> !=</span><span style="color:#D19A66;"> null</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> attrsString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#C678DD;"> :</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡é’ˆç§»åŠ¨æ ‡ç­¾çš„é•¿åº¦åŠ 2å†åŠ attrStringçš„é•¿åº¦ï¼Œä¸ºä»€ä¹ˆè¦åŠ 2å‘¢ï¼Ÿå› ä¸º&lt;&gt;ä¹Ÿå ä¸¤ä½</span></span>
<span class="line"><span style="color:#E06C75;">			index</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> tag</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 2</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> attrsStringLength</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">endRegExp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯†åˆ«éå†åˆ°çš„è¿™ä¸ªå­—ç¬¦ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªç»“æŸæ ‡ç­¾</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> tag</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">endRegExp</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// console.log(&#39;æ£€æµ‹åˆ°ç»“æŸæ ‡è®°&#39;, tag);</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> pop_tag</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> stack1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ­¤æ—¶ï¼Œtagä¸€å®šæ˜¯å’Œæ ˆ1é¡¶éƒ¨çš„æ˜¯ç›¸åŒçš„</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">tag</span><span style="color:#56B6C2;"> ==</span><span style="color:#E06C75;"> pop_tag</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> pop_arr</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">].</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">pop_arr</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">pop_tag</span><span style="color:#56B6C2;"> +</span><span style="color:#98C379;"> &quot;æ ‡ç­¾æ²¡æœ‰å°é—­ï¼ï¼&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡é’ˆç§»åŠ¨æ ‡ç­¾çš„é•¿åº¦åŠ 3ï¼Œä¸ºä»€ä¹ˆè¦åŠ 2å‘¢ï¼Ÿå› ä¸º&lt;/&gt;ä¹Ÿå 3ä½</span></span>
<span class="line"><span style="color:#E06C75;">			index</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> tag</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">wordRegExp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">rest</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¯†åˆ«éå†åˆ°çš„è¿™ä¸ªå­—ç¬¦ï¼Œæ˜¯ä¸æ˜¯æ–‡å­—ï¼Œå¹¶åˆ«ä¸èƒ½æ˜¯å…¨ç©º</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> word</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> rest</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">wordRegExp</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// çœ‹wordæ˜¯ä¸æ˜¯å…¨æ˜¯ç©º</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#E06C75;">\\s</span><span style="color:#D19A66;">+</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">word</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// ä¸æ˜¯å…¨æ˜¯ç©º</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// console.log(&#39;æ£€æµ‹åˆ°æ–‡å­—&#39;, word);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// æ”¹å˜æ­¤æ—¶stack2æ ˆé¡¶å…ƒç´ ä¸­</span></span>
<span class="line"><span style="color:#E06C75;">				stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">stack2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">].</span><span style="color:#E5C07B;">children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">word</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡é’ˆç§»åŠ¨æ ‡ç­¾çš„é•¿åº¦åŠ 3ï¼Œä¸ºä»€ä¹ˆè¦åŠ 2å‘¢ï¼Ÿå› ä¸º&lt;/&gt;ä¹Ÿå 3ä½</span></span>
<span class="line"><span style="color:#E06C75;">			index</span><span style="color:#56B6C2;"> +=</span><span style="color:#E5C07B;"> word</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			index</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ­¤æ—¶stack2å°±æ˜¯æˆ‘ä»¬ä¹‹å‰é»˜è®¤æ”¾ç½®çš„ä¸€é¡¹äº†ï¼Œæ­¤æ—¶è¦è¿”å›è¿™ä¸€é¡¹çš„childrenå³å¯</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> stack2</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h2 id="äº”ã€æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ" tabindex="-1">äº”ã€æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#äº”ã€æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;äº”ã€æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h2><h3 id="_1-æ­å»ºé¡¹ç›®-study-directive" tabindex="-1">1.æ­å»ºé¡¹ç›® study-directive <a class="header-anchor" href="#_1-æ­å»ºé¡¹ç›®-study-directive" aria-label="Permalink to &quot;1.æ­å»ºé¡¹ç›® study-directive&quot;">â€‹</a></h3><p>åŸºäºå‰é¢ã€å“åº”å¼æ•°æ®åŸç†ã€‘ä¸­ã€study-data-reactiveã€‘é¡¹ç›®æ‰‹å†™å®ç°çš„ä»£ç </p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">srcï¼šå“åº”å¼æ•°æ®â€”â€”æ‰‹å†™å®ç°çš„æºç ç›®å½•</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”array.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”defineReactive.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”Dep.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”index.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”observe.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”Observer.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">â€”â€”utils.js</span></span>
<span class="line"><span style="color:#ABB2BF;"> |</span><span style="color:#61AFEF;">__Watcher.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å¾—åˆ°çš„ç›®å½•æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">src</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> array.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> Compile.js</span><span style="color:#7F848E;font-style:italic;">  # ç¼–è¯‘</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> defineReactive.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> Dep.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> index.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> observe.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> Observer.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> utils.js</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> Vue.js</span><span style="color:#7F848E;font-style:italic;">  # Vueç±»</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> Watcher.js</span></span>
<span class="line"><span style="color:#61AFEF;">www</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> index.html</span><span style="color:#7F848E;font-style:italic;">  # ç”¨æ¥å¼•ç”¨çš„webpackæ‰“åŒ…åçš„jsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">package.json</span><span style="color:#7F848E;font-style:italic;"> # npmä¾èµ–</span></span>
<span class="line"><span style="color:#61AFEF;">webpack.config.js</span><span style="color:#7F848E;font-style:italic;"> # wepacké…ç½®æ–‡ä»¶</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>package.json</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;name&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;study-directive&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;version&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;1.0.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;description&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;main&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;webpack-dev-server&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;author&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;license&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ISC&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;dependencies&quot;</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#E06C75;">	&quot;devDependencies&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^5.11.0&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-cli&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.3.12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		&quot;webpack-dev-server&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;^3.11.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>webpack.config.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ä»https://www.webpackjs.com/å®˜ç½‘ç…§ç€é…ç½®</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> path</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;path&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">module</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">exports</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å…¥å£</span></span>
<span class="line"><span style="color:#E06C75;">	entry</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;./src/index.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// å‡ºå£</span></span>
<span class="line"><span style="color:#E06C75;">	output</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è™šæ‹Ÿæ‰“åŒ…è·¯å¾„ï¼Œå°±æ˜¯è¯´æ–‡ä»¶å¤¹ä¸ä¼šçœŸæ­£ç”Ÿæˆï¼Œè€Œæ˜¯åœ¨8080ç«¯å£è™šæ‹Ÿç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		publicPath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;xuni&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶åï¼Œä¸ä¼šçœŸæ­£çš„ç‰©ç†ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#E06C75;">		filename</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bundle.js&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	devServer</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç«¯å£å·</span></span>
<span class="line"><span style="color:#E06C75;">		port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8080</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é™æ€èµ„æºæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#E06C75;">		contentBase</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;www&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_2-æ‰‹å†™å®ç°-vue2-æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ" tabindex="-1">2.æ‰‹å†™å®ç° vue2 æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#_2-æ‰‹å†™å®ç°-vue2-æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;2.æ‰‹å†™å®ç° vue2 æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h3><h4 id="www-index-html-è¯•éªŒä»£ç åŠŸèƒ½" tabindex="-1">www/index.htmlï¼šè¯•éªŒä»£ç åŠŸèƒ½ <a class="header-anchor" href="#www-index-html-è¯•éªŒä»£ç åŠŸèƒ½" aria-label="Permalink to &quot;www/index.htmlï¼šè¯•éªŒä»£ç åŠŸèƒ½&quot;">â€‹</a></h4><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;!</span><span style="color:#E06C75;">DOCTYPE</span><span style="color:#D19A66;"> html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;"> name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;"> content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Document&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			ä½ å¥½{{b.m.n}}</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">br</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">input</span><span style="color:#D19A66;"> type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#D19A66;"> v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;b.m.n&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> onclick</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;</span><span style="color:#61AFEF;">add</span><span style="color:#98C379;">()&quot;</span><span style="color:#ABB2BF;">&gt;æŒ‰æˆ‘åŠ 1&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/xuni/bundle.js&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> vm</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">				el</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				data</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">					a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					b</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">						m</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">							n</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">7</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">						},</span></span>
<span class="line"><span style="color:#ABB2BF;">					},</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#E06C75;">				watch</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">					a</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">						console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;aæ”¹å˜å•¦&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">					},</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#61AFEF;">				created</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#61AFEF;">				update</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">vm</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">			function</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">				vm</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">m</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">n</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h4 id="src-index-js-åƒ-windo-å˜é‡ä¸­æ³¨å…¥-vue-ç±»" tabindex="-1">src/index.jsï¼šåƒ windo å˜é‡ä¸­æ³¨å…¥ Vue ç±» <a class="header-anchor" href="#src-index-js-åƒ-windo-å˜é‡ä¸­æ³¨å…¥-vue-ç±»" aria-label="Permalink to &quot;src/index.jsï¼šåƒ windo å˜é‡ä¸­æ³¨å…¥ Vue ç±»&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Vue</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Vue.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">Vue</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> Vue</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="src-vue-js" tabindex="-1">src/Vue.jsï¼š <a class="header-anchor" href="#src-vue-js" aria-label="Permalink to &quot;src/Vue.jsï¼š&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Compile</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Compile.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> observe</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./observe.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Watcher</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Watcher.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Vue</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æŠŠå‚æ•°optionså¯¹è±¡å­˜ä¸º$options</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$options</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> options</span><span style="color:#56B6C2;"> ||</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ•°æ®</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> ||</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">		observe</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// é»˜è®¤æ•°æ®è¦å˜ä¸ºå“åº”å¼çš„ï¼Œè¿™é‡Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸ</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">_initData</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è°ƒç”¨é»˜è®¤çš„watch</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">_initWatch</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æ¨¡æ¿ç¼–è¯‘</span></span>
<span class="line"><span style="color:#C678DD;">		new</span><span style="color:#61AFEF;"> Compile</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	_initData</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> self</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_data</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defineProperty</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">				get</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">					return</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#61AFEF;">				set</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">newVal</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">					self</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_data</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> newVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// é»˜è®¤çš„watchç›‘å¬çš„æ–¹æ³•çš„å®ç°</span></span>
<span class="line"><span style="color:#61AFEF;">	_initWatch</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> self</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> watch</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$options</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keys</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			new</span><span style="color:#61AFEF;"> Watcher</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">self</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="src-compile-js-æ¨¡æ¿ç¼–è¯‘" tabindex="-1">src/Compile.jsï¼šæ¨¡æ¿ç¼–è¯‘ <a class="header-anchor" href="#src-compile-js-æ¨¡æ¿ç¼–è¯‘" aria-label="Permalink to &quot;src/Compile.jsï¼šæ¨¡æ¿ç¼–è¯‘&quot;">â€‹</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Watcher</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;./Watcher.js&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> class</span><span style="color:#E5C07B;"> Compile</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">vue</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// vueå®ä¾‹</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> vue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// æŒ‚è½½ç‚¹</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$el</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelector</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">el</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¦‚æœç”¨æˆ·ä¼ å…¥äº†æŒ‚è½½ç‚¹</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$el</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è°ƒç”¨å‡½æ•°ï¼Œè®©èŠ‚ç‚¹å˜ä¸ºfragmentï¼Œç±»ä¼¼äºmustacheä¸­çš„tokensã€‚å®é™…ä¸Šç”¨çš„æ˜¯ASTï¼Œè¿™é‡Œå°±æ˜¯è½»é‡çº§çš„ï¼Œfragment</span></span>
<span class="line"><span style="color:#C678DD;">			let</span><span style="color:#E06C75;"> $fragment</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">node2Fragment</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$el</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ç¼–è¯‘</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">compile</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$fragment</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ›¿æ¢å¥½çš„å†…å®¹è¦ä¸Šæ ‘</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">$fragment</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	node2Fragment</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> fragment</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createDocumentFragment</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> child</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è®©æ‰€æœ‰DOMèŠ‚ç‚¹ï¼Œéƒ½è¿›å…¥fragment</span></span>
<span class="line"><span style="color:#C678DD;">		while</span><span style="color:#ABB2BF;"> ((</span><span style="color:#E06C75;">child</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> el</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">firstChild</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#E5C07B;">			fragment</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">appendChild</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> fragment</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#61AFEF;">	compile</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">el</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(el);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// å¾—åˆ°å­å…ƒç´ </span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> childNodes</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> el</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">childNodes</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> self</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> reg</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> /</span><span style="color:#56B6C2;">\\{\\{</span><span style="color:#E06C75;">(.</span><span style="color:#D19A66;">*</span><span style="color:#E06C75;">)</span><span style="color:#56B6C2;">\\}\\}</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">		childNodes</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">node</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> text</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textContent</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">			text</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// console.log(node.nodeType);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// console.log(reg.test(text));</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">nodeType</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">compileElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">node</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">nodeType</span><span style="color:#56B6C2;"> ==</span><span style="color:#D19A66;"> 3</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> reg</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">				let</span><span style="color:#E06C75;"> name</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> text</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">reg</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#E5C07B;">				self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">compileText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">node</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	compileElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">node</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(node);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™é‡Œçš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºä¸æ˜¯å°†HTMLç»“æ„çœ‹åšå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯çœŸæ­£çš„å±æ€§åˆ—è¡¨</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> nodeAttrs</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">attributes</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> self</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ç±»æ•°ç»„å¯¹è±¡å˜ä¸ºæ•°ç»„</span></span>
<span class="line"><span style="color:#ABB2BF;">		[].</span><span style="color:#E5C07B;">slice</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">nodeAttrs</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">attr</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¿™é‡Œå°±åˆ†ææ˜¯å¦æ˜¯æŒ‡ä»¤</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> attrName</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> attr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> value</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> attr</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æŒ‡ä»¤éƒ½æ˜¯v-å¼€å¤´çš„</span></span>
<span class="line"><span style="color:#C678DD;">			var</span><span style="color:#E06C75;"> dir</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> attrName</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// çœ‹çœ‹æ˜¯ä¸æ˜¯æŒ‡ä»¤</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">attrName</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">indexOf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;v-&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">==</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				// v-å¼€å¤´çš„å°±æ˜¯æŒ‡ä»¤</span></span>
<span class="line"><span style="color:#C678DD;">				if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dir</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;model&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// console.log(&#39;å‘ç°äº†modelæŒ‡ä»¤&#39;, value);</span></span>
<span class="line"><span style="color:#C678DD;">					new</span><span style="color:#61AFEF;"> Watcher</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">						node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					});</span></span>
<span class="line"><span style="color:#C678DD;">					var</span><span style="color:#E06C75;"> v</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getVueVal</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">					node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> v</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// æ·»åŠ ç›‘å¬</span></span>
<span class="line"><span style="color:#E5C07B;">					node</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;input&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">						var</span><span style="color:#E06C75;"> newVal</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> e</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">target</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">						self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setVueVal</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">newVal</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">						v</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">					});</span></span>
<span class="line"><span style="color:#ABB2BF;">				} </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">dir</span><span style="color:#56B6C2;"> ==</span><span style="color:#98C379;"> &quot;if&quot;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">					// console.log(&#39;å‘ç°äº†ifæŒ‡ä»¤&#39;, value);</span></span>
<span class="line"><span style="color:#ABB2BF;">				}</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	compileText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">node</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(&#39;AA&#39;, name);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// console.log(&#39;BB&#39;, this.getVueVal(this.$vue, name));</span></span>
<span class="line"><span style="color:#E5C07B;">		node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textContent</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getVueVal</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">		new</span><span style="color:#61AFEF;"> Watcher</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textContent</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	getVueVal</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">exp</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> vue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		exp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> exp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		exp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">k</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	setVueVal</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">vue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">exp</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		var</span><span style="color:#E06C75;"> val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> vue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		exp</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> exp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">		exp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">k</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;"> &lt;</span><span style="color:#E5C07B;"> exp</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				val</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> val</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				val</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br></div></div><h2 id="vue2-æºç è°ƒè¯•å‰–æ" tabindex="-1">Vue2 æºç è°ƒè¯•å‰–æ <a class="header-anchor" href="#vue2-æºç è°ƒè¯•å‰–æ" aria-label="Permalink to &quot;Vue2 æºç è°ƒè¯•å‰–æ&quot;">â€‹</a></h2><h3 id="_1-vue-2-æºç å…‹éš†ã€å®‰è£…ä¾èµ–ã€è¿è¡Œ" tabindex="-1">1.Vue 2 æºç å…‹éš†ã€å®‰è£…ä¾èµ–ã€è¿è¡Œ <a class="header-anchor" href="#_1-vue-2-æºç å…‹éš†ã€å®‰è£…ä¾èµ–ã€è¿è¡Œ" aria-label="Permalink to &quot;1.Vue 2 æºç å…‹éš†ã€å®‰è£…ä¾èµ–ã€è¿è¡Œ&quot;">â€‹</a></h3><p>ä» <a href="https://github.com/vuejs/vue.git" target="_blank" rel="noreferrer">https://github.com/vuejs/vue.git</a> å…‹éš†ä»£ç åˆ°æœ¬åœ°åï¼Œå®‰è£…ä¾èµ–ã€‚</p><p>åˆ‡æ¢åˆ° dev åˆ†æ”¯ï¼Œå› ä¸º dev åˆ†æ”¯æ˜¯ 2.6 æœ€æ–°ç‰ˆä»£ç ï¼Œè€Œ main åˆ†æ”¯æ˜¯ 2.7 ç‰ˆæœ¬çš„ä»£ç </p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å®‰è£…æŠ¥é”™ä¸ç”¨ç®¡ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> install</span></span>
<span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> v1.22.21</span></span>
<span class="line"><span style="color:#ABB2BF;">[1/4] Resolving packages...</span></span>
<span class="line"><span style="color:#ABB2BF;">[2/4] Fetching packages...</span></span>
<span class="line"><span style="color:#ABB2BF;">[3/4] Linking dependencies...</span></span>
<span class="line"><span style="color:#ABB2BF;">[4/4] Building fresh packages...</span></span>
<span class="line"><span style="color:#ABB2BF;">[1/7] â „ chromedriver</span></span>
<span class="line"><span style="color:#ABB2BF;">[7/7] â „ commitizen</span></span>
<span class="line"><span style="color:#ABB2BF;">[3/7] â „ phantomjs-prebuilt</span></span>
<span class="line"><span style="color:#ABB2BF;">[-/7] â „ waiting...</span></span>
<span class="line"><span style="color:#61AFEF;">error</span><span style="color:#98C379;"> D:</span><span style="color:#56B6C2;">\\C</span><span style="color:#98C379;">ode</span><span style="color:#56B6C2;">\\[</span><span style="color:#98C379;">NetProject]</span><span style="color:#56B6C2;">\\S</span><span style="color:#98C379;">ource</span><span style="color:#98C379;"> code</span><span style="color:#98C379;"> collection</span><span style="color:#56B6C2;">\\[</span><span style="color:#98C379;">VueOfficial]</span><span style="color:#56B6C2;">\\v</span><span style="color:#98C379;">ue</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">ode_modules</span><span style="color:#56B6C2;">\\p</span><span style="color:#98C379;">uppeteer:</span><span style="color:#98C379;"> Command</span><span style="color:#98C379;"> failed.</span></span>
<span class="line"><span style="color:#61AFEF;">Exit</span><span style="color:#98C379;"> code:</span><span style="color:#D19A66;"> 1</span></span>
<span class="line"><span style="color:#61AFEF;">Command:</span><span style="color:#98C379;"> node</span><span style="color:#98C379;"> install.js</span></span>
<span class="line"><span style="color:#61AFEF;">Arguments:</span></span>
<span class="line"><span style="color:#61AFEF;">Directory:</span><span style="color:#98C379;"> D:</span><span style="color:#56B6C2;">\\C</span><span style="color:#98C379;">ode</span><span style="color:#56B6C2;">\\[</span><span style="color:#98C379;">NetProject]</span><span style="color:#56B6C2;">\\S</span><span style="color:#98C379;">ource</span><span style="color:#98C379;"> code</span><span style="color:#98C379;"> collection</span><span style="color:#56B6C2;">\\[</span><span style="color:#98C379;">VueOfficial]</span><span style="color:#56B6C2;">\\v</span><span style="color:#98C379;">ue</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">ode_modules</span><span style="color:#56B6C2;">\\p</span><span style="color:#98C379;">uppeteer</span></span>
<span class="line"><span style="color:#61AFEF;">Output:</span></span>
<span class="line"><span style="color:#61AFEF;">ERROR:</span><span style="color:#98C379;"> Failed</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> download</span><span style="color:#98C379;"> Chromium</span><span style="color:#98C379;"> r609904!</span><span style="color:#98C379;"> Set</span><span style="color:#98C379;"> &quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOAD&quot;</span><span style="color:#98C379;"> env</span><span style="color:#98C379;"> variable</span><span style="color:#98C379;"> to</span><span style="color:#98C379;"> skip</span><span style="color:#98C379;"> download.</span></span>
<span class="line"><span style="color:#61AFEF;">Error:</span><span style="color:#98C379;"> read</span><span style="color:#98C379;"> ECONNRESET</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ç›´æ¥è¿è¡Œè¿è¡Œ vue æºç </p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> run</span><span style="color:#98C379;"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-vue-2-æºç ç›®å½•ä»‹ç»" tabindex="-1">2.Vue 2 æºç ç›®å½•ä»‹ç» <a class="header-anchor" href="#_2-vue-2-æºç ç›®å½•ä»‹ç»" aria-label="Permalink to &quot;2.Vue 2 æºç ç›®å½•ä»‹ç»&quot;">â€‹</a></h3><h4 id="vue-2-æºç ç›®å½•" tabindex="-1">Vue 2 æºç ç›®å½• <a class="header-anchor" href="#vue-2-æºç ç›®å½•" aria-label="Permalink to &quot;Vue 2 æºç ç›®å½•&quot;">â€‹</a></h4><p>Vue 2 æºç ä½äº <code>vue/src</code> ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•åŒ…å«äº† Vue æ¡†æ¶çš„æ ¸å¿ƒä»£ç ä»¥åŠä¸€äº›ç›¸å…³çš„å·¥å…·å’Œé…ç½®æ–‡ä»¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ Vue 2 æºç ç›®å½•çš„ä¸»è¦ç»“æ„ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">dist/</span><span style="color:#7F848E;font-style:italic;"> # è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«Vue.jsçš„ä¸åŒæ„å»ºç‰ˆæœ¬ï¼Œå¦‚UMDã€CommonJSå’ŒES Moduleæ ¼å¼çš„æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">test/</span><span style="color:#7F848E;font-style:italic;"> # åŒ…å«æµ‹è¯•Vue.jså„ä¸ªéƒ¨åˆ†åŠŸèƒ½çš„ä»£ç ï¼Œç¡®ä¿æ¡†æ¶çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">types/</span><span style="color:#7F848E;font-style:italic;"> # åŒ…å«TypeScriptç±»å‹å®šä¹‰æ–‡ä»¶ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># vue2.6ç‰ˆæœ¬(2.6ç‰ˆæœ¬å’Œä»¥å‰çš„ç›®å½•ç»“æ„åŸºæœ¬ç›¸åŒ)</span></span>
<span class="line"><span style="color:#61AFEF;">vue/src</span><span style="color:#7F848E;font-style:italic;">  # æºä»£ç æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬Vue.jsçš„æ ¸å¿ƒåŠŸèƒ½å’Œå®ç”¨ç¨‹åºå‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> compiler</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«Vue.jsçš„æ¨¡æ¿ç¼–è¯‘å™¨ä»£ç ï¼Œå°†æ¨¡æ¿è½¬æ¢ä¸ºæ¸²æŸ“å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">	â”œâ”€â”€</span><span style="color:#98C379;"> compiler.js</span><span style="color:#7F848E;font-style:italic;">  # ç¼–è¯‘å™¨çš„å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span style="color:#61AFEF;">	â”œâ”€â”€</span><span style="color:#98C379;"> parser/index.js</span><span style="color:#7F848E;font-style:italic;">  # æ¨¡æ¿è§£æå™¨</span></span>
<span class="line"><span style="color:#61AFEF;">	â””â”€â”€</span><span style="color:#98C379;"> generator/index.js</span><span style="color:#7F848E;font-style:italic;">  # ä»£ç ç”Ÿæˆå™¨</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> core</span><span style="color:#7F848E;font-style:italic;">  # æ ¸å¿ƒä»£ç ï¼šå¦‚Vue æ„é€ å‡½æ•°ã€ç»„ä»¶ã€æŒ‡ä»¤ã€ç”Ÿå‘½å‘¨æœŸã€å“åº”ç³»ç»Ÿã€è™šæ‹ŸDOMã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰ã€‚ï¼ˆä¸»è¦çš„Vueçš„æ ¸å¿ƒå®ç°ä»£ç åœ¨è¿™ä¸ªç›®å½•ï¼‰</span></span>
<span class="line"><span style="color:#61AFEF;">	â”œâ”€â”€</span><span style="color:#98C379;"> index.js</span><span style="color:#7F848E;font-style:italic;">  #  Vue æ„é€ å‡½æ•°çš„å¯¼å‡º</span></span>
<span class="line"><span style="color:#61AFEF;">	â”œâ”€â”€</span><span style="color:#98C379;"> components</span><span style="color:#7F848E;font-style:italic;">  # ç»„ä»¶ç›¸å…³ä»£ç </span></span>
<span class="line"><span style="color:#61AFEF;">	â””â”€â”€</span><span style="color:#98C379;"> ...</span><span style="color:#7F848E;font-style:italic;">  #</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> platforms</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«ä¸åŒå¹³å°ï¼ˆå¦‚webæˆ–weexï¼‰ç‰¹å®šçš„ä»£ç ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">	â”œâ”€â”€</span><span style="color:#98C379;"> web/index.js</span><span style="color:#7F848E;font-style:italic;">  # Web å¹³å°çš„é€‚é…ä»£ç </span></span>
<span class="line"><span style="color:#61AFEF;">	â””â”€â”€</span><span style="color:#98C379;"> weex/index.js</span><span style="color:#7F848E;font-style:italic;">  # å¾®ä¿¡å°ç¨‹åºçš„é€‚é…ä»£ç </span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> server</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ç›¸å…³çš„ä»£ç ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> sfc</span><span style="color:#7F848E;font-style:italic;">  # ç”¨äºå¤„ç†å•æ–‡ä»¶ç»„ä»¶ï¼ˆ.vueæ–‡ä»¶ï¼‰çš„ä»£ç ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> shared</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«Vue.jså„éƒ¨åˆ†å…±äº«çš„å®ç”¨åŠŸèƒ½ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># vue2.7ç‰ˆæœ¬ï¼ˆ2.7å¢åŠ äº†vue3çš„Composition Apiã€setupè¯­æ³•ç³–ã€Css v-bindç­‰ï¼Œç›®å½•å’Œæºç æœ‰æ‰€æ”¹å˜ï¼‰</span></span>
<span class="line"><span style="color:#61AFEF;">vue/src</span><span style="color:#7F848E;font-style:italic;">  # æºä»£ç æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬Vue.jsçš„æ ¸å¿ƒåŠŸèƒ½å’Œå®ç”¨ç¨‹åºå‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> compiler</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«Vue.jsçš„æ¨¡æ¿ç¼–è¯‘å™¨ä»£ç ï¼Œå°†æ¨¡æ¿è½¬æ¢ä¸ºæ¸²æŸ“å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> core</span><span style="color:#7F848E;font-style:italic;">  # æ ¸å¿ƒä»£ç ï¼šå¦‚å“åº”ç³»ç»Ÿã€è™šæ‹ŸDOMã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰ã€‚ï¼ˆä¸»è¦çš„Vueçš„æ ¸å¿ƒå®ç°ä»£ç åœ¨è¿™ä¸ªç›®å½•ï¼‰</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> platforms</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«ä¸åŒå¹³å°ï¼ˆå¦‚webæˆ–weexï¼‰ç‰¹å®šçš„ä»£ç ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> shared</span><span style="color:#7F848E;font-style:italic;">  # å…¬å…±æ–¹æ³•å’Œå¸¸é‡ä»£ç </span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> types</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å« Vue.js çš„ TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â”œâ”€â”€</span><span style="color:#98C379;"> v3</span><span style="color:#7F848E;font-style:italic;">  # åŒ…å«äº†ä» Vue 3 ç‰ˆæœ¬ä¸­ç§»æ¤åˆ° Vue 2.7 çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ Composition APIã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">â””â”€â”€</span><span style="color:#98C379;"> global.d.ts</span><span style="color:#7F848E;font-style:italic;">  # å…¨å±€çš„ TypeScript å£°æ˜æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†æ•´ä¸ª Vue.js é¡¹ç›®çš„å…¨å±€ç±»å‹ã€‚</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># vue2.7ç‰ˆæœ¬åˆ å‡äº†ä¸€äº›ç›®å½•</span></span>
<span class="line"><span style="color:#61AFEF;">Vue</span><span style="color:#98C379;"> 2.6ç‰ˆæœ¬ä¸­çš„æŸäº›ç›®å½•å˜åŠ¨å¯èƒ½æ˜¯ç”±äºå¤šç§åŸå› ï¼ŒåŒ…æ‹¬é¡¹ç›®ç»“æ„çš„ä¼˜åŒ–ã€åŠŸèƒ½çš„é‡æ„ï¼Œæˆ–è€…æ˜¯ä¸ºäº†ä¸æ–°çš„æŠ€æœ¯æ ‡å‡†ä¿æŒä¸€è‡´ã€‚å…·ä½“åˆ°serverã€sfcå’Œplatforms/weexç›®å½•çš„å˜åŒ–ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¯èƒ½çš„è§£é‡Šï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">-serverç›®å½•:</span><span style="color:#98C379;"> Vue</span><span style="color:#98C379;"> CLIçš„æ›´æ–°å¯èƒ½ä¼šå½±å“åˆ°serverç›®å½•çš„ç»“æ„ã€‚Vue</span><span style="color:#98C379;"> CLIæä¾›äº†ä¸€ç³»åˆ—å†…ç½®çš„æœåŠ¡å’Œé…ç½®é€‰é¡¹ï¼Œéšç€ç‰ˆæœ¬çš„è¿­ä»£ï¼Œéƒ¨åˆ†é…ç½®å’ŒæœåŠ¡å¯èƒ½å·²ç»è¢«æ•´åˆæˆ–ä¿®æ”¹ã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">-sfcç›®å½•:</span><span style="color:#98C379;"> å•æ–‡ä»¶ç»„ä»¶ï¼ˆSingle</span><span style="color:#98C379;"> File</span><span style="color:#98C379;"> Componentsï¼ŒSFCï¼‰æ˜¯Vueçš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼Œå…è®¸å¼€å‘è€…å°†æ¨¡æ¿ã€è„šæœ¬å’Œæ ·å¼å°è£…åœ¨å•ä¸ªæ–‡ä»¶ä¸­ã€‚Vue</span><span style="color:#98C379;"> 2.7ç‰ˆæœ¬å¯¹SFCè¿›è¡Œäº†æ›´æ–°ï¼Œå¦‚æœä½ åœ¨ä»2.6å‡çº§åˆ°2.7æ—¶é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒç¤¾åŒºçš„è®¨è®ºå’Œè§£å†³æ–¹æ¡ˆã€‚</span></span>
<span class="line"><span style="color:#61AFEF;">-platforms/weexç›®å½•:</span><span style="color:#98C379;"> Weexæ˜¯ä¸€ä¸ªç”±é˜¿é‡Œå·´å·´å‘èµ·çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨è§£å†³æ–¹æ¡ˆï¼ŒVue</span><span style="color:#98C379;"> 2.6ä¸­çš„Weexæ”¯æŒå¯èƒ½å·²ç»æ ¹æ®æ–°çš„éœ€æ±‚æˆ–æŠ€æœ¯è¿›å±•è¿›è¡Œäº†è°ƒæ•´ã€‚ä¾‹å¦‚ï¼ŒæŸäº›æŒ‡ä»¤å¯èƒ½å·²ç»è¢«æ›´æ–°æˆ–æ›¿æ¢ã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>Vue 2.6 å’Œ 2.7 çš„æºç ç›®å½•ç»“æ„éå¸¸ç›¸ä¼¼ï¼Œå› ä¸º 2.7 ä¸»è¦æ˜¯åœ¨ 2.6 çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ–°åŠŸèƒ½å’Œæ”¹è¿›ã€‚</p><p>Vue 2.7 åœ¨ 2.6 çš„åŸºç¡€ä¸Šå¢åŠ äº†å¯¹ Composition API çš„æ”¯æŒï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„æ”¹è¿›ï¼Œä¾‹å¦‚å¯¹<code>&lt;script setup&gt;</code> è¯­æ³•ç³–çš„æ”¯æŒã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº Vue 2.7 çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„è¿ç§»æŒ‡å—ï¼š<a href="https://v2.vuejs.org/v2/guide/migration-vue-2-7.html" target="_blank" rel="noreferrer">https://v2.vuejs.org/v2/guide/migration-vue-2-7.html</a></p><h4 id="å…¶ä»–ç›®å½•" tabindex="-1">å…¶ä»–ç›®å½• <a class="header-anchor" href="#å…¶ä»–ç›®å½•" aria-label="Permalink to &quot;å…¶ä»–ç›®å½•&quot;">â€‹</a></h4><p>ä»¥ä¸‹æ˜¯ Vue2 æºç æ ¹ç›®å½•ä¸‹é™¤äº† src ç›®å½•ï¼Œå…¶ä»–ç›®å½•çš„ç”¨é€”ï¼š</p><ul><li><strong>benchmarks</strong> ç›®å½•ï¼šåŒ…å«æ€§èƒ½æµ‹è¯•ä»£ç ã€‚</li><li><strong>compiler-sfc(2.7 ç‰ˆæœ¬ï¼Œ2.6 ç‰ˆæœ¬åŠä¹‹å‰éƒ½æ²¡æœ‰)</strong> ç›®å½•ï¼šåŒ…å«å•æ–‡ä»¶ç»„ä»¶ (SFC) ç¼–è¯‘å™¨çš„ä»£ç ã€‚</li><li><strong>dist</strong> ç›®å½•ï¼šæºç æœ€ç»ˆæ‰“åŒ…åçš„æ–‡ä»¶è¾“å‡ºç›®å½•ã€‚</li><li><strong>examples</strong> ç›®å½•ï¼šå®˜æ–¹çš„ä½¿ç”¨ç¤ºä¾‹ã€‚</li><li><strong>flow</strong> ç›®å½•ï¼šç±»å‹æ£€æµ‹ï¼ˆæ²¡äººç”¨äº†ï¼Œå’Œ TS åŠŸèƒ½ç±»ä¼¼ï¼‰</li><li><strong>packages</strong> ç›®å½•ï¼šä¸€äº›ä¸‹å¥½çš„åŒ…ï¼Œï¼ˆvue æºç åŒ…å«é¢ weexï¼‰</li><li><strong>scripts</strong> ç›®å½•ï¼šä¸€äº›è¾…åŠ©è„šæœ¬ã€‚</li><li><strong>test</strong> ç›®å½•ï¼šæµ‹è¯•ä»£ç ã€‚</li><li><strong>types</strong> ç›®å½•ï¼šç±»å‹å®šä¹‰æ–‡ä»¶ã€‚</li></ul><h3 id="_3-å­¦ä¹ è°ƒè¯•å‰–æ-vue-2-æºç å»ºè®®" tabindex="-1">3.å­¦ä¹ è°ƒè¯•å‰–æ Vue 2 æºç å»ºè®® <a class="header-anchor" href="#_3-å­¦ä¹ è°ƒè¯•å‰–æ-vue-2-æºç å»ºè®®" aria-label="Permalink to &quot;3.å­¦ä¹ è°ƒè¯•å‰–æ Vue 2 æºç å»ºè®®&quot;">â€‹</a></h3><p>é¦–å…ˆé˜…è¯» Vue 2 çš„å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cn.vuejs.org/v2/guide/index.html" target="_blank" rel="noreferrer">vue2 çš„å®˜æ–¹æ–‡æ¡£</a>ï¼Œäº†è§£ Vue æ¡†æ¶çš„åŸºæœ¬åŸç†å’ŒåŠŸèƒ½ã€‚</p><h3 id="_4åŸºäºè¿è¡Œçš„-vue-æºç è°ƒè¯•å‰–æ" tabindex="-1">4ğŸ…°ï¸åŸºäºè¿è¡Œçš„ vue æºç è°ƒè¯•å‰–æ <a class="header-anchor" href="#_4åŸºäºè¿è¡Œçš„-vue-æºç è°ƒè¯•å‰–æ" aria-label="Permalink to &quot;4:a:åŸºäºè¿è¡Œçš„ vue æºç è°ƒè¯•å‰–æ&quot;">â€‹</a></h3><h4 id="_1-æ ¹æ®-vue2-æºç é¡¹ç›®çš„-package-json-æ–‡ä»¶ä¸­çš„-scripts-ä¸‹çš„å‘½ä»¤-æ‰¾åˆ°è¿è¡Œå’Œæ‰“åŒ…çš„å‘½ä»¤-åˆ†æè¿è¡Œå’Œæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ã€‚" tabindex="-1">1.æ ¹æ® vue2 æºç é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸­çš„ scripts ä¸‹çš„å‘½ä»¤ï¼Œæ‰¾åˆ°è¿è¡Œå’Œæ‰“åŒ…çš„å‘½ä»¤ï¼Œåˆ†æè¿è¡Œå’Œæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ã€‚ <a class="header-anchor" href="#_1-æ ¹æ®-vue2-æºç é¡¹ç›®çš„-package-json-æ–‡ä»¶ä¸­çš„-scripts-ä¸‹çš„å‘½ä»¤-æ‰¾åˆ°è¿è¡Œå’Œæ‰“åŒ…çš„å‘½ä»¤-åˆ†æè¿è¡Œå’Œæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ã€‚" aria-label="Permalink to &quot;1.æ ¹æ® vue2 æºç é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸­çš„ scripts ä¸‹çš„å‘½ä»¤ï¼Œæ‰¾åˆ°è¿è¡Œå’Œæ‰“åŒ…çš„å‘½ä»¤ï¼Œåˆ†æè¿è¡Œå’Œæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ã€‚&quot;">â€‹</a></h4><ul><li><strong>scripts/config.js</strong> ï¼ˆweb-full-devï¼Œweb-runtime-cjs-devï¼Œweb-runtime-esm...ï¼‰</li><li>åˆ†æ <code>scripts/config.js</code> ä»£ç å¾—åˆ°çš„æ‰“åŒ…çš„å…¥å£ï¼šæŒ‰ä¸‹é¢æ¯ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç æ‰§è¡Œé¡ºåºä¸€æ­¥æ­¥å¾—åˆ° <ul><li><strong>src/platforms/web/entry-runtime.js</strong></li><li><strong>src/platforms/web/entry-runtime-with-compiler.js</strong></li><li>(ä¸Šé¢ä¸¤ä¸ªå…¥å£çš„åŒºåˆ«æ˜¯ï¼šå¸¦æœ‰ compiler çš„ä¼šé‡å†™$mountï¼Œå°† template å˜æˆ render å‡½æ•°ï¼‰</li><li><strong>src/platforms/web/runtime/index.js</strong>ï¼ˆæ‰€è°“çš„è¿è¡Œæ—¶ï¼Œä¼šæä¾›ä¸€äº› dom æ“ä½œçš„ api å±æ€§æ“ä½œã€å…ƒç´ æ“ä½œï¼Œæä¾›ä¸€äº›ç»„ä»¶å’ŒæŒ‡ä»¤)</li><li><strong>src/core/index.js</strong> initGlobalAPI åˆå§‹åŒ–å…¨å±€ api <ul><li><strong>src/core/instance/index.js</strong> Vue çš„æ„é€ å‡½æ•°</li></ul></li></ul></li></ul><p>ä»¥ä¸Šæ–‡ä»¶çš„ä»£ç çš„æ‰§è¡Œæµç¨‹ï¼š</p><p><img src="`+ys+'" alt="entry.fd620404"></p><h4 id="_2-ä»-core-ç›®å½•å¼€å§‹é˜…è¯»æºç -äº†è§£-vue-æ¡†æ¶çš„æ ¸å¿ƒä»£ç -äº†è§£ç›¸å…³çš„åŠŸèƒ½å’Œå®ç°ã€‚" tabindex="-1">2.ä» <code>core</code> ç›®å½•å¼€å§‹é˜…è¯»æºç ï¼Œäº†è§£ Vue æ¡†æ¶çš„æ ¸å¿ƒä»£ç ï¼Œäº†è§£ç›¸å…³çš„åŠŸèƒ½å’Œå®ç°ã€‚ <a class="header-anchor" href="#_2-ä»-core-ç›®å½•å¼€å§‹é˜…è¯»æºç -äº†è§£-vue-æ¡†æ¶çš„æ ¸å¿ƒä»£ç -äº†è§£ç›¸å…³çš„åŠŸèƒ½å’Œå®ç°ã€‚" aria-label="Permalink to &quot;2.ä» `core` ç›®å½•å¼€å§‹é˜…è¯»æºç ï¼Œäº†è§£ Vue æ¡†æ¶çš„æ ¸å¿ƒä»£ç ï¼Œäº†è§£ç›¸å…³çš„åŠŸèƒ½å’Œå®ç°ã€‚&quot;">â€‹</a></h4><p>package.json æŒ‡å®š script è„šæœ¬å‘½ä»¤çš„ sourcemap å‚æ•° å¯ä»¥å¼€å¯ä»£ç è°ƒè¯•ï¼š</p><p>æ·»åŠ ï¼š--sourcemapï¼Œæˆ–ç®€å†™ï¼š-s</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#98C379;">&quot;script&quot;</span><span style="color:#ABB2BF;">: {</span></span>\n<span class="line"><span style="color:#E06C75;">    &quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;rollup -w -c scripts/config.js --sourcemap --environment TARGET:web-full-dev&quot;</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è‡ªå·±å†™çš„è°ƒè¯•ä¾‹å­ï¼ŒæŠŠ examples ç›®å½•ä¸‹çš„ç›®å½•ä»£ç åˆ é™¤ï¼Œè‡ªå·±å†™ä¾‹å­æ¥è°ƒè¯•ï¼Œå¦‚ã€Vue2 æºç è§£æ.assetsã€‘èµ„æºç›®å½•ä¸‹çš„ examples ç›®å½•ï¼Œå°±æ˜¯è‡ªå·±å†™çš„è°ƒè¯• vue æºç çš„ä¾‹å­</p><h4 id="_3-é™¤äº†ä»£ç æ‰“æ–­ç‚¹è°ƒè¯•-ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è°ƒè¯•å·¥å…·-ä¾‹å¦‚-chrome-devtools-å¸®åŠ©ç†è§£ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚" tabindex="-1">3.é™¤äº†ä»£ç æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è°ƒè¯•å·¥å…·ï¼Œä¾‹å¦‚ Chrome DevToolsï¼Œå¸®åŠ©ç†è§£ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ <a class="header-anchor" href="#_3-é™¤äº†ä»£ç æ‰“æ–­ç‚¹è°ƒè¯•-ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è°ƒè¯•å·¥å…·-ä¾‹å¦‚-chrome-devtools-å¸®åŠ©ç†è§£ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚" aria-label="Permalink to &quot;3.é™¤äº†ä»£ç æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›è°ƒè¯•å·¥å…·ï¼Œä¾‹å¦‚ Chrome DevToolsï¼Œå¸®åŠ©ç†è§£ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚&quot;">â€‹</a></h4><p>åœ¨è‡ªå·±å†™çš„ examples ç›®å½•ä¾‹å­ä¸­ï¼Œæ·»åŠ  debugger è°ƒè¯•æ—¶éå¸¸é•¿çš„ï¼Œç†Ÿæ‚‰ä»£ç è¿è¡Œæµç¨‹å’Œä»£ç ç›®å½•ä¸‹çš„æ–‡ä»¶çš„åŠŸèƒ½ä¹‹åï¼Œå¯ä»¥æ‰¾åˆ°ç›¸å…³ä»£ç æ–‡ä»¶ï¼Œç›´æ¥æ‰“æ–­ç‚¹è°ƒè¯•ï¼Œæ›´æ–¹ä¾¿ã€‚</p><h2 id="vue2-7-ç‰ˆæœ¬æºç è°ƒè¯•å‰–æ" tabindex="-1">Vue2.7 ç‰ˆæœ¬æºç è°ƒè¯•å‰–æ <a class="header-anchor" href="#vue2-7-ç‰ˆæœ¬æºç è°ƒè¯•å‰–æ" aria-label="Permalink to &quot;Vue2.7 ç‰ˆæœ¬æºç è°ƒè¯•å‰–æ&quot;">â€‹</a></h2><h2 id="vue2-é¢è¯•é¢˜" tabindex="-1">Vue2 é¢è¯•é¢˜ <a class="header-anchor" href="#vue2-é¢è¯•é¢˜" aria-label="Permalink to &quot;Vue2 é¢è¯•é¢˜&quot;">â€‹</a></h2><h3 id="_1-è¯·è¯´ä¸€ä¸‹vue2å“åº”å¼æ•°æ®çš„ç†è§£-å…ˆçŸ¥é“åŸºæœ¬çš„é—®é¢˜åœ¨å“ª-æºç çš„è§’åº¦å›ç­”-ä½ ç”¨çš„æ—¶å€™ä¼šæœ‰å“ªäº›é—®é¢˜" tabindex="-1">1.è¯·è¯´ä¸€ä¸‹<code>Vue2</code>å“åº”å¼æ•°æ®çš„ç†è§£ ï¼ˆå…ˆçŸ¥é“åŸºæœ¬çš„é—®é¢˜åœ¨å“ªï¼Œ æºç çš„è§’åº¦å›ç­”ï¼Œ ä½ ç”¨çš„æ—¶å€™ä¼šæœ‰å“ªäº›é—®é¢˜ï¼‰ <a class="header-anchor" href="#_1-è¯·è¯´ä¸€ä¸‹vue2å“åº”å¼æ•°æ®çš„ç†è§£-å…ˆçŸ¥é“åŸºæœ¬çš„é—®é¢˜åœ¨å“ª-æºç çš„è§’åº¦å›ç­”-ä½ ç”¨çš„æ—¶å€™ä¼šæœ‰å“ªäº›é—®é¢˜" aria-label="Permalink to &quot;1.è¯·è¯´ä¸€ä¸‹`Vue2`å“åº”å¼æ•°æ®çš„ç†è§£ ï¼ˆå…ˆçŸ¥é“åŸºæœ¬çš„é—®é¢˜åœ¨å“ªï¼Œ æºç çš„è§’åº¦å›ç­”ï¼Œ ä½ ç”¨çš„æ—¶å€™ä¼šæœ‰å“ªäº›é—®é¢˜ï¼‰&quot;">â€‹</a></h3><p>å¯ä»¥ç›‘æ§ä¸€ä¸ªæ•°æ®çš„ä¿®æ”¹å’Œè·å–æ“ä½œã€‚ é’ˆå¯¹å¯¹è±¡æ ¼å¼ä¼šç»™æ¯ä¸ªå¯¹è±¡çš„å±æ€§è¿›è¡ŒåŠ«æŒ Object.defineProperty</p><blockquote><p>æºç å±‚é¢ initData -&gt; observe -&gt; defineReactive æ–¹æ³• ï¼ˆå†…éƒ¨å¯¹æ‰€æœ‰å±æ€§è¿›è¡Œäº†é‡å†™ æ€§èƒ½é—®é¢˜ï¼‰ é€’å½’å¢åŠ å¯¹è±¡ä¸­çš„å¯¹è±¡å¢åŠ  getter å’Œ setter</p></blockquote><blockquote><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Vue çš„æ—¶å€™å¦‚æœ å±‚çº§è¿‡æ·±ï¼ˆè€ƒè™‘ä¼˜åŒ–ï¼‰ å¦‚æœæ•°æ®ä¸æ˜¯å“åº”å¼çš„å°±ä¸è¦æ”¾åœ¨ data ä¸­äº†ã€‚ æˆ‘ä»¬å±æ€§å–å€¼çš„æ—¶å€™å°½é‡é¿å…å¤šæ¬¡å–å€¼ã€‚ å¦‚æœæœ‰äº›å¯¹è±¡æ˜¯æ”¾åˆ° data ä¸­çš„ä½†æ˜¯ä¸æ˜¯å“åº”å¼çš„å¯ä»¥è€ƒè™‘é‡‡ç”¨ Object.freeze() æ¥å†»ç»“å¯¹è±¡</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> total</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> i</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">; ; </span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">&lt;</span><span style="color:#D19A66;"> 100</span><span style="color:#ABB2BF;">ï¼›</span><span style="color:#E06C75;">i</span><span style="color:#56B6C2;">++&gt;</span><span style="color:#ABB2BF;">){</span></span>\n<span class="line"><span style="color:#E06C75;">    total</span><span style="color:#56B6C2;"> +=</span><span style="color:#E06C75;"> i</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#ABB2BF;">}</span></span>\n<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">timer</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> total</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-vueä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–" tabindex="-1">2.<code>Vue</code>ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–? <a class="header-anchor" href="#_2-vueä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–" aria-label="Permalink to &quot;2.`Vue`ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–?&quot;">â€‹</a></h3><p>vue2 ä¸­æ£€æµ‹æ•°ç»„çš„å˜åŒ–å¹¶æ²¡æœ‰é‡‡ç”¨ defineProperty å› ä¸ºä¿®æ”¹ç´¢å¼•çš„æƒ…å†µä¸å¤š(å¦‚æœç›´æ¥ä½¿ç”¨ defineProperty ä¼šæµªè´¹å¤§é‡æ€§èƒ½)ã€‚ é‡‡ç”¨é‡å†™æ•°ç»„çš„å˜å¼‚æ–¹æ³•æ¥å®ç° ï¼ˆå‡½æ•°åŠ«æŒï¼‰</p><blockquote><p>initData -&gt; observe -&gt; å¯¹æˆ‘ä»¬ä¼ å…¥çš„æ•°ç»„è¿›è¡ŒåŸå‹é“¾ä¿®æ”¹ï¼Œåç»­è°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯é‡å†™åçš„æ–¹æ³• -ã€‹ å¯¹æ•°ç»„ä¸­æ¯ä¸ªå¯¹è±¡ä¹Ÿå†æ¬¡è¿›è¡Œä»£ç†</p></blockquote><p>ä¿®æ”¹æ•°ç»„ç´¢å¼• ï¼Œä¿®æ”¹é•¿åº¦æ˜¯æ— æ³•è¿›è¡Œç›‘æ§çš„ <code>arr[1] = 100; arr.length = 300;</code> ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°çš„</p><p><code>arr[0].xxx = 100;</code> å› ä¸ºæ•°ç»„ä¸­çš„å¯¹è±¡ä¼šè¢« <code>observe</code></p><h3 id="_3-vueä¸­å¦‚ä½•è¿›è¡Œä¾èµ–æ”¶é›†" tabindex="-1">3.<code>Vue</code>ä¸­å¦‚ä½•è¿›è¡Œä¾èµ–æ”¶é›†ï¼Ÿ <a class="header-anchor" href="#_3-vueä¸­å¦‚ä½•è¿›è¡Œä¾èµ–æ”¶é›†" aria-label="Permalink to &quot;3.`Vue`ä¸­å¦‚ä½•è¿›è¡Œä¾èµ–æ”¶é›†ï¼Ÿ&quot;">â€‹</a></h3><ul><li>æ‰€è°“çš„ä¾èµ–æ”¶é›† ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ è¢«è§‚å¯Ÿè€…æŒ‡ä»£çš„æ˜¯æ•°æ® (dep)ï¼Œ è§‚å¯Ÿè€…ï¼ˆwatcher 3 ä¸­æ¸²æŸ“ watherã€è®¡ç®—å±æ€§ã€ç”¨æˆ· watcherï¼‰</li><li>ä¸€ä¸ª watcher ä¸­å¯èƒ½å¯¹åº”ç€å¤šä¸ªæ•°æ® watcher ä¸­è¿˜éœ€è¦ä¿å­˜ dep ï¼ˆé‡æ–°æ¸²æŸ“çš„æ—¶å€™å¯ä»¥è®©å±æ€§é‡æ–°è®°å½• watcherï¼‰ è®¡ç®—å±æ€§ä¹Ÿä¼šç”¨åˆ°</li></ul><blockquote><p>å¤šå¯¹å¤šçš„å…³ç³» ä¸€ä¸ª dep å¯¹åº”å¤šä¸ª watcher ï¼Œ ä¸€ä¸ª watcher æœ‰å¤šä¸ª dep ã€‚ é»˜è®¤æ¸²æŸ“çš„æ—¶å€™ä¼šè¿›è¡Œä¾èµ–æ”¶é›†ï¼ˆä¼šè§¦å‘ get æ–¹æ³•ï¼‰ï¼Œ æ•°æ®æ›´æ–°äº†å°±æ‰¾åˆ°å±æ€§å¯¹åº”çš„ watcher å»è§¦å‘æ›´æ–°</p></blockquote><p><img src="'+is+`" alt=""></p><p>å–å€¼çš„æ—¶å€™æ”¶é›†ä¾èµ–ï¼Œè®¾å€¼çš„æ—¶å€™æ›´æ–°è§†å›¾</p><h3 id="_4-å¦‚ä½•ç†è§£vueä¸­æ¨¡æ¿ç¼–è¯‘åŸç†" tabindex="-1">4.å¦‚ä½•ç†è§£<code>Vue</code>ä¸­æ¨¡æ¿ç¼–è¯‘åŸç† <a class="header-anchor" href="#_4-å¦‚ä½•ç†è§£vueä¸­æ¨¡æ¿ç¼–è¯‘åŸç†" aria-label="Permalink to &quot;4.å¦‚ä½•ç†è§£\`Vue\`ä¸­æ¨¡æ¿ç¼–è¯‘åŸç†&quot;">â€‹</a></h3><p>æˆ‘ä»¬ç”¨æˆ·ä¼ é€’çš„æ˜¯ template å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª template ç¼–è¯‘æˆ render å‡½æ•°</p><ul><li>template -&gt; ast è¯­æ³•æ ‘</li><li>å¯¹è¯­æ³•æ ‘è¿›è¡Œæ ‡è®° ï¼ˆæ ‡è®°çš„æ˜¯é™æ€èŠ‚ç‚¹ï¼‰</li><li>å°† ast è¯­æ³•æ ‘ç”Ÿæˆ render å‡½æ•°</li></ul><blockquote><p>æœ€ç»ˆæ¯æ¬¡æ¸²æŸ“å¯ä»¥è°ƒç”¨ render å‡½æ•°è¿”å›å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ (é€’å½’æ˜¯å…ˆå­åçˆ¶)</p></blockquote><h3 id="_5-vueç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„" tabindex="-1">5.<code>Vue</code>ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„ <a class="header-anchor" href="#_5-vueç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„" aria-label="Permalink to &quot;5.\`Vue\`ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„&quot;">â€‹</a></h3><p>å°±æ˜¯å†…éƒ¨åˆ©ç”¨äº†ä¸€ä¸ªå‘å¸ƒè®¢é˜…æ¨¡å¼ å°†ç”¨æˆ·å†™çš„é’©å­ç»´æŠ¤æˆäº†ä¸€ä¸ªæ•°ç»„ï¼Œåç»­ä¸€æ¬¡è°ƒç”¨ callHookã€‚ ä¸»è¦é çš„æ˜¯ mergeOptions</p><blockquote><p>å†…éƒ¨å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…æ¨¡å¼</p></blockquote><p>ä¸ºä»€ä¹ˆæœ‰äº›é’©å­çš„æ‰§è¡Œæ˜¯å…ˆå­åçˆ¶äº²ï¼Œæœ‰äº›æ˜¯å…ˆçˆ¶åå­ ç»„ä»¶æ¸²æŸ“æ˜¯å¦‚ä½•æ¸²æŸ“çš„ï¼Ÿ</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">// é‡åˆ°çˆ¶ç»„ä»¶å°±å…ˆæ¸²æŸ“çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    // é‡åˆ°å­ç»„ä»¶å°±æ¸²æŸ“å­ç»„ä»¶</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">my-button</span><span style="color:#ABB2BF;">   &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    // å…ˆæ¸²æŸ“å­ç»„ä»¶å å®Œæˆæ‰èƒ½æ¸²æŸ“å®Œæ¯•çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6-vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›-ä¸€èˆ¬åœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚åŠåŸå› " tabindex="-1">6.<code>Vue</code>çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›ï¼Ÿä¸€èˆ¬åœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚åŠåŸå›  <a class="header-anchor" href="#_6-vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›-ä¸€èˆ¬åœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚åŠåŸå› " aria-label="Permalink to &quot;6.\`Vue\`çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›ï¼Ÿä¸€èˆ¬åœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚åŠåŸå› &quot;">â€‹</a></h3><p>beforeCreate è¿™é‡Œæ²¡æœ‰å®ç°å“åº”å¼æ•°æ® vue3 ä¸­ä¸éœ€è¦ç”¨äº† æ²¡ç”¨ created âˆš æ‹¿åˆ°çš„æ˜¯å“åº”å¼çš„å±æ€§ (ä¸æ¶‰åŠåˆ° dom æ¸²æŸ“) è¿™ä¸ª api å¯ä»¥åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ä½¿ç”¨ åœ¨ vue3 ä¸­ setup beforeMount æ²¡ç”¨å®é™…ä»·å€¼ mounted âˆš è¡¨ç¤ºç»„ä»¶æŒ‚è½½å®Œæˆäº† <code>vm.$el</code> ç¬¬ä¸€æ¬¡æ¸²æŸ“å®Œæ¯•äº†ï¼Œç­‰å¾…æ¸²æŸ“å®Œæ¯•å mounted ä¸­å¯ä»¥è·å– <code>$el</code> beforeUpdate updated æ›´æ–°å‰å activated keep-alive deactivated beforeDestroy âˆš æ‰‹åŠ¨è°ƒç”¨ç§»é™¤ä¼šè§¦å‘ destroyed âˆš é”€æ¯åè§¦å‘ errorCaptured æ•è·é”™è¯¯</p><blockquote><p>ä¸€èˆ¬æœ€å¤šçš„åœ¨ mounted ï¼ˆcreated ä¸æ˜¯æ¯” mounted æ—©å—ï¼Ÿ ä»£ç æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼‰ æœåŠ¡ç«¯æ¸²æŸ“ä¸éƒ½æ˜¯åœ¨ created ä¸­ï¼ŒçœŸæ­£ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ åŸºæœ¬ä¸Šä¹Ÿä¸ä¼šä½¿ç”¨ created ï¼ˆæœåŠ¡ç«¯æ²¡æœ‰ dom ä¹Ÿæ²¡æœ‰ mounted é’©å­ï¼‰ åœ¨å“ªé‡Œå‘è¯·æ±‚ä¸»è¦çœ‹ä½ è¦åšä»€ä¹ˆäº‹ï¼ˆè¯·æ±‚çš„æ—¶å€™è·å– dom å…ƒç´ ï¼Œéƒ½å†™åœ¨è¿™é‡Œå°±å¯ä»¥çš„ï¼‰</p></blockquote><p>created æ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œçš„ mounted è¿™ä¸ªæ—¶å€™å¼‚æ­¥å·²ç»åœ¨ cteated æ‰§è¡Œå®Œäº†å§ é”™è¯¯çš„ å› ä¸ºç”Ÿå‘½å‘¨æœŸæ˜¯é¡ºåºè°ƒç”¨çš„ ï¼ˆåŒæ­¥çš„ï¼‰ è¯·æ±‚æ˜¯å¼‚æ­¥çš„ æ‰€ä»¥æœ€ç»ˆè·å–åˆ°æ•°æ®è‚¯å®šæ˜¯åœ¨ mounted ä¹‹åçš„</p><h3 id="_7-vue-mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†" tabindex="-1">7.<code>Vue.mixin</code>çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç† <a class="header-anchor" href="#_7-vue-mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†" aria-label="Permalink to &quot;7.\`Vue.mixin\`çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Vue.mixin æ¥å®ç°é€»è¾‘çš„å¤ç”¨, é—®é¢˜åœ¨äºæ•°æ®æ¥æºä¸æ˜ç¡®ã€‚ å£°æ˜çš„æ—¶å€™å¯èƒ½ä¼šå¯¼è‡´å‘½åå†²çªã€‚ é«˜é˜¶ç»„ä»¶ï¼Œ vue3 é‡‡ç”¨çš„å°±æ˜¯ compositionAPI è§£å†³äº†å¤ç”¨é—®é¢˜</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mixin</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#61AFEF;">	data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">xxx</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#61AFEF;">	beforeCreate</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$store</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Store</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#61AFEF;">	beforeDestroy</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">component</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;my&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">xxx</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">222</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	template</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;{{xxx}}&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>mixin çš„æ ¸å¿ƒå°±æ˜¯åˆå¹¶å±æ€§ ï¼ˆå†…éƒ¨é‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼è¿›è¡Œåˆå¹¶ï¼‰ å…¨å±€ mixinï¼Œå±€éƒ¨ mixinã€‚ é’ˆå¯¹ä¸åŒçš„å±æ€§æœ‰ä¸åŒçš„åˆå¹¶ç­–ç•¥</p></blockquote><h3 id="_8-vueç»„ä»¶-data-ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸ªå‡½æ•°" tabindex="-1">8.<code>Vue</code>ç»„ä»¶ data ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸ªå‡½æ•°ï¼Ÿ <a class="header-anchor" href="#_8-vueç»„ä»¶-data-ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸ªå‡½æ•°" aria-label="Permalink to &quot;8.\`Vue\`ç»„ä»¶ data ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä¸ªå‡½æ•°ï¼Ÿ&quot;">â€‹</a></h3><p>åŸå› å°±åœ¨äºé’ˆå¯¹æ ¹å®ä¾‹è€Œè¨€ï¼Œnew Vue, ç»„ä»¶æ˜¯é€šè¿‡åŒä¸€ä¸ªæ„é€ å‡½æ•°å¤šæ¬¡åˆ›å»ºå®ä¾‹ï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„è¯é‚£ä¹ˆæ•°æ®ä¼šè¢«äº’ç›¸å½±å“ã€‚ æ¯ä¸ªç»„ä»¶çš„æ•°æ®æºéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œé‚£å°±æ¯æ¬¡éƒ½è°ƒç”¨ data è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> Vue</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extend</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">	function</span><span style="color:#61AFEF;"> Sub</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">		this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">constructor</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">options</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#E5C07B;">	Sub</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">options</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> options</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> Sub</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> Child</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">extend</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#61AFEF;">	data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> c1</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Child</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">c1</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 100</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> c2</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Child</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">c2</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_9-nexttickåœ¨å“ªé‡Œä½¿ç”¨-åŸç†æ˜¯" tabindex="-1">9.<code>nextTick</code>åœ¨å“ªé‡Œä½¿ç”¨ï¼ŸåŸç†æ˜¯? <a class="header-anchor" href="#_9-nexttickåœ¨å“ªé‡Œä½¿ç”¨-åŸç†æ˜¯" aria-label="Permalink to &quot;9.\`nextTick\`åœ¨å“ªé‡Œä½¿ç”¨ï¼ŸåŸç†æ˜¯?&quot;">â€‹</a></h3><p>nextTick å†…éƒ¨é‡‡ç”¨äº†å¼‚æ­¥ä»»åŠ¡è¿›è¡Œäº†åŒ…è£… ï¼ˆå¤šä¸ª nextTick è°ƒç”¨ ä¼šè¢«åˆå¹¶æˆä¸€æ¬¡ å†…éƒ¨ä¼šåˆå¹¶å›è°ƒï¼‰æœ€ååœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æ‰¹å¤„ç† ä¸»è¦åº”ç”¨åœºæ™¯å°±æ˜¯å¼‚æ­¥æ›´æ–° ï¼ˆé»˜è®¤è°ƒåº¦çš„æ—¶å€™ å°±ä¼šæ·»åŠ ä¸€ä¸ª nextTick ä»»åŠ¡ï¼‰ ç”¨æˆ·ä¸ºäº†è·å–æœ€ç»ˆçš„æ¸²æŸ“ç»“æœéœ€è¦åœ¨å†…éƒ¨ä»»åŠ¡æ‰§è¡Œä¹‹ååœ¨æ‰§è¡Œç”¨æˆ·é€»è¾‘ è¿™æ—¶å€™ç”¨æˆ·éœ€è¦å°†å¯¹åº”çš„é€»è¾‘æ”¾åˆ° nextTick ä¸­</p><h3 id="_10-computedå’ŒwatchåŒºåˆ«" tabindex="-1">10.<code>computed</code>å’Œ<code>watch</code>åŒºåˆ« <a class="header-anchor" href="#_10-computedå’ŒwatchåŒºåˆ«" aria-label="Permalink to &quot;10.\`computed\`å’Œ\`watch\`åŒºåˆ«&quot;">â€‹</a></h3><p>computed å’Œ watch çš„ç›¸åŒç‚¹ã€‚ åº•å±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ª watcher (ç”¨æ³•çš„åŒºåˆ« computed å®šä¹‰çš„å±æ€§å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨,watch ä¸èƒ½åœ¨è§†å›¾ä¸­ä½¿ç”¨)</p><ul><li>computed é»˜è®¤ä¸ä¼šç«‹å³æ‰§è¡Œ åªæœ‰å–å€¼çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ å†…éƒ¨ä¼šå”¯ä¸€ä¸ª dirty å±æ€§ æ¥æ§åˆ¶ä¾èµ–çš„å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚ é»˜è®¤è®¡ç®—å±æ€§éœ€è¦åŒæ­¥è¿”å›ç»“æœ ( æœ‰ä¸ªåŒ… å°±æ˜¯è®© computed å˜æˆå¼‚æ­¥çš„)</li><li>watch é»˜è®¤ç”¨æˆ·ä¼šæä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ•°æ®å˜åŒ–äº†å°±è°ƒç”¨è¿™ä¸ªå›è°ƒã€‚ æˆ‘ä»¬å¯ä»¥ç›‘æ§æŸä¸ªæ•°æ®çš„å˜åŒ– æ•°æ®å˜åŒ–äº†æ‰§è¡ŒæŸäº›æ“ä½œ</li></ul><h3 id="_11-vue-setæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„" tabindex="-1">11.<code>Vue.set</code>æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ <a class="header-anchor" href="#_11-vue-setæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„" aria-label="Permalink to &quot;11.\`Vue.set\`æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„&quot;">â€‹</a></h3><p>Vue.set æ–¹æ³•æ˜¯ vue ä¸­çš„ä¸€ä¸ªè¡¥ä¸æ–¹æ³• ï¼ˆæ­£å¸¸æˆ‘ä»¬æ·»åŠ å±æ€§æ˜¯ä¸ä¼šè§¦å‘æ›´æ–°çš„ï¼Œ æˆ‘ä»¬æ•°ç»„æ— æ³•ç›‘æ§åˆ°ç´¢å¼•å’Œé•¿åº¦ï¼‰</p><p>å¦‚ä½•å®ç°çš„ æˆ‘ä»¬ç»™æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¢æ·»äº†ä¸€ä¸ª dep å±æ€§</p><blockquote><p>vue3 ä¸­ä¹Ÿä¸éœ€è¦æ­¤æ–¹æ³•äº† (å½“å±æ€§æ·»åŠ æˆ–è€…åˆ é™¤æ—¶ æ‰‹åŠ¨è§¦å‘å¯¹è±¡æœ¬èº« dep æ¥è¿›è¡Œæ›´æ–°)</p></blockquote><h3 id="_12-vueä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ-dom" tabindex="-1">12.<code>Vue</code>ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ DOM <a class="header-anchor" href="#_12-vueä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ-dom" aria-label="Permalink to &quot;12.\`Vue\`ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ DOM&quot;">â€‹</a></h3><ul><li><p>ä¸»è¦è¿™ä¸ªè™šæ‹Ÿ dom çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘ä»¬å†™çš„ä»£ç å¯èƒ½è¦é’ˆå¯¹ä¸åŒçš„å¹³å°æ¥ä½¿ç”¨ ï¼ˆweexï¼Œwebï¼Œå°ç¨‹åºï¼‰ å¯ä»¥è·¨å¹³å°ï¼Œä¸éœ€è¦è€ƒè™‘å¹³å°é—®é¢˜</p></li><li><p>ä¸ç”¨å…³å¿ƒå…¼å®¹æ€§é—®é¢˜ï¼Œ å¯ä»¥åœ¨ä¸Šå±‚å°†å¯¹åº”çš„æ¸²æŸ“æ–¹æ³•ä¼ é€’ç»™æˆ‘ ï¼Œ æˆ‘æ¥é€šè¿‡è™šæ‹Ÿ dom æ¸²æŸ“å³å¯</p></li><li><p>diff ç®—æ³• é’ˆå¯¹æ›´æ–°çš„æ—¶å€™ï¼Œ æœ‰äº†è™šæ‹Ÿ dom ä¹‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡ diff ç®—æ³•æ¥æ‰¾åˆ°æœ€åçš„å·®å¼‚è¿›è¡Œä¿®æ”¹çœŸå® dom ï¼ˆç±»ä¼¼äºåœ¨çœŸå® dom ä¹‹é—´åšäº†ä¸€ä¸ªç¼“å­˜ï¼‰</p></li></ul><blockquote><p>è·¨å¹³å° ã€diff ç®—æ³•</p></blockquote><h3 id="_13-vueä¸­diffç®—æ³•åŸç†" tabindex="-1">13.<code>Vue</code>ä¸­<code>diff</code>ç®—æ³•åŸç† <a class="header-anchor" href="#_13-vueä¸­diffç®—æ³•åŸç†" aria-label="Permalink to &quot;13.\`Vue\`ä¸­\`diff\`ç®—æ³•åŸç†&quot;">â€‹</a></h3><p>diff ç®—æ³•çš„ç‰¹ç‚¹å°±æ˜¯å¹³çº§æ¯”è¾ƒ ï¼Œ å†…éƒ¨é‡‡ç”¨äº†åŒæŒ‡é’ˆæ–¹å¼è¿›è¡Œäº†ä¼˜åŒ– ä¼˜åŒ–äº†å¸¸è§çš„æ“ä½œã€‚ é‡‡ç”¨äº†é€’å½’æ¯”è¾ƒçš„æ–¹å¼</p><h4 id="é’ˆå¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„-diff-ç®—æ³•" tabindex="-1">é’ˆå¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„ diff ç®—æ³• <a class="header-anchor" href="#é’ˆå¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„-diff-ç®—æ³•" aria-label="Permalink to &quot;é’ˆå¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„ diff ç®—æ³•&quot;">â€‹</a></h4><ul><li>å…ˆæ‹¿å‡ºæ ¹èŠ‚ç‚¹æ¥è¿›è¡Œæ¯”è¾ƒå¦‚æœæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹åˆ™æ¯”è¾ƒå±æ€§ ï¼Œ å¦‚æœä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹åˆ™ç›´æ¥æ¢æˆæœ€æ–°çš„å³å¯</li><li>åŒä¸€ä¸ªèŠ‚ç‚¹æ¯”è¾ƒå±æ€§åï¼Œå¤ç”¨è€èŠ‚ç‚¹</li></ul><h4 id="æ¯”è¾ƒå„¿å­" tabindex="-1">æ¯”è¾ƒå„¿å­ <a class="header-anchor" href="#æ¯”è¾ƒå„¿å­" aria-label="Permalink to &quot;æ¯”è¾ƒå„¿å­&quot;">â€‹</a></h4><ul><li>ä¸€æ–¹æœ‰å„¿å­ ä¸€æ–¹æ²¡å„¿å­ ï¼ˆåˆ é™¤ ã€ æ·»åŠ ï¼‰</li><li>ä¸¤æ–¹éƒ½æœ‰å„¿å­ <ul><li>ä¼˜åŒ–æ¯”è¾ƒ å¤´å¤´ å°¾å°¾ äº¤å‰æ¯”å¯¹</li><li>å°±åšä¸€ä¸ªæ˜ å°„è¡¨ï¼Œç”¨æ–°çš„å»æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾æ­¤å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ç§»åŠ¨ä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œ æœ€ååˆ é™¤å¤šä½™çš„</li><li>è¿™é‡Œä¼šæœ‰å¤šç§»åŠ¨çš„æƒ…å†µ</li></ul></li></ul><blockquote><p>O(n)å¤æ‚åº¦çš„é€’å½’æ¯”è¾ƒ</p></blockquote><h3 id="_14-æ—¢ç„¶-vue-é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®å˜åŒ–-ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ-dom-è¿›è¡Œdiffæ£€æµ‹å·®å¼‚" tabindex="-1">14.æ—¢ç„¶ Vue é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®å˜åŒ–ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ DOM è¿›è¡Œ<code>diff</code>æ£€æµ‹å·®å¼‚ <a class="header-anchor" href="#_14-æ—¢ç„¶-vue-é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®å˜åŒ–-ä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ-dom-è¿›è¡Œdiffæ£€æµ‹å·®å¼‚" aria-label="Permalink to &quot;14.æ—¢ç„¶ Vue é€šè¿‡æ•°æ®åŠ«æŒå¯ä»¥ç²¾å‡†æ¢æµ‹æ•°æ®å˜åŒ–ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è™šæ‹Ÿ DOM è¿›è¡Œ\`diff\`æ£€æµ‹å·®å¼‚&quot;">â€‹</a></h3><ul><li>å¦‚æœç»™æ¯ä¸ªå±æ€§éƒ½å»å¢åŠ  watcher , è€Œä¸”ç²’åº¦å¤ªå°ä¹Ÿæ˜¯ä¸å¥½æ§åˆ¶, é™ä½ watcher çš„æ•°é‡ ï¼ˆæ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª watcherï¼‰ å¯ä»¥é€šè¿‡ diff ç®—æ³•æ¥ä¼˜åŒ–æ¸²æŸ“è¿‡ç¨‹ã€‚ é€šè¿‡ diff ç®—æ³•å’Œå“åº”å¼åŸç†æŠ˜ä¸­å¤„ç†äº†ä¸€ä¸‹</li></ul><h3 id="_15-è¯·è¯´æ˜-vue-ä¸­-key-çš„ä½œç”¨å’ŒåŸç†-è°ˆè°ˆä½ å¯¹å®ƒçš„ç†è§£" tabindex="-1">15.è¯·è¯´æ˜ Vue ä¸­ key çš„ä½œç”¨å’ŒåŸç†ï¼Œè°ˆè°ˆä½ å¯¹å®ƒçš„ç†è§£ <a class="header-anchor" href="#_15-è¯·è¯´æ˜-vue-ä¸­-key-çš„ä½œç”¨å’ŒåŸç†-è°ˆè°ˆä½ å¯¹å®ƒçš„ç†è§£" aria-label="Permalink to &quot;15.è¯·è¯´æ˜ Vue ä¸­ key çš„ä½œç”¨å’ŒåŸç†ï¼Œè°ˆè°ˆä½ å¯¹å®ƒçš„ç†è§£&quot;">â€‹</a></h3><p>isSameVnode ä¸­ä¼šæ ¹æ® key æ¥åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦æ˜¯åŒä¸€ä¸ªå…ƒç´ ï¼Œkey ä¸ç›¸åŒè¯´æ˜ä¸æ˜¯åŒä¸€ä¸ªå…ƒç´  ï¼ˆkey åœ¨åŠ¨æ€åˆ—è¡¨ä¸­ä¸è¦ä½¿ç”¨ç´¢å¼• -ã€‹ bugï¼‰ æˆ‘ä»¬ä½¿ç”¨ key å°½é‡è¦ä¿è¯ key çš„å”¯ä¸€æ€§ ï¼ˆè¿™æ ·å¯ä»¥ä¼˜åŒ– diff ç®—æ³•ï¼‰</p><h3 id="_16-è°ˆä¸€è°ˆå¯¹-vue-ç»„ä»¶åŒ–çš„ç†è§£" tabindex="-1">16.è°ˆä¸€è°ˆå¯¹ Vue ç»„ä»¶åŒ–çš„ç†è§£ <a class="header-anchor" href="#_16-è°ˆä¸€è°ˆå¯¹-vue-ç»„ä»¶åŒ–çš„ç†è§£" aria-label="Permalink to &quot;16.è°ˆä¸€è°ˆå¯¹ Vue ç»„ä»¶åŒ–çš„ç†è§£&quot;">â€‹</a></h3><p>ç»„ä»¶çš„ä¼˜ç‚¹ï¼š ç»„ä»¶çš„å¤ç”¨å¯ä»¥æ ¹æ®æ•°æ®æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ ï¼Œ æŠŠç»„ä»¶ç›¸å…³çš„å†…å®¹æ”¾åœ¨ä¸€èµ· ï¼ˆæ–¹ä¾¿å¤ç”¨ï¼‰åˆç†è§„åˆ’ç»„ä»¶ï¼Œå¯ä»¥åšåˆ°æ›´æ–°çš„æ—¶å€™æ˜¯ç»„ä»¶çº§æ›´æ–° (ç»„ä»¶åŒ–ä¸­çš„ç‰¹æ€§ å±æ€§ï¼Œ äº‹ä»¶ï¼Œ æ’æ§½)</p><blockquote><p>Vue ä¸­æ€æ ·å¤„ç†ç»„ä»¶ 1ï¼‰ Vue.extend æ ¹æ®ç”¨æˆ·çš„ä¼ å…¥çš„å¯¹è±¡ç”Ÿæˆä¸€ä¸ªç»„ä»¶çš„æ„é€ å‡½æ•° 2ï¼‰ æ ¹æ®ç»„ä»¶äº§ç”Ÿå¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ data:{hook:init} 3ï¼‰åšç»„ä»¶åˆå§‹åŒ– å°†æˆ‘ä»¬çš„è™šæ‹ŸèŠ‚ç‚¹è½¬åŒ–æˆçœŸå®èŠ‚ç‚¹ ï¼ˆç»„ä»¶çš„ init æ–¹æ³•ï¼‰ new Sub().$mount()</p></blockquote><h3 id="_17-vueçš„ç»„ä»¶æ¸²æŸ“æµç¨‹-init" tabindex="-1">17.<code>Vue</code>çš„ç»„ä»¶æ¸²æŸ“æµç¨‹ ï¼ˆinitï¼‰ <a class="header-anchor" href="#_17-vueçš„ç»„ä»¶æ¸²æŸ“æµç¨‹-init" aria-label="Permalink to &quot;17.\`Vue\`çš„ç»„ä»¶æ¸²æŸ“æµç¨‹ ï¼ˆinitï¼‰&quot;">â€‹</a></h3><ul><li><code>vm.$options.components[&#39;my&#39;] = {my:æ¨¡æ¿}</code></li><li>åˆ›é€ ç»„ä»¶çš„è™šæ‹ŸèŠ‚ç‚¹ <code>createComponent {tag:&#39;my&#39;,data:{hook:{init}}</code>,<code>componentOptions:{Ctor:Vue.extend( {my:æ¨¡æ¿})}}</code></li><li>åˆ›é€ çœŸå®èŠ‚ç‚¹çš„ <code>createComponent init -&gt; new ç»„ä»¶().$mount() -&gt; vm.componentInstance</code></li><li><code>vm.$el</code> æ’å…¥åˆ°çˆ¶å…ƒç´ ä¸­</li></ul><h3 id="_18-vueç»„ä»¶æ›´æ–°æµç¨‹-prepatch" tabindex="-1">18.<code>Vue</code>ç»„ä»¶æ›´æ–°æµç¨‹ ï¼ˆprepatchï¼‰ <a class="header-anchor" href="#_18-vueç»„ä»¶æ›´æ–°æµç¨‹-prepatch" aria-label="Permalink to &quot;18.\`Vue\`ç»„ä»¶æ›´æ–°æµç¨‹ ï¼ˆprepatchï¼‰&quot;">â€‹</a></h3><ul><li>ç»„ä»¶æ›´æ–°ä¼šè§¦å‘ ç»„ä»¶çš„ prepatch æ–¹æ³•ï¼Œä¼šå¤ç”¨ç»„ä»¶ï¼Œå¹¶ä¸”æ¯”è¾ƒç»„ä»¶çš„ å±æ€§ äº‹ä»¶ æ’æ§½</li><li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’çš„å±æ€§æ˜¯(props) å“åº”å¼çš„ , åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ä¼šåšä¾èµ–æ”¶é›† æ”¶é›†è‡ªå·±çš„ç»„ä»¶ watcher</li><li>ç¨åç»„ä»¶æ›´æ–°äº† ä¼šé‡æ–°ç»™ props èµ‹å€¼ ï¼Œ èµ‹å€¼å®Œæˆåä¼šè§¦å‘ watcher é‡æ–°æ›´æ–°</li></ul><h3 id="_19-vueä¸­å¼‚æ­¥ç»„ä»¶åŸç†" tabindex="-1">19.<code>Vue</code>ä¸­å¼‚æ­¥ç»„ä»¶åŸç† <a class="header-anchor" href="#_19-vueä¸­å¼‚æ­¥ç»„ä»¶åŸç†" aria-label="Permalink to &quot;19.\`Vue\`ä¸­å¼‚æ­¥ç»„ä»¶åŸç†&quot;">â€‹</a></h3><p>Vue ä¸­å¼‚æ­¥ç»„ä»¶çš„å†™æ³•æœ‰å¾ˆå¤šï¼Œ ä¸»è¦ç”¨ä½œã€‚å¤§çš„ç»„ä»¶å¯ä»¥å¼‚æ­¥åŠ è½½çš„ markdown ç»„ä»¶ editor ç»„ä»¶ã€‚ å°±æ˜¯å…ˆæ¸²æŸ“ä¸€ä¸ªæ³¨é‡Šæ ‡ç­¾ï¼Œç­‰ç»„ä»¶åŠ è½½å®Œæ¯•ï¼Œæœ€ååœ¨é‡æ–°æ¸²æŸ“ forceUpdate (å›¾ç‰‡æ‡’åŠ è½½) ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ä¼šé…åˆ webpack</p><blockquote><p>åŸç†ï¼š å¼‚æ­¥ç»„ä»¶é»˜è®¤ä¸ä¼šè°ƒç”¨ Vue.extend æ–¹æ³• æ‰€æœ‰ Ctor ä¸Šæ²¡æœ‰ cid å±æ€§ï¼Œ æ²¡æœ‰ cid å±æ€§çš„å°±æ˜¯å¼‚æ­¥ç»„ä»¶ã€‚ ä¼šå…ˆæ¸²æŸ“ä¸€ä¸ªå ä½ç¬¦ç»„ä»¶. ä½†æ˜¯å¦‚æœæœ‰ loading ä¼šå…ˆæ¸²æŸ“ loading ï¼Œ ç¬¬ä¸€è½®å°±ç»“æŸäº†ã€‚ å¦‚æœç”¨æˆ·è°ƒç”¨äº† resolveï¼Œ ä¼šå°†ç»“æœèµ‹äºˆç»™ factory.resolved ä¸Šé¢ï¼Œ å¼ºåˆ¶é‡æ–°æ¸²æŸ“ã€‚ é‡æ–°æ¸²æŸ“æ—¶å€™å†æ¬¡è¿›å…¥åˆ° resolveAsyncComponent ä¸­ï¼Œ ä¼šç›´æ¥æ‹¿åˆ° factory.resolved ç»“æœæ¥æ¸²æŸ“</p></blockquote><h3 id="_20-å‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿åŠåŸç†" tabindex="-1">20.å‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿åŠåŸç† <a class="header-anchor" href="#_20-å‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿åŠåŸç†" aria-label="Permalink to &quot;20.å‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿åŠåŸç†&quot;">â€‹</a></h3><blockquote><p>React ä¸­ä¹ŸåŒºåˆ†ä¸¤ç§ç»„ä»¶ ä¸€ç§å«ç±»ç»„ä»¶ ï¼Œ ä¸€ç§å«å‡½æ•°å¼ç»„ä»¶ ï¼ˆSub å°±æ˜¯ç±»ç»„ä»¶ æœ‰ thisï¼‰ ï¼ˆå‡½æ•°ç»„ä»¶ æ²¡æœ‰ç±»å°±æ²¡æœ‰ thisï¼Œä¹Ÿæ²¡æœ‰æ‰€è°“çš„çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸ beforeCreate created..., å¥½å¤„å°±æ˜¯æ€§èƒ½å¥½ï¼Œ ä¸éœ€è¦åˆ›å»º watcher äº†ï¼‰ å‡½æ•°å¼ç»„ä»¶å°±æ˜¯è°ƒç”¨ render æ‹¿åˆ°è¿”å›ç»“æœæ¥æ¸²æŸ“ï¼Œ æ‰€ä»¥æ€§èƒ½é«˜</p></blockquote><h3 id="_21-vue-ç»„ä»¶é—´ä¼ å€¼çš„æ–¹å¼åŠä¹‹é—´åŒºåˆ«" tabindex="-1">21.Vue ç»„ä»¶é—´ä¼ å€¼çš„æ–¹å¼åŠä¹‹é—´åŒºåˆ« <a class="header-anchor" href="#_21-vue-ç»„ä»¶é—´ä¼ å€¼çš„æ–¹å¼åŠä¹‹é—´åŒºåˆ«" aria-label="Permalink to &quot;21.Vue ç»„ä»¶é—´ä¼ å€¼çš„æ–¹å¼åŠä¹‹é—´åŒºåˆ«&quot;">â€‹</a></h3><ul><li><p>props çˆ¶ä¼ é€’æ•°æ®ç»™å„¿å­ å±æ€§çš„åŸç†å°±æ˜¯æŠŠè§£æåçš„ propsï¼ŒéªŒè¯åå°±ä¼šå°†å±æ€§å®šä¹‰åœ¨å½“å‰çš„å®ä¾‹ä¸Š <code>vm._props</code> (è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§éƒ½æ˜¯é€šè¿‡ defineReactive æ¥å®šä¹‰çš„ ï¼ˆéƒ½æ˜¯å“åº”å¼çš„ï¼‰ ç»„ä»¶åœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ä¼šå» vm ä¸Šå–å€¼ <code>_props</code> å±æ€§ä¼šè¢«ä»£ç†åˆ° vm ä¸Š)</p></li><li><p>emit å„¿å­è§¦å‘ç»„ä»¶æ›´æ–° åœ¨åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹çš„æ—¶å€™å°†æ‰€æœ‰çš„äº‹ä»¶ ç»‘å®šåˆ°äº† listeners ï¼Œ é€šè¿‡ <code>$on</code> æ–¹æ³•ç»‘å®šäº‹ä»¶ é€šè¿‡ <code>$emit</code> æ–¹æ³•æ¥è§¦å‘äº‹ä»¶ (å‘å¸ƒè®¢é˜…æ¨¡å¼)</p></li><li><p>events Bus åŸç†å°±æ˜¯ å‘å¸ƒè®¢é˜…æ¨¡å¼ <code>$bus = new Vue()</code> ç®€å•çš„é€šä¿¡å¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼</p></li><li><p><code>$parent</code>ã€<code>$children</code> å°±æ˜¯åœ¨åˆ›é€ å­ç»„ä»¶çš„æ—¶å€™ ä¼šå°†çˆ¶ç»„ä»¶çš„å®ä¾‹ä¼ å…¥ã€‚ åœ¨ç»„ä»¶æœ¬èº«åˆå§‹åŒ–çš„æ—¶å€™ä¼šæ„å»ºç»„ä»¶é—´çš„çˆ¶å­å…³ç³» <code>$parent</code> è·å–çˆ¶ç»„ä»¶çš„å®ä¾‹ï¼Œé€šè¿‡<code>$children</code> å¯ä»¥è·å–æ‰€æœ‰çš„å­ç»„ä»¶çš„å®ä¾‹</p></li><li><p>ref å¯ä»¥è·å– dom å…ƒç´ å’Œç»„ä»¶çš„å®ä¾‹ ï¼ˆè™šæ‹Ÿ dom æ²¡æœ‰å¤„ç† refï¼Œ è¿™é‡Œæ— æ³•æ‹¿åˆ°å®ä¾‹ ä¹Ÿæ— æ³•è·å–ç»„ä»¶ï¼‰ åˆ›å»º dom çš„æ—¶å€™å¦‚ä½•å¤„ç† ref çš„ã€‚ ä¼šå°†ç”¨æˆ·æ‰€æœ‰çš„ dom æ“ä½œåŠå±æ€§ éƒ½ç»´æŠ¤åˆ°ä¸€ä¸ª cbs å±æ€§ä¸­ cbs (create update insert destroy....)ã€‚ ä¾æ¬¡è°ƒç”¨ cbs ä¸­ create æ–¹æ³•ã€‚ è¿™é‡Œå°±åŒ…å« ref ç›¸å…³çš„æ“ä½œï¼Œ ä¼šæ“ä½œ ref å¹¶ä¸”èµ‹å€¼</p></li><li><p>provide ï¼ˆåœ¨çˆ¶ç»„ä»¶ä¸­å°†å±æ€§æš´éœ²å‡ºæ¥ï¼‰inject åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡ inject æ³¨å…¥å±æ€§ åœ¨çˆ¶ç»„ä»¶ä¸­æä¾›æ•°æ®ï¼Œ åœ¨å­ç»„ä»¶ä¸­é€’å½’å‘ä¸ŠæŸ¥æ‰¾</p></li><li><p>$attrs (æ‰€æœ‰çš„ç»„ä»¶ä¸Šçš„å±æ€§ ä¸æ¶µç›– props) $listeners (ç»„ä»¶ä¸Šæ‰€æœ‰çš„äº‹ä»¶)</p></li><li><p>Vue.observalble å¯ä»¥åˆ›é€ ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡ç”¨äºé€šä¿¡ ç”¨çš„ä¹Ÿå°‘</p></li><li><p>vuex</p></li></ul><h3 id="_22-v-if-å’Œ-v-for-å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜" tabindex="-1">22.v-if å’Œ v-for å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜ï¼Ÿ <a class="header-anchor" href="#_22-v-if-å’Œ-v-for-å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜" aria-label="Permalink to &quot;22.v-if å’Œ v-for å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜ï¼Ÿ&quot;">â€‹</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	with</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> _c</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">			&quot;div&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">			_l</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E06C75;"> flag</span><span style="color:#C678DD;"> ?</span><span style="color:#61AFEF;"> _c</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;span&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;"> _e</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}),</span></span>
<span class="line"><span style="color:#D19A66;">			0</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>v-for çš„ä¼˜å…ˆçº§æ›´é«˜ ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ ä¼šå°† v-for æ¸²æŸ“æˆ <code>\\_l</code> å‡½æ•° v-if ä¼šå˜æˆä¸‰å…ƒè¡¨è¾¾å¼ã€‚ v-if å’Œ v-for ä¸è¦åœ¨ä¸€èµ·ä½¿ç”¨ã€‚</p></blockquote><p>v-if (æ§åˆ¶æ˜¯å¦æ¸²æŸ“) / v-show(æ§åˆ¶çš„æ˜¯æ ·å¼ viisbility:hidden display:none ?) <code>v-show=â€œtrue&quot;</code> æ”¾åœ¨ span ä¸Šä¼šå˜æˆå—å…ƒç´ å—ï¼Ÿ ä¸ºä»€ä¹ˆä¸ç”¨ <code>viisbility:hidden</code>? ä¸èƒ½å“åº”äº‹ä»¶ (å ä½çš„) ä¸ºä»€ä¹ˆæ¯”ç”¨ opacity å‘¢ï¼Ÿ ï¼ˆé€æ˜åº¦ä¸º 0 å ä½ï¼‰ å¯ä»¥å“åº”äº‹ä»¶çš„</p><blockquote><p>v-if åœ¨ç¼–è¯‘çš„æ—¶å€™ ä¼šå˜æˆä¸‰å…ƒè¡¨è¾¾å¼ ä½†æ˜¯ v-show ä¼šå˜æˆä¸€ä¸ªæŒ‡ä»¤</p></blockquote><h3 id="_23-v-if-v-model-v-for-çš„å®ç°åŸç†" tabindex="-1">23.v-ifï¼Œv-modelï¼Œv-for çš„å®ç°åŸç† <a class="header-anchor" href="#_23-v-if-v-model-v-for-çš„å®ç°åŸç†" aria-label="Permalink to &quot;23.v-ifï¼Œv-modelï¼Œv-for çš„å®ç°åŸç†&quot;">â€‹</a></h3><ul><li><p>v-if ä¼šè¢«ç¼–è¯‘æˆ ä¸‰å…ƒè¡¨è¾¾å¼</p></li><li><p>v-for ä¼šè¢«ç¼–è¯‘æˆ <code>_l</code> å¾ªç¯</p></li><li><p>v-model å¹²ä»€ä¹ˆçš„ï¼Ÿ æ”¾åœ¨è¡¨å•å…ƒç´ ä¸Šå¯ä»¥å®ç°åŒå‘ç»‘å®š ï¼Œ æ”¾åœ¨ç»„ä»¶ä¸Šå°±ä¸ä¸€æ ·äº†</p><ul><li><p>v-model æ”¾åœ¨ä¸åŒçš„å…ƒç´ ä¸Šä¼šç¼–è¯‘å‡ºä¸åŒçš„ç»“æœï¼Œé’ˆå¯¹æ–‡æœ¬æ¥è¯´ä¼šå¤„ç†æ–‡æœ¬ ï¼ˆä¼šè¢«ç¼–è¯‘æˆ value + input + æŒ‡ä»¤å¤„ç†ï¼‰ value å’Œ input å®ç°åŒå‘ç»‘å®šé˜»æ­¢ä¸­æ–‡çš„è§¦å‘ æŒ‡ä»¤ä½œç”¨å°±æ˜¯å¤„ç†ä¸­æ–‡è¾“å…¥å®Œæ¯•å æ‰‹åŠ¨è§¦å‘æ›´æ–°</p></li><li><p>v-model ç»‘å®šåˆ°ç»„ä»¶ä¸Š è¿™é‡Œä¼šç¼–è¯‘ä¸€ä¸ª model å¯¹è±¡ ç»„ä»¶åœ¨åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹çš„æ—¶å€™ä¼šé‡Œæœ‰è¿™ä¸ª å¯¹è±¡ã€‚ ä¼šçœ‹ä¸€ä¸‹é‡Œé¢æ˜¯å¦æœ‰è‡ªå®šä¹‰çš„ prop å’Œ event ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šè¢«è§£ææˆ value + input çš„è¯­æ³•ç³–</p></li></ul></li></ul><h3 id="_27-vue-ä¸­-sync-ä¿®é¥°ç¬¦çš„ä½œç”¨-ç”¨æ³•åŠå®ç°åŸç†" tabindex="-1">27.Vue ä¸­.sync ä¿®é¥°ç¬¦çš„ä½œç”¨ï¼Œç”¨æ³•åŠå®ç°åŸç† <a class="header-anchor" href="#_27-vue-ä¸­-sync-ä¿®é¥°ç¬¦çš„ä½œç”¨-ç”¨æ³•åŠå®ç°åŸç†" aria-label="Permalink to &quot;27.Vue ä¸­.sync ä¿®é¥°ç¬¦çš„ä½œç”¨ï¼Œç”¨æ³•åŠå®ç°åŸç†&quot;">â€‹</a></h3><ul><li>å’Œ v-model ä¸€æ ·ï¼Œè¿™ä¸ª api æ˜¯ä¸ºäº†å®ç°çŠ¶æ€åŒæ­¥çš„ï¼Œ è¿™ä¸ªä¸œè¥¿åœ¨ vue3 ä¸­è¢«ç§»é™¤äº†</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	with</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#61AFEF;"> _c</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;my&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">			attrs</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">				xx</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">info</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">			},</span></span>
<span class="line"><span style="color:#E06C75;">			on</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#98C379;">				&quot;update:xx&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">$event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">					info</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> $event</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#ABB2BF;">			},</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_25-vue-use-æ˜¯å¹²ä»€ä¹ˆçš„-åŸç†æ˜¯ä»€ä¹ˆ" tabindex="-1">25.Vue.use æ˜¯å¹²ä»€ä¹ˆçš„ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#_25-vue-use-æ˜¯å¹²ä»€ä¹ˆçš„-åŸç†æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;25.Vue.use æ˜¯å¹²ä»€ä¹ˆçš„ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h3><ul><li>è¿™é‡Œçš„ use æ–¹æ³• ç›®çš„å°±æ˜¯å°† vue çš„æ„é€ å‡½æ•°ä¼ é€’ç»™æ’ä»¶ä¸­ï¼Œè®©æ‰€æœ‰çš„æ’ä»¶ä¾èµ–çš„ Vue æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬</li><li>é»˜è®¤è°ƒç”¨æ’ä»¶ é»˜è®¤è°ƒç”¨æ’ä»¶çš„ install æ–¹æ³•</li><li>vue-router å’Œ vuex é‡Œé¢çš„ package çš„ä¾èµ–é‡Œé¢æ²¡æœ‰ vue æ˜¯å§ã€‚æ˜¯é€šè¿‡å‚æ•°ç©¿è¿›å»çš„</li></ul><h3 id="_30-ç»„ä»¶ä¸­å†™-name-é€‰é¡¹æœ‰å“ªäº›å¥½å¤„åŠä½œç”¨" tabindex="-1">30.ç»„ä»¶ä¸­å†™ name é€‰é¡¹æœ‰å“ªäº›å¥½å¤„åŠä½œç”¨ï¼Ÿ <a class="header-anchor" href="#_30-ç»„ä»¶ä¸­å†™-name-é€‰é¡¹æœ‰å“ªäº›å¥½å¤„åŠä½œç”¨" aria-label="Permalink to &quot;30.ç»„ä»¶ä¸­å†™ name é€‰é¡¹æœ‰å“ªäº›å¥½å¤„åŠä½œç”¨ï¼Ÿ&quot;">â€‹</a></h3><h4 id="å¯ä»¥å®ç°é€’å½’ç»„ä»¶" tabindex="-1">å¯ä»¥å®ç°é€’å½’ç»„ä»¶ <a class="header-anchor" href="#å¯ä»¥å®ç°é€’å½’ç»„ä»¶" aria-label="Permalink to &quot;å¯ä»¥å®ç°é€’å½’ç»„ä»¶&quot;">â€‹</a></h4><ul><li>åœ¨ vue ä¸­æœ‰ name å±æ€§çš„ç»„ä»¶å¯ä»¥è¢«é€’å½’è°ƒç”¨ ï¼ˆåœ¨å†™æ¨¡æ¿è¯­æ³•çš„æ—¶å€™ æˆ‘ä»¬å¯ä»¥é€šè¿‡ name å±æ€§æ¥é€’å½’è°ƒç”¨è‡ªå·±ï¼‰</li><li>åœ¨å£°æ˜ç»„ä»¶çš„æ—¶å€™ <code>Sub.options.components[name] = Sub</code></li></ul><h4 id="èµ·åˆ°æ ‡è¯†ä½œç”¨" tabindex="-1">èµ·åˆ°æ ‡è¯†ä½œç”¨ <a class="header-anchor" href="#èµ·åˆ°æ ‡è¯†ä½œç”¨" aria-label="Permalink to &quot;èµ·åˆ°æ ‡è¯†ä½œç”¨&quot;">â€‹</a></h4><ul><li>æˆ‘ä»¬ç”¨æ¥æ ‡è¯†ç»„ä»¶ é€šè¿‡ name æ¥æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ . è‡ªå·±å°è£…è·¨çº§é€šä¿¡</li><li>name å±æ€§å¯ä»¥ç”¨ä½œ devtool è°ƒè¯•å·¥å…· æ¥æ ‡æ˜å…·ä½“çš„ç»„ä»¶</li></ul><h3 id="_24-vue-ä¸­-slot-æ˜¯å¦‚ä½•å®ç°çš„-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ" tabindex="-1">24.Vue ä¸­ slot æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒï¼Ÿ <a class="header-anchor" href="#_24-vue-ä¸­-slot-æ˜¯å¦‚ä½•å®ç°çš„-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ" aria-label="Permalink to &quot;24.Vue ä¸­ slot æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒï¼Ÿ&quot;">â€‹</a></h3><ul><li><p>æ™®é€šæ’æ§½ ï¼ˆæ™®é€šæ’æ§½æ¸²æŸ“ä½œç”¨åŸŸåœ¨çˆ¶ç»„ä»¶ä¸­çš„ï¼‰</p><ul><li>åœ¨è§£æç»„ä»¶çš„æ—¶å€™ä¼šå°†ç»„ä»¶çš„ children æ”¾åˆ° componentOptions ä¸Šä½œä¸ºè™šæ‹ŸèŠ‚ç‚¹çš„å±æ€§</li><li>å°† children å–å‡ºæ¥æ”¾åˆ°ç»„ä»¶çš„ <code>vm.$options.\\_renderChildren</code> ä¸­</li><li>åšå‡ºä¸€ä¸ªæ˜ å°„è¡¨æ”¾åˆ° <code>vm.$slots</code>ä¸Š -&gt; å°†ç»“æœæ”¾åˆ° <code>vm.$scopeSlots</code> ä¸Š <code>vm.$scopeSlots = {a:fn,b:fn,default:fn}</code></li><li>æ¸²æŸ“ç»„ä»¶çš„æ—¶å€™ä¼šè°ƒç”¨ <code>_t</code> æ–¹æ³• æ­¤æ—¶ä¼šå» <code>vm.$scopeSlots</code> æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥æ¸²æŸ“å†…å®¹</li></ul></li><li><p>å…·åæ’æ§½ å¤šå¢åŠ äº†ä¸ªåå­—</p></li><li><p>ä½œç”¨åŸŸæ’æ§½ï¼ˆæ™®é€šæ’æ§½æ¸²æŸ“ä½œç”¨åŸŸåœ¨å­ç»„ä»¶ä¸­çš„ï¼‰</p><ul><li>æˆ‘ä»¬æ¸²æŸ“æ’æ§½é€‰æ‹©çš„ä½œç”¨åŸŸæ˜¯å­ç»„ä»¶çš„ ä½œç”¨åŸŸæ’æ§½æ¸²æŸ“çš„æ—¶å€™ä¸ä¼šä½œä¸º children, å°†ä½œç”¨åŸŸæ’æ§½åšæˆäº†ä¸€ä¸ªå±æ€§ scopedSlots</li><li>åˆ¶ä½œä¸€ä¸ªæ˜ å°„å…³ç³» <code>$scopedSlots = {default:fn:function({msg}){return \\_c(&#39;div&#39;,{},[_v(_s(msg))])}}}</code></li><li>ç¨åæ¸²æŸ“ç»„ä»¶çš„æ¨¡æ¿çš„æ—¶å€™ ä¼šé€šè¿‡ name æ‰¾åˆ°å¯¹åº”çš„å‡½æ•° å°†æ•°æ®ä¼ å…¥åˆ°å‡½æ•°ä¸­æ­¤æ—¶æ‰æ¸²æŸ“è™šæ‹ŸèŠ‚ç‚¹ï¼Œ ç”¨è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ›¿æ¢_t(&#39;default&#39;)</li></ul></li></ul><blockquote><p><code>vm.$scopeSlots {key:fn} vm.$slots = {key:[vnode]}</code></p></blockquote><h3 id="_29-keep-alive-å¹³æ—¶åœ¨å“ªé‡Œä½¿ç”¨-åŸç†æ˜¯" tabindex="-1">29.keep-alive å¹³æ—¶åœ¨å“ªé‡Œä½¿ç”¨ï¼ŸåŸç†æ˜¯ï¼Ÿ <a class="header-anchor" href="#_29-keep-alive-å¹³æ—¶åœ¨å“ªé‡Œä½¿ç”¨-åŸç†æ˜¯" aria-label="Permalink to &quot;29.keep-alive å¹³æ—¶åœ¨å“ªé‡Œä½¿ç”¨ï¼ŸåŸç†æ˜¯ï¼Ÿ&quot;">â€‹</a></h3><ul><li><p>1.keep-alive åœ¨è·¯ç”±ä¸­ä½¿ç”¨</p></li><li><p>2.åœ¨ component:is ä¸­ä½¿ç”¨ ï¼ˆç¼“å­˜ï¼‰</p></li><li><p>keep-alive çš„åŸç†æ˜¯é»˜è®¤ç¼“å­˜åŠ è½½è¿‡çš„ç»„ä»¶å¯¹åº”çš„å®ä¾‹ å†…éƒ¨é‡‡ç”¨äº† LRU ç®—æ³•</p></li><li><p>ä¸‹æ¬¡ç»„ä»¶åˆ‡æ¢åŠ è½½çš„æ—¶å€™ æ­¤æ—¶ä¼šæ‰¾åˆ°å¯¹åº”ç¼“å­˜çš„èŠ‚ç‚¹æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œä½†æ˜¯ä¼šé‡‡ç”¨ä¸Šæ¬¡ç¼“å­˜$el æ¥è§¦å‘ ï¼ˆä¸ç”¨åœ¨åšå°†è™šæ‹ŸèŠ‚ç‚¹è½¬åŒ–æˆçœŸå®èŠ‚ç‚¹äº†ï¼‰ é€šè¿‡ init -ã€‹ prepatch ä¸­äº†</p></li><li><p>æ›´æ–°å’Œé”€æ¯ä¼šè§¦å‘ actived å’Œ deactived</p></li></ul><h3 id="_28-å¦‚ä½•ç†è§£è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1">28.å¦‚ä½•ç†è§£è‡ªå®šä¹‰æŒ‡ä»¤ <a class="header-anchor" href="#_28-å¦‚ä½•ç†è§£è‡ªå®šä¹‰æŒ‡ä»¤" aria-label="Permalink to &quot;28.å¦‚ä½•ç†è§£è‡ªå®šä¹‰æŒ‡ä»¤&quot;">â€‹</a></h3><ul><li>è‡ªå®šä¹‰æŒ‡ä»¤å°±æ˜¯ç”¨æˆ·å®šä¹‰å¥½å¯¹åº”çš„é’©å­ï¼Œå½“å…ƒç´ åœ¨ä¸åŒçš„çŠ¶æ€æ—¶ä¼šè°ƒç”¨å¯¹åº”çš„é’©å­ ï¼ˆæ‰€æœ‰çš„é’©å­ä¼šè¢«åˆå¹¶åˆ° cbs å¯¹åº”çš„æ–¹æ³•ä¸Šï¼Œ åˆ°æ—¶å€™ä¾æ¬¡è°ƒç”¨ï¼‰</li></ul><h3 id="_26-vue-äº‹ä»¶ä¿®é¥°ç¬¦æœ‰å“ªäº›-å…¶å®ç°åŸç†æ˜¯ä»€ä¹ˆ" tabindex="-1">26.Vue äº‹ä»¶ä¿®é¥°ç¬¦æœ‰å“ªäº›ï¼Ÿå…¶å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#_26-vue-äº‹ä»¶ä¿®é¥°ç¬¦æœ‰å“ªäº›-å…¶å®ç°åŸç†æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;26.Vue äº‹ä»¶ä¿®é¥°ç¬¦æœ‰å“ªäº›ï¼Ÿå…¶å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h3><ul><li>å®ç°ä¸»è¦é çš„æ˜¯æ¨¡æ¿ç¼–è¯‘åŸç† addEventListener( stop , defaultPrevent ) self capture passvie once</li><li>.number</li></ul><h4 id="ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ç¼–è¯‘åˆ°äº‹ä»¶å†…éƒ¨äº†" tabindex="-1">ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ç¼–è¯‘åˆ°äº‹ä»¶å†…éƒ¨äº† <a class="header-anchor" href="#ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ç¼–è¯‘åˆ°äº‹ä»¶å†…éƒ¨äº†" aria-label="Permalink to &quot;ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ç¼–è¯‘åˆ°äº‹ä»¶å†…éƒ¨äº†&quot;">â€‹</a></h4><ul><li><code>&lt;div @click.prevent&gt;&lt;/div&gt;</code></li><li><code>&lt;div @click.stop&gt;&lt;/div&gt; </code></li></ul><h4 id="ç¼–è¯‘çš„æ—¶å€™å¢åŠ æ ‡è¯†" tabindex="-1">ç¼–è¯‘çš„æ—¶å€™å¢åŠ æ ‡è¯† !~&amp; <a class="header-anchor" href="#ç¼–è¯‘çš„æ—¶å€™å¢åŠ æ ‡è¯†" aria-label="Permalink to &quot;ç¼–è¯‘çš„æ—¶å€™å¢åŠ æ ‡è¯† !~&amp;&quot;">â€‹</a></h4><ul><li><code>&lt;div @click.passive&gt;&lt;/div&gt;</code></li><li><code>&lt;div @click.capture&gt;&lt;/div&gt;</code></li><li><code>&lt;div @click.one&gt;&lt;/div&gt;</code></li></ul><h4 id="é”®ç›˜äº‹ä»¶" tabindex="-1">é”®ç›˜äº‹ä»¶ <a class="header-anchor" href="#é”®ç›˜äº‹ä»¶" aria-label="Permalink to &quot;é”®ç›˜äº‹ä»¶&quot;">â€‹</a></h4><ul><li>éƒ½æ˜¯é€šè¿‡æ¨¡æ¿ç¼–è¯‘æ¥å®ç°çš„ï¼Œæ²¡æœ‰ç‰¹æ®Šçš„</li></ul><h2 id="object-defineproperty-ç¼ºç‚¹" tabindex="-1">Object.defineProperty ç¼ºç‚¹ <a class="header-anchor" href="#object-defineproperty-ç¼ºç‚¹" aria-label="Permalink to &quot;Object.defineProperty ç¼ºç‚¹&quot;">â€‹</a></h2><ul><li>æ·±åº¦ç›‘å¬ï¼Œéœ€è¦é€’å½’åˆ°åº•ï¼Œä¸€æ¬¡æ€§è®¡ç®—é‡å¤§</li><li>æ— æ³•ç›‘å¬æ–°å¢å±æ€§/åˆ é™¤å±æ€§( éœ€è¦ï¼šVue.setã€Vue.delete )</li></ul>`,496))])}const Ds=e(bs,[["render",us]]);export{hs as __pageData,Ds as default};
