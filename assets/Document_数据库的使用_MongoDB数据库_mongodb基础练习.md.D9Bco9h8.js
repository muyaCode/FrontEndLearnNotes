import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.DqD713j2.js";const o="/FrontEndLearnNotes/assets/location.DrGrXmME.jpg",d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Document/数据库的使用/MongoDB数据库/mongodb基础练习.md","filePath":"Document/数据库的使用/MongoDB数据库/mongodb基础练习.md","lastUpdated":1750954157000}'),e={name:"Document/数据库的使用/MongoDB数据库/mongodb基础练习.md"};function r(t,s,c,B,i,y){return l(),a("div",null,s[0]||(s[0]=[p(`<h3 id="准备开始" tabindex="-1">准备开始 <a class="header-anchor" href="#准备开始" aria-label="Permalink to &quot;准备开始&quot;">​</a></h3><hr><h4 id="mongodb" tabindex="-1">MongoDB <a class="header-anchor" href="#mongodb" aria-label="Permalink to &quot;MongoDB&quot;">​</a></h4><ul><li><p>一个数据库对应多个集合</p><ul><li>一个集合对应多个文档对象</li><li>在 mongo 中不论是 db 还是集合，你都无需去创建他</li><li>直接就当他已经存在，直接 Use 来使用 <ul><li>use db 名称; <ul><li>接着会被切换到该 db 中</li><li><code>db.要创建的集合名称.save({})</code>;这样集合就被创建了</li></ul></li></ul></li></ul></li><li><p><strong>解决 32 位异常</strong> mongod --dbpath=&quot;路径&quot; --journal --storageEngine=mmapv1</p></li><li><p>1:启动服务器</p><ul><li><code>mongod --dbpath &quot;D:/mongodb/db&quot;</code> // 目录一定要存在自己创建随便名称‘ <ul><li>尽量设置在非系统盘 <code>C盘生成目录是需要权限的</code></li></ul></li><li>如果看到<code>waiting for connections on port 27017</code>说明服务已经启动</li></ul></li><li><p>客户端连接服务器<strong>另开一个命令行</strong></p><ul><li><code>mongo</code> 默认连接的是 test 数据库</li></ul></li><li><p>查询有哪些数据库</p><ul><li>查询数据库：<code>show dbs;</code></li><li>切换数据库: <code>use 数据库名;</code></li></ul></li><li><p>查询当前 db 下有哪些集合</p><ul><li><code>show collections;</code></li></ul></li><li><p>查询数据：</p><ul><li><code>db.集合名.find();</code> //查询出来的是文档对象 document</li><li><code>db.users.find();</code></li></ul></li><li><p>添加数据:</p><ul><li><code>db.集合名.save(对象)</code> //mongo 默认会给我们加入_id 作为该文档对象的唯一标识</li><li><code>db.users.save({contry:&#39;中国&#39;,name:&#39;小明&#39;,score:77});</code></li></ul></li><li><p>删除数据:</p><ul><li><code>db.集合名.remove(条件对象);</code>//条件匹配就会被删除</li><li><code>db.users.remove({name:&#39;小明&#39;});</code></li><li>如果给定一个空对像，会匹配全部</li></ul></li><li><p>更新数据:</p><ul><li><code>db.集合名.update({匹配条件对象},{$set:{修改后的对象}});</code></li><li><code>db.users.update({name:&#39;小明&#39;},{$set:{contry:&#39;印度&#39;}});;</code></li></ul></li></ul><h4 id="条件查询" tabindex="-1">条件查询 <a class="header-anchor" href="#条件查询" aria-label="Permalink to &quot;条件查询&quot;">​</a></h4><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>练习：</span></span>
<span class="line"><span>  查询姓名为小明的学生</span></span>
<span class="line"><span>        db.users.find({name:&#39;小明&#39;});;   查询英语成绩大于90分的同学</span></span>
<span class="line"><span>        db.users.find({score:{$gt:90}}); //查找成绩大于90分$gt</span></span>
<span class="line"><span>        //$lt小于</span></span>
<span class="line"><span> 查询数学成绩不等于88的同学</span></span>
<span class="line"><span>        db.users.find({score:{$ne:88}});   查询总分大于200分的所有同学</span></span>
<span class="line"><span>        db.users.find({score:{$gt:200}});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="分页" tabindex="-1">分页 <a class="header-anchor" href="#分页" aria-label="Permalink to &quot;分页&quot;">​</a></h4><ul><li><code>db.users.find().skip(3).limit(3);</code></li><li>db.集合名称.find().跳到 3.显示 3 条 + limit 0,3</li></ul><h4 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-label="Permalink to &quot;排序&quot;">​</a></h4><ul><li><code>db.users.find().sort({key:排序方式});</code></li><li><code>db.users.find().sort({&#39;score&#39;:1});</code> //正数代表升序，负数代表降序</li></ul><h4 id="模糊匹配" tabindex="-1">模糊匹配 <a class="header-anchor" href="#模糊匹配" aria-label="Permalink to &quot;模糊匹配&quot;">​</a></h4><ul><li><code>db.users.find({name:{$regex:&#39;小&#39;}});</code></li><li><code>db.users.find({name:{$regex:&#39;明&#39;}});</code></li></ul><h4 id="聚合函数" tabindex="-1">聚合函数 <a class="header-anchor" href="#聚合函数" aria-label="Permalink to &quot;聚合函数&quot;">​</a></h4><ul><li>需要求当前集合的记录数：</li><li><code>db.users.find().count();</code></li><li>求最大值 -求整个集合的总成绩 + db.集合名.聚合({ 组的划分规则{_id:&#39;1&#39;,显示内容:{$sum:&#39;$score&#39;}} }) <ul><li>求所有人的平均分 <ul><li><code>db.users.aggregate({$group:{_id:&#39;1&#39;,sumscore:{$avg:&#39;$score&#39; } }});</code></li></ul></li><li>求按国家分组，求所有国家的总分 <ul><li><code>db.users.aggregate({$group:{_id:&#39;$contry&#39;,sumScore:{$sum:&#39;$score&#39;}}});</code></li></ul></li></ul></li><li>添加基础数据: db.users.save({contry:&#39;中国&#39;,name:&#39;小明&#39;,score:77}); db.users.save({contry:&#39;中国&#39;,name:&#39;小红&#39;,score:88}); db.users.save({contry:&#39;中国&#39;,name:&#39;小张&#39;,score:99}); db.users.save({contry:&#39;美国&#39;,name:&#39;jack&#39;,score:45}); db.users.save({contry:&#39;美国&#39;,name:&#39;rose&#39;,score:67}); db.users.save({contry:&#39;美国&#39;,name:&#39;mick&#39;,score:89});</li></ul><h4 id="联合查询" tabindex="-1">联合查询 <a class="header-anchor" href="#联合查询" aria-label="Permalink to &quot;联合查询&quot;">​</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">orders</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;almonds&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">price</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">quantity</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;pecans&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">price</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">quantity</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">inventory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sku</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;almonds&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;product 1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">instock</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">120</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sku</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;bread&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;product 2&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">instock</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">80</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sku</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;cashews&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;product 3&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">instock</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sku</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;pecans&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;product 4&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">instock</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">70</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sku</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Incomplete&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	{ </span><span style="color:#E06C75;">_id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">6</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">orders</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">aggregate</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#E06C75;">		$lookup</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			from</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;inventory&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			localField</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;item&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			foreignField</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;sku&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			as</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;inventory_docs&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="操作符" tabindex="-1">操作符 <a class="header-anchor" href="#操作符" aria-label="Permalink to &quot;操作符&quot;">​</a></h4><ul><li><a href="https://docs.mongodb.com/manual/reference/operator/" target="_blank" rel="noreferrer">https://docs.mongodb.com/manual/reference/operator/</a></li></ul><h4 id="配置-https" tabindex="-1">配置 https <a class="header-anchor" href="#配置-https" aria-label="Permalink to &quot;配置 https&quot;">​</a></h4><ul><li>公钥 公开的加密方式</li><li>私钥 存在服务器的唯一解公钥加密的方式</li><li>签名 确保数据的一致性</li><li>证书 确保当前发送数据单位可信</li></ul><h4 id="扩展知识-使用-mongodb-实现附近的人" tabindex="-1">扩展知识（使用 mongodb 实现附近的人） <a class="header-anchor" href="#扩展知识-使用-mongodb-实现附近的人" aria-label="Permalink to &quot;扩展知识（使用 mongodb 实现附近的人）&quot;">​</a></h4><p><img src="`+o+`" alt="location"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 创建索引</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createIndex</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">sp</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;2dsphere&quot;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;A&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.754</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.689</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;B&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.304</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.783</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;C&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.084</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.389</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;D&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.831</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.285</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;E&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">106.128</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">42.086</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;F&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.431</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">42.009</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;G&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">104.705</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.921</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="查找附近的人" tabindex="-1">查找附近的人 <a class="header-anchor" href="#查找附近的人" aria-label="Permalink to &quot;查找附近的人&quot;">​</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	sp</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		$nearSphere</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			$geometry</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">				type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.304</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.783</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">			},</span></span>
<span class="line"><span style="color:#E06C75;">			$minDistance</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">25000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			$maxDistance</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">40000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="离我最近" tabindex="-1">离我最近 <a class="header-anchor" href="#离我最近" aria-label="Permalink to &quot;离我最近&quot;">​</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">test</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">aggregate</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	$geoNear</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		near</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Point&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">coordinates</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">105.304</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41.783</span><span style="color:#ABB2BF;">] },</span></span>
<span class="line"><span style="color:#E06C75;">		distanceField</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;dist.calculated&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		spherical</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		maxDistance</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">40000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>经纬度查询网站</p><ul><li><a href="http://www.gpsspg.com/maps.htm" target="_blank" rel="noreferrer">http://www.gpsspg.com/maps.htm</a></li></ul>`,29)]))}const b=n(e,[["render",r]]);export{d as __pageData,b as default};
