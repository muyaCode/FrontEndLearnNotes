import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.DqD713j2.js";const u=JSON.parse('{"title":"Pinia çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨","description":"","frontmatter":{},"headers":[],"relativePath":"Document/å‰ç«¯ä¸»æµå¼€å‘æ¡†æ¶/Vue/Vueå¼€å‘åº“/pinia.md","filePath":"Document/å‰ç«¯ä¸»æµå¼€å‘æ¡†æ¶/Vue/Vueå¼€å‘åº“/pinia.md","lastUpdated":1750954157000}'),e={name:"Document/å‰ç«¯ä¸»æµå¼€å‘æ¡†æ¶/Vue/Vueå¼€å‘åº“/pinia.md"};function o(t,s,r,c,B,i){return l(),a("div",null,s[0]||(s[0]=[p(`<h1 id="pinia-çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨" tabindex="-1">Pinia çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨ <a class="header-anchor" href="#pinia-çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨" aria-label="Permalink to &quot;Pinia çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨&quot;">â€‹</a></h1><h2 id="ä¸€ã€ç½‘ç«™ç›¸å…³" tabindex="-1">ä¸€ã€ç½‘ç«™ç›¸å…³ <a class="header-anchor" href="#ä¸€ã€ç½‘ç«™ç›¸å…³" aria-label="Permalink to &quot;ä¸€ã€ç½‘ç«™ç›¸å…³&quot;">â€‹</a></h2><p>GitHubï¼š<a href="https://github.com/vuejs/pinia" target="_blank" rel="noreferrer">vuejs/pinia: ğŸ</a></p><p>å®˜ç½‘ï¼š<a href="https://pinia.vuejs.org/" target="_blank" rel="noreferrer">Home | Pinia (vuejs.org)</a></p><p>ä¸­æ–‡ç½‘ï¼š<a href="https://pinia.web3doc.top/" target="_blank" rel="noreferrer">Home | Pinia ä¸­æ–‡æ–‡æ¡£ (web3doc.top)</a></p><h2 id="äºŒã€å…¶ä»–å­¦ä¹ æ–‡ç« " tabindex="-1">äºŒã€å…¶ä»–å­¦ä¹ æ–‡ç«  <a class="header-anchor" href="#äºŒã€å…¶ä»–å­¦ä¹ æ–‡ç« " aria-label="Permalink to &quot;äºŒã€å…¶ä»–å­¦ä¹ æ–‡ç« &quot;">â€‹</a></h2><p><a href="https://juejin.cn/post/7139724486625984543" target="_blank" rel="noreferrer">2k å­—è½»æ¾å…¥é—¨ Pinia - æ˜é‡‘</a><a href="https://juejin.cn/post/7078281612013764616" target="_blank" rel="noreferrer">å¤§è èï¼ŸPinia å·²ç»æ¥äº†ï¼Œå†ä¸å­¦ä½ å°± out äº† - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7049196967770980389" target="_blank" rel="noreferrer">æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†å·¥å…·ï¼ŒPinia.js ä¸Šæ‰‹æŒ‡å— - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7057439040911441957" target="_blank" rel="noreferrer">Pinia è¿›é˜¶ï¼šä¼˜é›…çš„ setupï¼ˆå‡½æ•°å¼ï¼‰å†™æ³•+å°è£…åˆ°ä½ çš„ä¼ä¸šé¡¹ç›® - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7123488184930926623" target="_blank" rel="noreferrer">2022 å¹´äº†ï¼Œæ‡‚ vue3 çš„ä¹Ÿè¯¥å­¦ä¸€æ³¢ pinia äº† - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7119832691339444255" target="_blank" rel="noreferrer">Vue æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†å·¥å…·â€”â€”Pinia - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7134968684342165512" target="_blank" rel="noreferrer">æ¯” vuex é¦™çš„ ğŸpinia æœ€å¿«é€Ÿå…¥é—¨æŒ‡å— - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7121209657678364685" target="_blank" rel="noreferrer">ä¸€æ–‡è§£æ Pinia å’Œ Vuexï¼Œå¸¦ä½ å…¨é¢ç†è§£è¿™ä¸¤ä¸ª Vue çŠ¶æ€ç®¡ç†æ¨¡å¼ - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7068113574043844622" target="_blank" rel="noreferrer">æˆ‘æŠŠ vue3 é¡¹ç›®ä¸­çš„ vuex å»é™¤äº†ï¼Œæ”¹ç”¨ pinia - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7075491793642455077" target="_blank" rel="noreferrer">ä¸Šæ‰‹ Vue æ–°çš„çŠ¶æ€ç®¡ç† Piniaï¼Œä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº† - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7006108454028836895" target="_blank" rel="noreferrer">Vue3.2 setup è¯­æ³•ç³–ã€Composition APIã€çŠ¶æ€åº“ Pinia å½’çº³æ€»ç»“ - æ˜é‡‘ (juejin.cn)</a></p><p><a href="https://juejin.cn/post/7054481067297734693" target="_blank" rel="noreferrer">å¯çˆ±åˆç®€æ´è½»é‡çš„ Piniaï¼Œä½ ç¡®å®šä¸ä½¿ç”¨å—ï¼Ÿ - æ˜é‡‘ (juejin.cn)</a></p><hr><h2 id="ä¸‰ã€åŸºæœ¬ç‰¹ç‚¹" tabindex="-1">ä¸‰ã€åŸºæœ¬ç‰¹ç‚¹ <a class="header-anchor" href="#ä¸‰ã€åŸºæœ¬ç‰¹ç‚¹" aria-label="Permalink to &quot;ä¸‰ã€åŸºæœ¬ç‰¹ç‚¹&quot;">â€‹</a></h2><p><code>Pinia</code>åŒæ ·æ˜¯ä¸€ä¸ª Vue çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œåœ¨<code>Vuex</code>çš„åŸºç¡€ä¸Šæå‡ºäº†ä¸€äº›æ”¹è¿›ã€‚ä¸ vuex ç›¸æ¯”ï¼Œ<code>Pinia</code> æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼šç®€ä¾¿ã€‚</p><ul><li>å®ƒæ²¡æœ‰<code>mutation</code>,ä»–åªæœ‰<code>state</code>ï¼Œ<code>getters</code>ï¼Œ<code>action</code>,åœ¨<code>action</code>ä¸­æ”¯æŒåŒæ­¥ä¸å¼‚æ­¥æ–¹æ³•æ¥ä¿®æ”¹<code>state</code>æ•°æ®</li><li>ç±»å‹å®‰å…¨ï¼Œä¸ <code>TypeScript</code> ä¸€èµ·ä½¿ç”¨æ—¶å…·æœ‰å¯é çš„ç±»å‹æ¨æ–­æ”¯æŒ</li><li>æ¨¡å—åŒ–è®¾è®¡ï¼Œé€šè¿‡æ„å»ºå¤šä¸ªå­˜å‚¨æ¨¡å—ï¼Œå¯ä»¥è®©ç¨‹åºè‡ªåŠ¨æ‹†åˆ†å®ƒä»¬ã€‚</li><li>éå¸¸è½»å·§ï¼Œåªæœ‰å¤§çº¦ 1kb çš„å¤§å°ã€‚</li><li>ä¸å†æœ‰ <code>modules</code> çš„åµŒå¥—ç»“æ„,æ²¡æœ‰å‘½åç©ºé—´æ¨¡å—</li><li><code>Pinia</code> æ”¯æŒæ‰©å±•ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é€šè¿‡æœ¬åœ°å­˜å‚¨ï¼Œäº‹ç‰©ç­‰è¿›è¡Œæ‰©å±•ã€‚</li><li>æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“</li></ul><h2 id="å››ã€å®‰è£…ä¸ä½¿ç”¨" tabindex="-1">å››ã€å®‰è£…ä¸ä½¿ç”¨ <a class="header-anchor" href="#å››ã€å®‰è£…ä¸ä½¿ç”¨" aria-label="Permalink to &quot;å››ã€å®‰è£…ä¸ä½¿ç”¨&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…" tabindex="-1">1.å®‰è£… <a class="header-anchor" href="#_1-å®‰è£…" aria-label="Permalink to &quot;1.å®‰è£…&quot;">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> add</span><span style="color:#98C379;"> pinia</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># æˆ–è€…ä½¿ç”¨ npm</span></span>
<span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> pinia</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">2.æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#_2-æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;2.æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h3><h5 id="store-ä½¿ç”¨definestore-å‡½æ•°å®šä¹‰ä¸€ä¸ª-store-ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­-store-çš„å”¯ä¸€-id-é‡Œé¢åŒ…å«stateã€getters-å’Œ-actions-ä¸-vuex-ç›¸æ¯”æ²¡æœ‰äº†mutations" tabindex="-1"><code>store</code>: ä½¿ç”¨<code>defineStore()</code>å‡½æ•°å®šä¹‰ä¸€ä¸ª storeï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­ store çš„å”¯ä¸€ id. é‡Œé¢åŒ…å«<code>state</code>ã€<code>getters</code> å’Œ <code>actions</code>, ä¸ Vuex ç›¸æ¯”æ²¡æœ‰äº†<code>Mutations</code> <a class="header-anchor" href="#store-ä½¿ç”¨definestore-å‡½æ•°å®šä¹‰ä¸€ä¸ª-store-ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­-store-çš„å”¯ä¸€-id-é‡Œé¢åŒ…å«stateã€getters-å’Œ-actions-ä¸-vuex-ç›¸æ¯”æ²¡æœ‰äº†mutations" aria-label="Permalink to &quot;\`store\`: ä½¿ç”¨\`defineStore()\`å‡½æ•°å®šä¹‰ä¸€ä¸ª storeï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­ store çš„å”¯ä¸€ id. é‡Œé¢åŒ…å«\`state\`ã€\`getters\` å’Œ \`actions\`, ä¸ Vuex ç›¸æ¯”æ²¡æœ‰äº†\`Mutations\`&quot;">â€‹</a></h5><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;main&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;ming&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			doubleCount</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	getters</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>æ³¨æ„ï¼šstore æ˜¯ä¸€ä¸ªç”¨ reactive åŒ…è£¹çš„å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦åœ¨ getter ä¹‹åå†™.valueï¼Œä½†æ˜¯ï¼Œå°±åƒ setup ä¸­çš„ props ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸èƒ½å¯¹å…¶è¿›è¡Œè§£æ„.</p></blockquote><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineComponent</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#61AFEF;">	setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> store</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// âŒ è¿™ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºå®ƒä¼šç ´åå“åº”å¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿™å’Œä» props è§£æ„æ˜¯ä¸€æ ·çš„</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">doubleCount</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> store</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ä¸€ç›´ä¼šæ˜¯ &quot;ming&quot;</span></span>
<span class="line"><span style="color:#E06C75;">			name</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// ä¸€ç›´ä¼šæ˜¯ 2</span></span>
<span class="line"><span style="color:#E06C75;">			doubleCount</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// è¿™å°†æ˜¯å“åº”å¼çš„</span></span>
<span class="line"><span style="color:#E06C75;">			doubleValue</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">doubleCount</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>å½“ç„¶ä½ å¯ä»¥ä½¿ç”¨<code>computed</code>æ¥å“åº”å¼çš„è·å– state çš„å€¼ï¼ˆè¿™ä¸ Vuex ä¸­éœ€è¦åˆ›å»º<code>computed</code>å¼•ç”¨ä»¥ä¿ç•™å…¶å“åº”æ€§ç±»ä¼¼ï¼‰,ä½†æ˜¯æˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨<code>storeToRefs</code>å“åº”å¼è§£æ„ Store.</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> store</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ­£ç¡®çš„å“åº”å¼è§£æ„</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">doubleCount</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> storeToRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="state-åœ¨-pinia-ä¸­-çŠ¶æ€è¢«å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°" tabindex="-1"><code>State</code>: åœ¨ Pinia ä¸­ï¼ŒçŠ¶æ€è¢«å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•° <a class="header-anchor" href="#state-åœ¨-pinia-ä¸­-çŠ¶æ€è¢«å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°" aria-label="Permalink to &quot;\`State\`: åœ¨ Pinia ä¸­ï¼ŒçŠ¶æ€è¢«å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°&quot;">â€‹</a></h5><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> useStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;main&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// æ¨èä½¿ç”¨ å®Œæ•´ç±»å‹æ¨æ–­çš„ç®­å¤´å‡½æ•°</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// æ‰€æœ‰è¿™äº›å±æ€§éƒ½å°†è‡ªåŠ¨æ¨æ–­å…¶ç±»å‹</span></span>
<span class="line"><span style="color:#E06C75;">			counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">			name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Eduardo&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		};</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h6 id="ç»„ä»¶ä¸­-state-çš„è·å–ä¸ä¿®æ”¹" tabindex="-1">ç»„ä»¶ä¸­ state çš„è·å–ä¸ä¿®æ”¹ <a class="header-anchor" href="#ç»„ä»¶ä¸­-state-çš„è·å–ä¸ä¿®æ”¹" aria-label="Permalink to &quot;ç»„ä»¶ä¸­ state çš„è·å–ä¸ä¿®æ”¹&quot;">â€‹</a></h6><p>åœ¨<code>Vuex</code>ä¸­æˆ‘ä»¬ä¿®æ”¹<code>state</code>çš„å€¼å¿…é¡»åœ¨<code>mutation</code>ä¸­å®šä¹‰æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œè€Œåœ¨<code>pinia</code>ä¸­æˆ‘ä»¬æœ‰å¤šä¸­ä¿®æ”¹ state çš„æ–¹å¼.</p><ul><li>åŸºæœ¬æ–¹æ³•ï¼š</li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> store</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>é‡ç½®çŠ¶æ€ï¼š</li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> store</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$reset</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>ä½¿ç”¨<code>$patch</code>ä¿®æ”¹ state [1] ä½¿ç”¨éƒ¨åˆ†<code>state</code>å¯¹è±¡è¿›è¡Œä¿®æ”¹</li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> mainStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useMainStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">mainStore</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$patch</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">	counter</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">mainStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>[2] <code>$patch</code>æ–¹æ³•ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°æ¥æ‰¹é‡ä¿®æ”¹é›†åˆå†…éƒ¨åˆ†å¯¹è±¡çš„å€¼</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">cartStore</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$patch</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">	state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &quot;test&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>æ›¿æ¢ state å¯ä»¥é€šè¿‡å°†å…¶ $state å±æ€§è®¾ç½®ä¸ºæ–°å¯¹è±¡,æ¥æ›¿æ¢<code>Store</code>çš„æ•´ä¸ªçŠ¶æ€ï¼š</li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">mainStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$state</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>è®¿é—®å…¶ä»–æ¨¡å—çš„<code>state</code></p><ul><li><code>Vuex</code>ä¸­æˆ‘ä»¬è¦è®¿é—®å…¶ä»–å¸¦å‘½åç©ºé—´çš„æ¨¡å—çš„ state æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>rootState</code></li></ul></li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">  addAsyncTabs</span><span style="color:#ABB2BF;"> ({ </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">commit</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rootState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rootGetters</span><span style="color:#ABB2BF;"> }:</span><span style="color:#E06C75;">ActionContext</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">TabsState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">RootState</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">tab</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">ITab</span><span style="color:#ABB2BF;">): </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      /// é€šè¿‡rootState è®¿é—®mainçš„æ•°æ®</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;rootState.main.count=======&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">rootState</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">main</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tabLists</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">some</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> tab</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">)) { </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#61AFEF;">      setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        state</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tabLists</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tab</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>Pinia ä¸­è®¿é—®å…¶ä»–<code>store</code>çš„<code>state</code></li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">    import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useInputStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &#39;./inputStore&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">    export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useListStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;listStore&#39;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">      state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">          itemList</span><span style="color:#ABB2BF;">: [] </span><span style="color:#C678DD;">as</span><span style="color:#E5C07B;"> IItemDate</span><span style="color:#ABB2BF;">[],</span></span>
<span class="line"><span style="color:#E06C75;">          counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#E06C75;">      getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#E06C75;">      actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">        addList</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">IItemDate</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">          this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">itemList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">          ///è·å–storeï¼Œç›´æ¥è°ƒç”¨</span></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#E5C07B;"> inputStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useInputStore</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E5C07B;">          inputStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">inputValue</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="getter-getter-å®Œå…¨ç­‰åŒäº-store-çŠ¶æ€çš„è®¡ç®—å€¼" tabindex="-1">Getter: Getter å®Œå…¨ç­‰åŒäº Store çŠ¶æ€çš„è®¡ç®—å€¼ <a class="header-anchor" href="#getter-getter-å®Œå…¨ç­‰åŒäº-store-çŠ¶æ€çš„è®¡ç®—å€¼" aria-label="Permalink to &quot;Getter: Getter å®Œå…¨ç­‰åŒäº Store çŠ¶æ€çš„è®¡ç®—å€¼&quot;">â€‹</a></h4><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;main&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#E06C75;">		counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"><span style="color:#E06C75;">	getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è‡ªåŠ¨å°†è¿”å›ç±»å‹æ¨æ–­ä¸ºæ•°å­—</span></span>
<span class="line"><span style="color:#61AFEF;">		doubleCount</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// è¿”å›ç±»å‹å¿…é¡»æ˜ç¡®è®¾ç½®</span></span>
<span class="line"><span style="color:#61AFEF;">		doublePlusOne</span><span style="color:#ABB2BF;">(): </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 2</span><span style="color:#56B6C2;"> +</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>å¦‚æœéœ€è¦ä½¿ç”¨<code>this</code>è®¿é—®åˆ° æ•´ä¸ª<code>store</code>çš„å®ä¾‹,åœ¨<code>TypeScript</code>éœ€è¦å®šä¹‰è¿”å›ç±»å‹. åœ¨<code>setup()</code>ä¸­ä½¿ç”¨ï¼š</p></blockquote><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">	setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">		const</span><span style="color:#E5C07B;"> store</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">		store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">		store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">doubleCount</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// 6</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>è®¿é—®å…¶ä»–æ¨¡å—çš„ getter</p><ul><li>å¯¹äº<code>Vuex</code>è€Œè¨€å¦‚æœè¦è®¿é—®å…¶ä»–å‘½åç©ºé—´æ¨¡å—çš„<code>getter</code>ï¼Œéœ€è¦ä½¿ç”¨<code>rootGetters</code>å±æ€§</li></ul></li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">    /// action æ–¹æ³•</span></span>
<span class="line"><span style="color:#61AFEF;">    addAsyncTabs</span><span style="color:#ABB2BF;"> ({ </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">commit</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rootState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rootGetters</span><span style="color:#ABB2BF;"> }:</span><span style="color:#E06C75;">ActionContext</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">TabsState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">RootState</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">tab</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">ITab</span><span style="color:#ABB2BF;">): </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      /// é€šè¿‡rootGetters è®¿é—®mainçš„æ•°æ®</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;rootGetters[]=======&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rootGetters</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&#39;main/getCount&#39;</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>Pinia</code>ä¸­è®¿é—®å…¶ä»– store ä¸­çš„ getter</li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useOtherStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./other-store&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;main&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"><span style="color:#E06C75;">	getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		otherGetter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> otherStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useOtherStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">localData</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> otherStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="action-actions-ç›¸å½“äºç»„ä»¶ä¸­çš„-methods-ä½¿ç”¨definestore-ä¸­çš„-actions-å±æ€§å®šä¹‰" tabindex="-1">Action:actions ç›¸å½“äºç»„ä»¶ä¸­çš„ methods,ä½¿ç”¨<code>defineStore()</code>ä¸­çš„ actions å±æ€§å®šä¹‰ <a class="header-anchor" href="#action-actions-ç›¸å½“äºç»„ä»¶ä¸­çš„-methods-ä½¿ç”¨definestore-ä¸­çš„-actions-å±æ€§å®šä¹‰" aria-label="Permalink to &quot;Action:actions ç›¸å½“äºç»„ä»¶ä¸­çš„ methods,ä½¿ç”¨\`defineStore()\`ä¸­çš„ actions å±æ€§å®šä¹‰&quot;">â€‹</a></h4><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;main&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#E06C75;">		counter</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		increment</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#61AFEF;">		randomizeCounter</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">round</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#56B6C2;"> *</span><span style="color:#E5C07B;"> Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">random</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p><code>pinia</code>ä¸­æ²¡æœ‰<code>mutation</code>å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>action</code>ä¸­å®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼Œ<code>action</code>å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥åœ¨å…¶ä¸­ await ä»»ä½• API è°ƒç”¨ç”šè‡³å…¶ä»–æ“ä½œ.</p></blockquote><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å®šä¹‰ä¸€ä¸ªaction</span></span>
<span class="line"><span style="color:#61AFEF;">asyncAddCounter</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#61AFEF;">  setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">counter</span><span style="color:#56B6C2;">++</span></span>
<span class="line"><span style="color:#ABB2BF;">  }, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">///setup()ä¸­è°ƒç”¨</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineComponent</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#61AFEF;">  setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> main</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useMainStore</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // Actions åƒ methods ä¸€æ ·è¢«è°ƒç”¨ï¼š</span></span>
<span class="line"><span style="color:#E5C07B;">    main</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">asyncAddCounter</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><p>è®¿é—®å…¶ä»– store ä¸­çš„ Action</p><p>è¦ä½¿ç”¨å¦ä¸€ä¸ª store ä¸­çš„ action ï¼Œå¯ä»¥ç›´æ¥åœ¨æ“ä½œå†…éƒ¨ä½¿ç”¨å®ƒï¼š</p></li></ul><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useAuthStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./auth-store&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useSettingsStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;settings&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#C678DD;">		async</span><span style="color:#61AFEF;"> fetchUserPreferences</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">preferences</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> auth</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useAuthStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			///è°ƒç”¨å…¶ä»–storeçš„action</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isAuthenticated</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#E5C07B;">				this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">preferences</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> fetchPreferences</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				throw</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;User must be authenticated&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>åœ¨<code>Vuex</code>ä¸­å¦‚æœè¦è°ƒç”¨å¦ä¸€ä¸ªæ¨¡å—çš„<code>Action</code>ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å½“å‰æ¨¡å—ä¸­æ³¨å†Œè¯¥æ–¹æ³•ä¸ºå…¨å±€çš„<code>Action</code>ï¼Œ</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/// æ³¨å†Œå…¨å±€Action</span></span>
<span class="line"><span style="color:#E06C75;"> globalSetCount</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">  root</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span><span style="color:#7F848E;font-style:italic;">/// è®¾ç½®root ä¸ºtrue</span></span>
<span class="line"><span style="color:#61AFEF;">    handler</span><span style="color:#ABB2BF;"> ({ </span><span style="color:#E06C75;">commit</span><span style="color:#ABB2BF;"> }:</span><span style="color:#E06C75;">ActionContext</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">MainState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">RootState</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">):</span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">       commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;setCount&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯¹å…¶è¿›è¡Œ<code>dispatch</code>è°ƒç”¨</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/// è°ƒç”¨å…¨å±€å‘½åç©ºé—´çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#61AFEF;"> handelGlobalAction</span><span style="color:#ABB2BF;"> ({ </span><span style="color:#E06C75;">dispatch</span><span style="color:#ABB2BF;"> }:</span><span style="color:#E06C75;">ActionContext</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">TabsState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">RootState</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">):</span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">   dispatch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;globalSetCount&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">root</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-æ€»ç»“" tabindex="-1">3.æ€»ç»“ <a class="header-anchor" href="#_3-æ€»ç»“" aria-label="Permalink to &quot;3.æ€»ç»“&quot;">â€‹</a></h3><p>ä¸ <a href="https://vuex.vuejs.org/zh/#%E4%BB%80%E4%B9%88%E6%98%AF%22%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%22%EF%BC%9F" target="_blank" rel="noreferrer">Vuex</a> ç›¸æ¯”ï¼Œ<a href="https://pinia.web3doc.top/core-concepts/" target="_blank" rel="noreferrer">Pinia</a> æä¾›äº†ä¸€ä¸ªæ›´ç®€å•çš„ APIï¼Œå…·æœ‰æ›´å°‘çš„æ“ä½œï¼Œæä¾›<code>Composition API</code>ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ä¸<code>TypeScript</code>ä¸€èµ·ä½¿ç”¨æ—¶å…·æœ‰å¯é çš„ç±»å‹æ¨æ–­æ”¯æŒï¼Œå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæ–°é¡¹ç›®å¹¶ä¸”ä½¿ç”¨äº†<code>TypeScript</code>ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹<code>pinia</code>ï¼Œç›¸ä¿¡ä¸ä¼šè®©ä½ å¤±æœ›ã€‚</p><h2 id="äº”ã€è´­ç‰©è½¦ä¾‹å­" tabindex="-1">äº”ã€è´­ç‰©è½¦ä¾‹å­ <a class="header-anchor" href="#äº”ã€è´­ç‰©è½¦ä¾‹å­" aria-label="Permalink to &quot;äº”ã€è´­ç‰©è½¦ä¾‹å­&quot;">â€‹</a></h2><p>main.ts</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">createPinia</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">createPinia</span><span style="color:#ABB2BF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>stores/counterStore.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// defineStore å‡½æ•°è¿”å›å€¼æœ¬è´¨æ˜¯ä¸€ä¸ªHooks</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useCounterStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;counter&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#E06C75;">		count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		increment</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">			this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// console.log(0)</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		doubleCount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;"> *</span><span style="color:#D19A66;"> 2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> counterStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useCounterStore</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>demo.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">storeToRefs</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">counterStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;@/stores/counterStore&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// const couterStore = useCounterStore()</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">doubleCount</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> storeToRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">counterStore</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		{{ count }}</span></span>
<span class="line"><span style="color:#ABB2BF;">		{{ doubleCount }}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> @click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;couterStore.increment&quot;</span><span style="color:#ABB2BF;">&gt;+&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;css&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* css ä»£ç  */</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>data/api.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> catchDataApi</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">		setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">			resolve</span><span style="color:#ABB2BF;">([</span></span>
<span class="line"><span style="color:#ABB2BF;">				{</span></span>
<span class="line"><span style="color:#E06C75;">					id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;iphone12&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					price</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					inventory</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#ABB2BF;">				{</span></span>
<span class="line"><span style="color:#E06C75;">					id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;iphone13&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					price</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">8000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					inventory</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#ABB2BF;">				{</span></span>
<span class="line"><span style="color:#E06C75;">					id</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;iphone14&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					price</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">13000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					inventory</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				},</span></span>
<span class="line"><span style="color:#ABB2BF;">			]);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#E06C75;"> catchDataApi</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>store/productStore.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> catchDataApi</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;../data/api&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useProductStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;productStore&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#E06C75;">		products</span><span style="color:#ABB2BF;">: [],</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#C678DD;">		async</span><span style="color:#61AFEF;"> loadData</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">			try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				const</span><span style="color:#E5C07B;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> catchDataApi</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">				this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">products</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {}</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>store/cartStore.js</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineStore</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">storeToRefs</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useProductStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;./productStore&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#E5C07B;"> useCartStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> defineStore</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;cartStore&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	state</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#E06C75;">		cartList</span><span style="color:#ABB2BF;">: [],</span></span>
<span class="line"><span style="color:#ABB2BF;">	}),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// cartList = [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//   {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//     id: 1,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//     name: &#39;iphone12&#39;,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//     price: 10000,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//     quantity: 1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//   }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	// ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	actions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		addToCart</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">product</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// åœ¨è´­ç‰©è½¦é‡ŒæŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªå•†å“</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> p</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cartList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> product</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ‰¾åˆ°äº†ï¼Œè´­ç‰©è½¦é‡Œçš„è¿™ä¸ªå•†å“çš„æ•°é‡åŠ  1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å¦‚æœæ²¡æœ‰æ²¡æœ‰æ‰¾åˆ°ï¼Œæ·»åŠ è¿™ä¸ªå•†å“åˆ°è´­ç‰©è½¦</span></span>
<span class="line"><span style="color:#C678DD;">			if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!!</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">				p</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">quantity</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">				this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cartList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">					...</span><span style="color:#E06C75;">product</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">					quantity</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				});</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// å½“ç‚¹å‡»æ”¾å…¥è´­ç‰©è½¦ï¼Œè¿™ä¸ªå•†å“çš„åº“å­˜éœ€è¦å‡å°‘ä¸€ä¸ª</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> productStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useProductStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">products</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> storeToRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">productStore</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">			const</span><span style="color:#E5C07B;"> p2</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> products</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> product</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			});</span></span>
<span class="line"><span style="color:#E5C07B;">			p2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">inventory</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">	getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">		totalPrice</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">			return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cartList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reduce</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">sum</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">				return</span><span style="color:#E06C75;"> sum</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">price</span><span style="color:#56B6C2;"> *</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">quantity</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">			}, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>views/Product.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">storeToRefs</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useProductStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;@/stores/productStore&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useCartStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;@/stores/cartStore&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> productStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useProductStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> cartStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useCartStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">products</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> storeToRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">productStore</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">addToCart</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> cartStore</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">productStore</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loadData</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;äº§å“åˆ—è¡¨&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">hr</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">li</span><span style="color:#D19A66;"> v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;product in products&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			{{ product.name }} - ï¿¥{{ product.price }}</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> @click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;addToCart(product)&quot;</span><span style="color:#D19A66;"> :disabled</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;product.inventory &lt;= 0&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">				æ”¾å…¥è´­ç‰©è½¦</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;css&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* css ä»£ç  */</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>views/Cart.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">storeToRefs</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;pinia&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">useCartStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;@/stores/cartStore&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> cartStore</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useCartStore</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">cartList</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">totalPrice</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> storeToRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">cartStore</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;è´­ç‰©è½¦&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">hr</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">li</span><span style="color:#D19A66;"> v-for</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;product in cartList&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			{{ product.name }} : {{ product.quantity }} x ï¿¥{{ product.price }} = ï¿¥{{</span></span>
<span class="line"><span style="color:#ABB2BF;">				product.quantity * product.price</span></span>
<span class="line"><span style="color:#ABB2BF;">			}}</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">li</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">ul</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;æ€»ä»·ï¼šï¿¥{{ totalPrice }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;css&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* css ä»£ç  */</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>App.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Product</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;@/views/Product.vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> Cart</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;@/views/Cart.vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">Product</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">Product</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">Cart</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">Cart</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;css&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* css ä»£ç  */</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,88)]))}const b=n(e,[["render",o]]);export{u as __pageData,b as default};
