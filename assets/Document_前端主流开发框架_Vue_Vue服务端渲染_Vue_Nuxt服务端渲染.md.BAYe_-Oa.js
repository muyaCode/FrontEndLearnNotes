import{_ as n,c as a,o as l,ah as p}from"./chunks/framework.DqD713j2.js";const e="/FrontEndLearnNotes/assets/image-20240606213857036.DmQmSVQC.png",o="/FrontEndLearnNotes/assets/image-20240606213945439.B5X7Ykyn.png",r="/FrontEndLearnNotes/assets/image-20240606214853356.CWj1Ga1n.png",t="/FrontEndLearnNotes/assets/36f9876134964feaacacb46ca11853e1tplv-k3u1fbpfcp-jj-mark3024000q75.CToLd25t.webp",c="/FrontEndLearnNotes/assets/image-20240606215202645.Dt-lb3IK.png",i="/FrontEndLearnNotes/assets/3326c9d1df0a4db5b385eac9c66fb14ftplv-k3u1fbpfcp-jj-mark3024000q75.bhD42MBQ.webp",B="/FrontEndLearnNotes/assets/image-20240606215244561.DE4l0Flb.png",y="/FrontEndLearnNotes/assets/52f2a2f503494e23b67c49f1db6a8dcctplv-k3u1fbpfcp-jj-mark3024000q75.C3aq6iBw.webp",u="/FrontEndLearnNotes/assets/image-20240606210103168.HwVouBpb.png",b="/FrontEndLearnNotes/assets/image-20240606210123121.Bufuu2gB.png",d="/FrontEndLearnNotes/assets/image-20240606210146599.pv2plle_.png",m="/FrontEndLearnNotes/assets/image-20240606210213681.BZTtSvA3.png",F="/FrontEndLearnNotes/assets/image-20240606210231823.Pe13geJ7.png",A="/FrontEndLearnNotes/assets/image-20240606210320503.DGEdPr0n.png",g="/FrontEndLearnNotes/assets/image-20240606210336737.DpysN4oK.png",C="/FrontEndLearnNotes/assets/image-20240606210441034.kmIOd2Xn.png",h="/FrontEndLearnNotes/assets/image-20240606210459902.c9rQO7Vd.png",E="/FrontEndLearnNotes/assets/image-20240606210536105.VKKvvV-6.png",v="/FrontEndLearnNotes/assets/image-20240606210614013.B5HyVnYH.png",f="/FrontEndLearnNotes/assets/image-20240606210634918.DUBCnJKv.png",x="/FrontEndLearnNotes/assets/image-20240606210805392.B5sQYGN-.png",D="/FrontEndLearnNotes/assets/image-20240606210834111.D4FwjKZf.png",q="/FrontEndLearnNotes/assets/image-20240606210858314.BBWns_hq.png",k="/FrontEndLearnNotes/assets/image-20240606210916495.Bt8NDQWZ.png",N="/FrontEndLearnNotes/assets/image-20240606211005633.B8motTDB.png",_="/FrontEndLearnNotes/assets/image-20240606211028221.CCcnRKUz.png",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAv8AAAAqCAIAAACr9aPAAAAOLklEQVR4nO3de2xTV54H8N917MQJhExGIiWdzozRbm1vgOJVXlBRNVWHxZ6ZQCjtOEx3ETRC0N35w25WMlJp/+nsNlYVxao6EqqUllZqSNJXlrZjU6pttttChiGVIYJ13KakQwoZMx0e2SR+3/nj2NfX19d5+BFD+H7+QL7n3nvORarUL+d37rnc1NQUAQAAANw1lEqlcuFX8zyfv0cBAAAAWCyO4xZ7y4KijxB6xOkHSQgAAAAKQjbxLDwGzZ9+WMrheV74QYg+AAAAUFAs63Acx/M8x3HCj4XcO1f6EeceASEAAQAAQEEJ0Yf9KRCfnUPa9MOnILZKSKlUxOXsLwEAAACwYNG4cDgcDoeF6R8hA80dgOTTj5B4otEo+1FSUqJWq/PyNwAAAFiuLv+JTv6ebt0s2ANs/Tmt21Cw0fNGmIUpLi4mIr/fHwgEOI4TT83MEYC42dlZSZM4+kSjUZVKpVarMdMDAACwOG/30L//W6EfgujxX1Pn7wr9EHkXjUb9fn8oFGLBSFILk5CmH0n0KS4uLi0tXZLHBgAAWEYu/4m2bCz0Q8T9/rNlOQOUamZmZiEBKKnyJYk+paWlbEIJAAAAFufjj2I//mE9bftFYZ7h9Of0hy+IiIY+v0vST1lZGauCEZFQtkoNQNJ1P0L6UalUiD4AAAAZEtb6bPsFWQ8V6CE6YumngAuPlpxarWarodkLW7JzP4nVPOKJn6KiorKysqV7UgAAAIAcKSsrUygUwptbqXv0yFe+sow+N2/efPfddy9evEhENTU1u3btqqioyKZDAAAAYC5cuLBu3bqlHPHFF1+sr69/5JFHioqKlmC4l099r+C432z+YTadlJWVTU1NsVSTtvIl3tenpKQkyze8+vv7eZ5vb28nouPHj/f39+/fvz+bDgEAAO4SLpfr008/FbesWLHCYrGsWrWKHb755pt2u30pH2nPnj1vvfWW1+tta2srKSnJ61ieawHrh5NE9LO/X6FfnflYCoVCpVKx+ldqCSwx9yOkn+yX+4yMjBw+fLiqqoqItm/f/tJLL2XZIQAAwF3is88+O3z4cHl5udDy3nvvffnll01NTUv2DE6nU6FQbNu2jYgmJyenp6efeeaZd95559VXX3366acX9X30xXr2hC/KExE9f9LX/+sfZ9OVWq1ON/0jneMpKirKfmufQCDAog8RVVdXT09PZ9efz9lh63Zn+VCLHLDD6RM1uLvTPoCrleNaXRkN42rl9I7xjG4FAIBlKhKJiKMPEZWXl4dCobNnz9psNpvNRkTsx9mzZ/PxAKFQ6MyZM0NDQ6FQiIj8fn9PT8/p06fNZrNKpTpx4kQ+BmXOT/rfu3CL/X575JbnWiCb3hQKRbpSnZKSy14qlSrjYdxu9/vvvz85OUlEBw4cEJ86cODAmjVrtm/fXltbm3H/qXzOjs4rRnubIfYA3TbXve2HTFVZduv+YJA2tid68TldXq2xTf5iYy8+eAYAAHlXV1dXV1dHRDabLa+VL7fbrdFoeJ53u9319fUajcZqtb7yyivV1dWPPfbYyy+//PDDD69cuTK3g/I8ffPXYPtHk+JG64eTv9tRvbayeMHfbpdSKpXBYDC1+CVd9ZzNdFZPT8/+/fvvv/9+2bNer7enpye36Sc/3MNerbFNFH6Gz1HTU4YCPhEAAMBS+eKLL0wmE8/zJ06cqK+vJ6KKioonnnhiYGCgvb29pqbm/PnzDz74YE7G+tAz9f6FWyOTgQt/9s+EpJMJLu///91LX61QcevuUW9Yo35s/aqf6xaXupRKJdv7R0Ja5Mqm7HXz5s100YeItFrt1atXM+6cyN3NZvpssaKUu9vWOXidvMdsNlu32+fssB3z0vXBztgF7m5bh9MnvSmpI+HCpLKWe9irrRVlHd/wOdpYW0XjDr24xDXu0HN6x7i42dXK6R0uhz62t6ToYldrrI2dF1fKPHLXJ26QrY0lzgqn2WOMp3bGymuiB0CpDQDgjtbc3Jy/zi9fvuz3+7VarU6nm5mZmZiYYO1arZaIvv322wceeMDr9eZquH/pm3jt7I0/TsymRh/BdIg/MzHbffb6nv6JxfafLtUk7fczx3UF5z02XGu32+323drrg685fUSGNnt7UyVpd9vt9jZDlemQfbeWKpva7fZ47ev6YGfsJvvu1YOdLOK4u49da2q32+12e7uxOmUcn9OVHH7cHwzSxtoqIk3LQV3f0XioGB84Mmp2WDSS20etFnLxPM9f6tL1mVgEcbVyJnKyeTcXWayj81yfdIPTYDVKA4vrqHDWPGo9JISmPpORdcZf6nKbEjln1Lr26F6hu7UZrlICAIAlcjLZ2NjY2NiYcDg7O3vy5Emfzzd/R4s3NDTU0NDA/r3c0NAwNDQknGpsbJyYmNBoNN99912uhvuPbfcs/OIXti56ZQtLNan7/eQx64yMjIyMjOSqN+3u2OoeQ3NT5fUrVxZyT2VTe3xJkKG5qdI7HJvhid9eZTBUERna7MLKIVblahaHn2Gv1sjSlMbiMPdZWKYYHzgyat5rTBlS1+ViiUhjcZjJ7Rknch3t03V1xC7VWFxdurmvT77B2NFFRwaS44+xtzd+dm/8JiIis9MTi2Mai8M8Ktym67rUm+hOFOEAAOCONDU11dPTk/NuZ2dnz58/39DQwA7r6+vdbrfwPdCHHnpoy5YtK1eu3LFjR65G/NdNP+zede+8q3o4ou5d9z69KasdgMQSq3zYUqBoNJqr6Z/XX3+d47jOzs6c9JatqurVdIWIyNBmp26bzXaMKptSVkj7hs/RxqdEbe5hr7ZWWO9s3GsetQyMWyw0cIS6XKnhR8a4x02GvdI5onluGO1by1kTTWYPkbiHcYd+rTCFpNsk14t+k06umTR6Aw3JngEAgNvE1q1b521kL3/l1vDwcDAYfOGFFySNW7ZsEbesX78+h4M+VVdZolTs6Z+Ipql9KTh681f3PWnIZNvkaDRKC/nOVw7Tz759+5ZmU8gF8V29Jvw2tNkN7IWxDkoKQPO+7BWLPy10hA66Fp5o3J5xMsYu9wyNzn2xRm8gs4PvTZetxh36tUMOnjcSEblaOYvsVZ6hUZKLReOepdw6AAAA7iCnTp3at2+fXq8XWjwez/HjxyXpJ+eeNFR85Jk6dk7+Y2S/2lCRWfShePpJlRR0OI5Ld10GNmzYUFNTk6veMnF98IPY/+p9ztcGWUXL5+yOrX+uql5NROJVz6IqF7tLWgaLFaKMRqshdclPGpqWg7rE4pxxh6VvvjuMe83CEiBBfJE1kWdoVLcp9l+m66i4t3hZjsjVaupLrEoSD2+0klBVAwAAiBsbG4tEIjpdUuVAp9NFIpGxsbF8j/7198G0D/bXtKfmFY1G037llJ1gfwaDmY+x9KpMRm3snS8iIkNzEwnvfBFRZdO9w+zlrs7B1bvZJE9VNQ12ssZjtDup8pXuZa8kmpaDNCq75CcdjcXjNPeZ2BIyIzm65EtSIsbeS11uU8prXfGzHV1kXctOHSWz6Iz5IBlZu8mdWOpDpOvadJS1r7UahLVBAAAACadPn968ebMkK3Ac19jYKF77nCfnrvrTnbr457Sn5sVSjTjnMLHKF8dxbB/oSCSS8RjV1dVfffVVupfePR5PdXXqO1YLUWU6ZE9zxIpY4lOm2O8rRES1bcKx/B2JhpQql7QMJiIOPxqLJ16pNPbynsRFoiNjL8/3xn67Wq3xqZu015PG4uElFa1ES/LJXtE1+tTbmJZe3tIrdwIAAG4zSqUyHA7Pvf1eOBzO+dqSb775ZufOnantjY2NDocjt2NJfP19MBhJrPp5SFNGRP87PsMOp0P8tzdCP/1BJrsxRyIRtp5HkuqSVj0zfr9frVZnMEZzc/Mbb7xx7do12bNr1qxpaWnJoNulkbKloXTPQ4aVji5lXDpytZr6dF0dmH0BAAB5dXV1zz33XOpClE8++UR8+Oijj+Z23Oeff162fcWKFc8++2xux5IQyl61P1L/9p/uMWpXEtGHnqnnPva5r/qJ6Ou/BDNIP36/X8g2klOJuR+KB6BAIFBSUiJbJ5tbbW3tnbCVs7wq06FDSQ0pc0SxF63MTn6RpSNXK2cSlufoui6h9AQAAGnt3LlTdg5mGduiKXt8/ap//scf7KhJfODsl/ryX+rLBy5M9Zy7sfmnZYvtk+f5QCCgUChkA1DSxJpwxfT0dM4/4bHUUtJLtmSqUQsjrnvljagAlzK6R/YEAADAbWFlseLtJ+U/596yrrxlXbnsqblNT0+nm/gh8TtfwkUKhSISiQi7GwEAAADcQWZmZtiKn3QBSLq1jxCAgsHgnfX+FwAAAEAwGAyFQkL0kb1GWvliP9gC6dnZ2UgkUlpamu8HBQAAAMjezMwMiz5zTPxQ6l7PkgAUCoV4nler1bft108BAAAAotGo3+8Ph8PzRh9KTT+UHIB4ng+Hw1NTUyqVqri4eO7tBwAAAACWWDgcZtUutnSHE0l3i3yaEd8gZCDWr1KpLIrL4K14AAAAgGzwPB+JC4fDbLtmSe6ZO6KkncsRdgDi49h44XCYjcQOc/03AgAAWA7Ufj/bODj8+f+EA4GCPIPqvz9mG0LPqooDN24U5BnyQfzlCpZ7SPTqOsl91F3aw7xvtouDTuqfAAAAkKrIc7Hs8dvlo9LTJ05Ff3RfoZ8ilyQBiOQ+5jWH+dfxiDvi4p8DY4cIQAAAALL4mvXhHU8o/+vtQj8IBf+zi378k+X07pIkmaQ2zt/DYnc1ROIBAABYIMX/XVCcOUW3bhZm+FUVkUeN/H3y2ygvD5ktQV50+gEAAAC4oy2nmTAAAACA+SH9AAAAwN3lb+WXoXlU1Wp4AAAAAElFTkSuQmCC",j="/FrontEndLearnNotes/assets/image-20240606211243081.KextRPzG.png",P="/FrontEndLearnNotes/assets/image-20240606211303526.D9oyL2u8.png",S="/FrontEndLearnNotes/assets/image-20240606211326899.ApGeNrux.png",L="/FrontEndLearnNotes/assets/image-20240606211424411.BEq1I_tm.png",R="/FrontEndLearnNotes/assets/image-20240606211447519.2INwc0IL.png",T="/FrontEndLearnNotes/assets/image-20240606211615565.j7mOFFhw.png",M="/FrontEndLearnNotes/assets/image-20240606211638346.BG6kp2rR.png",U="/FrontEndLearnNotes/assets/image-20240606211706385.D4IPR20O.png",O="/FrontEndLearnNotes/assets/image-20240606211728395.CU0HRrAL.png",I="/FrontEndLearnNotes/assets/image-20240606211745814.K5LjeOQZ.png",W="/FrontEndLearnNotes/assets/image-20240606211805942.DLRfSkbX.png",V="/FrontEndLearnNotes/assets/image-20240606211828588.CN2NFwrb.png",z="/FrontEndLearnNotes/assets/image-20240606211842569.BosC3GW1.png",H="/FrontEndLearnNotes/assets/image-20240606211859205.DVxoZJ1R.png",Q="/FrontEndLearnNotes/assets/image-20240606211915935.BVy4j_2Q.png",Z="/FrontEndLearnNotes/assets/image-20240606211931215.CZXhjDpY.png",K="/FrontEndLearnNotes/assets/image-20240606211947892.DTtTQj2h.png",J="/FrontEndLearnNotes/assets/image-20240606212014884.DUZsKXg_.png",X="/FrontEndLearnNotes/assets/image-20240606212031252.c41Ds-9b.png",G="/FrontEndLearnNotes/assets/image-20240606212117254.TT-0qTJO.png",Y="/FrontEndLearnNotes/assets/image-20240606212256669.bqyeGs_-.png",$="/FrontEndLearnNotes/assets/image-20240606212224928.C-4xfOs1.png",ss="/FrontEndLearnNotes/assets/image-20240606212318917.BtX0w9pf.png",ns="/FrontEndLearnNotes/assets/image-20240606212400906.Ck3ENBFk.png",as="/FrontEndLearnNotes/assets/image-20240606212423015.DXVwv5fS.png",ls="/FrontEndLearnNotes/assets/image-20240606212456307.lX5ntrd3.png",ps="/FrontEndLearnNotes/assets/image-20240606212634457.D_QD9Rjg.png",es="/FrontEndLearnNotes/assets/image-20240606212658359.CyTeyzb7.png",os="/FrontEndLearnNotes/assets/image-20240606212731071.vxJrYvag.png",rs="/FrontEndLearnNotes/assets/image-20240606212747395._olOKLN5.png",ts="/FrontEndLearnNotes/assets/image-20240606212810892.DdQnJwBS.png",cs="/FrontEndLearnNotes/assets/image-20240606212836874.DaWfLC0F.png",is="/FrontEndLearnNotes/assets/image-20240606212857230.CawwkUsB.png",Bs="/FrontEndLearnNotes/assets/image-20240606212916818.3nw3mkBF.png",ys="/FrontEndLearnNotes/assets/image-20240606213001246.DD-fmgrZ.png",us="/FrontEndLearnNotes/assets/image-20240606213017806.Bk305rT7.png",bs="/FrontEndLearnNotes/assets/image-20240606213046435.CqPUjfhx.png",ds="/FrontEndLearnNotes/assets/image-20240606213106498.CqNCddC0.png",ms="/FrontEndLearnNotes/assets/image-20240606213124691.CY_9fmDI.png",Fs="/FrontEndLearnNotes/assets/image-20240606213138740.BTivL5IH.png",As="/FrontEndLearnNotes/assets/image-20240606213203840.re0OjTs8.png",gs="/FrontEndLearnNotes/assets/image-20240606213219526.CfzkAujc.png",Cs="/FrontEndLearnNotes/assets/image-20240606213236364.BXfsvsIz.png",hs="/FrontEndLearnNotes/assets/image-20240606213254755.C_Esb37u.png",Es="/FrontEndLearnNotes/assets/image-20240606213309160.Df0akCIj.png",vs="/FrontEndLearnNotes/assets/image-20240606213336630.Cb5sxhkN.png",fs="/FrontEndLearnNotes/assets/image-20240606213414817.Bw0F3KM6.png",xs="/FrontEndLearnNotes/assets/image-20240606213433251.BCzWWSaC.png",Ds="/FrontEndLearnNotes/assets/image-20240606213447982.CRbejg5M.png",qs="/FrontEndLearnNotes/assets/image-20240606213518033.CsmrcuZt.png",ks="/FrontEndLearnNotes/assets/image-20240606213531831.AzcFnCx4.png",Ts=JSON.parse('{"title":"待定文章","description":"","frontmatter":{},"headers":[],"relativePath":"Document/前端主流开发框架/Vue/Vue服务端渲染/Vue+Nuxt服务端渲染.md","filePath":"Document/前端主流开发框架/Vue/Vue服务端渲染/Vue+Nuxt服务端渲染.md","lastUpdated":1750954157000}'),Ns={name:"Document/前端主流开发框架/Vue/Vue服务端渲染/Vue+Nuxt服务端渲染.md"};function _s(ws,s,js,Ps,Ss,Ls){return l(),a("div",null,s[0]||(s[0]=[p('<h1 id="待定文章" tabindex="-1">待定文章 <a class="header-anchor" href="#待定文章" aria-label="Permalink to &quot;待定文章&quot;">​</a></h1><ul><li><a href="https://developer.aliyun.com/article/1515151" target="_blank" rel="noreferrer">Nuxt3 实战 (一)：初始化项目-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1515226" target="_blank" rel="noreferrer">Nuxt3 实战 (二)：配置 Eslint、Prettierrc、Husky等项目提交规范-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1515282" target="_blank" rel="noreferrer">Nuxt3 实战 (三)：使用 release-it 自动管理版本号和生成 CHANGELOG-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1515295" target="_blank" rel="noreferrer">Nuxt3 实战 (四)：安装 Nuxt UI 和配置 Typescript 类型检查-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1515297" target="_blank" rel="noreferrer">Nuxt3 实战 (五)：Header 头部布局-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1515305" target="_blank" rel="noreferrer">Nuxt3 实战 (六)：Footer 底部布局-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1518175" target="_blank" rel="noreferrer">Nuxt3 实战 (七)：配置 Supabase 数据库-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1534431" target="_blank" rel="noreferrer">Nuxt3 实战 (八)：优雅的实现暗黑主题模式-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1535988" target="_blank" rel="noreferrer">Nuxt3 实战 (九)：使用 Supabase 实现 Github 认证鉴权-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1541606" target="_blank" rel="noreferrer">Nuxt3 实战 (十)：使用 Supabase 实现 RESTful 风格 API 接口-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1542865" target="_blank" rel="noreferrer">Nuxt3 实战 (十一)：添加路由 Transition 过渡效果和 Loading 动画-阿里云开发者社区 (aliyun.com)</a></li><li><a href="https://developer.aliyun.com/article/1549118" target="_blank" rel="noreferrer">Nuxt3 实战 (十二)：SEO 搜索引擎优化指南-阿里云开发者社区 (aliyun.com)</a></li></ul><h1 id="vue-nuxt-服务端渲染" tabindex="-1">Vue+Nuxt 服务端渲染 <a class="header-anchor" href="#vue-nuxt-服务端渲染" aria-label="Permalink to &quot;Vue+Nuxt 服务端渲染&quot;">​</a></h1><h2 id="nuxt-介绍" tabindex="-1">Nuxt 介绍 <a class="header-anchor" href="#nuxt-介绍" aria-label="Permalink to &quot;Nuxt 介绍&quot;">​</a></h2><p>Nuxt 是一个基于 Vue 的框架，它允许应用通过 Node.JS 在服务器进行渲染，而且拥有完全交互式 JavaScript 应用程序的所有优点。</p><p>Nuxt 是一个开源框架，使 Web 开发直观而强大。使用 Nuxt 可以自信地创建高性能和生产级的全栈 Web 应用程序和网站，并且得到众多知名公司前端团队的信任。</p><p>对于 Vue 开发者来说，Nuxt 主要的优势是能够预先渲染视图，并将其作为静态文件提供。这对 SEO 优化有很大的效果，并在互动性方面有很大的提升。</p><p>NestJS是一个用于构建高效且可扩展的服务器端应用程序的框架。它的核心是模块化的结构，可以按照业务需求快速构建，而不必一开始就确定具体的结构。此外，它还支持事件驱动的异步操作，可以有效的降低延迟，提高应用程序的性能。</p><p>NuxtJS是一个用于构建客户端JavaScript应用程序的框架，它可以从服务器端渲染静态内容。它将代码分解为两个部分，一部分为服务端代码，另一部分为客户端代码。Nuxt应用程序可以很容易地在Node.js环境中运行，因此可以与NestJS实现后端渲染。</p><h2 id="nuxt-的特点" tabindex="-1">Nuxt 的特点 <a class="header-anchor" href="#nuxt-的特点" aria-label="Permalink to &quot;Nuxt 的特点&quot;">​</a></h2><h3 id="vue-技术栈" tabindex="-1">Vue 技术栈 <a class="header-anchor" href="#vue-技术栈" aria-label="Permalink to &quot;Vue 技术栈&quot;">​</a></h3><p>Nuxt3 是基于 Vue3 + Vue Router + Vite + 服务引擎 Nitro 等技术栈，全程使用 Vue3 + Vite 开发，带来极致的开发体验。</p><h3 id="约定式路由" tabindex="-1">约定式路由 <a class="header-anchor" href="#约定式路由" aria-label="Permalink to &quot;约定式路由&quot;">​</a></h3><p>约定式路由的言外之意就是目录结构即路由，Nuxt 路由基于 vue-router，在 <code>pages/</code> 目录中创建的每个页面，都会根据目录结构和文件名来自动生成路由。</p><h3 id="自动导包" tabindex="-1">自动导包 <a class="header-anchor" href="#自动导包" aria-label="Permalink to &quot;自动导包&quot;">​</a></h3><p>Nuxt 会自动导入辅助函数、组合式 API 和 Vue API，无需手动导入。Nuxt 本身基于规范的目录结构， Nuxt 还可以对自己的组件、 插件使用自动导入。</p><h3 id="渲染模式" tabindex="-1">渲染模式 <a class="header-anchor" href="#渲染模式" aria-label="Permalink to &quot;渲染模式&quot;">​</a></h3><p>Nuxt 支持多种渲染模式，如 SSR、 CSR、 SSG 等。</p><h3 id="利于搜索引擎优化" tabindex="-1">利于搜索引擎优化 <a class="header-anchor" href="#利于搜索引擎优化" aria-label="Permalink to &quot;利于搜索引擎优化&quot;">​</a></h3><p>服务器端渲染模式，不但可以提高首屏渲染速度，还利于SEO。</p><h3 id="服务器引擎" tabindex="-1">服务器引擎 <a class="header-anchor" href="#服务器引擎" aria-label="Permalink to &quot;服务器引擎&quot;">​</a></h3><p>在开发环境中，Nuxt 使用 Rollup 和 Node.js。</p><p>在生产环境中，Nuxt 使用 Nitro 将应用程序和服务器构建到一个通用的 <code>.output</code> 目录中。其中，Nitro 服务引擎提供了跨平台部署的支持，包括 Node、 Deno、 Serverless、 Workers等平台上部署。</p><p>作者：进击的松鼠 链接：<a href="https://juejin.cn/post/7361639833864372278" target="_blank" rel="noreferrer">https://juejin.cn/post/7361639833864372278</a> 来源：稀土掘金 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><h2 id="nuxt-网址" tabindex="-1">Nuxt 网址 <a class="header-anchor" href="#nuxt-网址" aria-label="Permalink to &quot;Nuxt 网址&quot;">​</a></h2><p>GitHub项目地址：<a href="https://github.com/nuxt/nuxt" target="_blank" rel="noreferrer">https://github.com/nuxt/nuxt</a></p><p>Nuxt V2 版本官网：<a href="https://v2.nuxt.com/" target="_blank" rel="noreferrer">https://v2.nuxt.com/</a></p><p>Nuxt V3 版本官网：<a href="https://nuxt.com/" target="_blank" rel="noreferrer">https://nuxt.com/</a></p><p>Nuxt2 中文网：<a href="https://www.nuxtjs.cn/" target="_blank" rel="noreferrer">https://www.nuxtjs.cn/</a></p><h3 id="nuxt3-中文网" tabindex="-1">Nuxt3 中文网 <a class="header-anchor" href="#nuxt3-中文网" aria-label="Permalink to &quot;Nuxt3 中文网&quot;">​</a></h3><ul><li><strong>ezdoc(推荐)</strong>：<a href="https://ezdoc.cn/docs/nuxtjs" target="_blank" rel="noreferrer">首页 - Nuxt.js v3.11.2 - 中文开发文档手册｜官方文档中文版同步翻译更新高质量汉化 (ezdoc.cn)</a></li><li><strong>推荐</strong>：<a href="https://nuxt.com.cn/" target="_blank" rel="noreferrer">https://nuxt.com.cn/</a></li><li>待定：<a href="https://www.nuxtjs.org.cn/" target="_blank" rel="noreferrer">https://www.nuxtjs.org.cn/</a></li><li>编程之家 nuxt 教程：<a href="https://www.jb51.cc/nuxtjs-tutorial/" target="_blank" rel="noreferrer">Nuxt.js</a></li></ul><h3 id="nuxt-ui官网文档-nuxt-ui-用于现代-web-应用程序的-ui-库" tabindex="-1">Nuxt UI官网文档：<a href="https://ui.nuxt.com/" target="_blank" rel="noreferrer">Nuxt UI：用于现代 Web 应用程序的 UI 库</a> <a class="header-anchor" href="#nuxt-ui官网文档-nuxt-ui-用于现代-web-应用程序的-ui-库" aria-label="Permalink to &quot;Nuxt UI官网文档：[Nuxt UI：用于现代 Web 应用程序的 UI 库](https://ui.nuxt.com/)&quot;">​</a></h3><h3 id="开发调试工具" tabindex="-1">开发调试工具： <a class="header-anchor" href="#开发调试工具" aria-label="Permalink to &quot;开发调试工具：&quot;">​</a></h3><ul><li>官网：<a href="https://devtools.nuxt.com/" target="_blank" rel="noreferrer">Nuxt DevTools：释放Nuxt开发人员体验</a></li><li>GitHub：[Nuxt DevTools：<a href="https://github.com/nuxt/devtools" target="_blank" rel="noreferrer">https://github.com/nuxt/devtools</a></li></ul><h3 id="集成" tabindex="-1">集成： <a class="header-anchor" href="#集成" aria-label="Permalink to &quot;集成：&quot;">​</a></h3><ul><li><p>模块：</p><ul><li><p>官网：<a href="https://nuxt.com/modules" target="_blank" rel="noreferrer">Nuxt Modules</a></p></li><li><p>中文1：<a href="https://nuxtjs.org.cn/modules" target="_blank" rel="noreferrer">Nuxt 模块 - Nuxt 中文 (nuxtjs.org.cn)</a></p></li><li><p>中文2：<a href="https://nuxt.com.cn/modules" target="_blank" rel="noreferrer">Nuxt 模块</a></p></li></ul></li><li><p>部署：</p><ul><li>官网：<a href="https://nuxt.com/deploy" target="_blank" rel="noreferrer">部署Nuxt应用程序</a></li><li>中文：<a href="https://nuxt.com.cn/deploy" target="_blank" rel="noreferrer">部署一个 Nuxt 应用</a></li></ul></li></ul><h2 id="nuxt开源项目收集" tabindex="-1">Nuxt开源项目收集 <a class="header-anchor" href="#nuxt开源项目收集" aria-label="Permalink to &quot;Nuxt开源项目收集&quot;">​</a></h2><p>github：<a href="https://github.com/nuxt/awesome" target="_blank" rel="noreferrer">nuxt/awesome：与Nuxt.js相关的精彩事物的精选列表 (github.com)</a></p><p>基于Nuxt的模板：<a href="https://nuxt.com.cn/templates" target="_blank" rel="noreferrer">Nuxt模板</a></p><h2 id="怎么判断网页是否是服务端渲染" tabindex="-1">怎么判断网页是否是服务端渲染 <a class="header-anchor" href="#怎么判断网页是否是服务端渲染" aria-label="Permalink to &quot;怎么判断网页是否是服务端渲染&quot;">​</a></h2><p>服务端渲染使用的是模板引擎渲染进来</p><p>一般网站可以浏览器右键点击“查看网页源代码”</p><p>在 body 标签里的标签大量的标签数据，这个就是服务端渲染的网站</p><h1 id="nuxt-的环境搭建" tabindex="-1">Nuxt 的环境搭建 <a class="header-anchor" href="#nuxt-的环境搭建" aria-label="Permalink to &quot;Nuxt 的环境搭建&quot;">​</a></h1><h2 id="初始化项目" tabindex="-1">初始化项目 <a class="header-anchor" href="#初始化项目" aria-label="Permalink to &quot;初始化项目&quot;">​</a></h2><p><strong>Node 的环境要求</strong>：v18.0.0 及之后的版本</p><p>首先，在命令行终端输入：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npx</span><span style="color:#98C379;"> nuxi@latest</span><span style="color:#98C379;"> init</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">project-nam</span><span style="color:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+e+'" alt="image-20240606213857036"></p><p>然后打开项目目录，运行项目：<code>cd &lt;project-name&gt;</code> <code>npm run dev</code>；</p><h2 id="配置-host" tabindex="-1">配置 host <a class="header-anchor" href="#配置-host" aria-label="Permalink to &quot;配置 host&quot;">​</a></h2><p>值得注意的是，在创建项目的时候，也许会出现报错的情况，可能是因为网络原因导致。</p><p>在命令行终端输入：<code>ping raw.githubusercontent.com</code> 检查是否能连通，如果访问不通，那么就配置下 host。</p><p>配置 host，本地解析域名：</p><ol><li>Mac 电脑 host 配置路径： /etc/hosts</li><li>Win 电脑 host 配置路由： c:/Windows/System32/drivers/etc/hosts</li><li>在 host 文件中新增一行 ，新增的内容为：185.199.108.133 raw.githubusercontent.com</li><li>重新 ping 域名，如果通了就可以重新开一个终端创建项目</li></ol><p><img src="'+o+`" alt="image-20240606213945439"></p><h1 id="nuxt-的相关配置" tabindex="-1">Nuxt 的相关配置 <a class="header-anchor" href="#nuxt-的相关配置" aria-label="Permalink to &quot;Nuxt 的相关配置&quot;">​</a></h1><h2 id="应用入口" tabindex="-1">应用入口 <a class="header-anchor" href="#应用入口" aria-label="Permalink to &quot;应用入口&quot;">​</a></h2><p>默认情况下， Nuxt 会将 app.vue 视为入口点，并为应用程序的每个路由呈现其内容，常用于：</p><ol><li>定义页面布局 Layout 或 自定义布局，如： NuxtLayout</li><li>定义路由的占位，如： NuxtPage</li><li>编写全局样式</li><li>全局监听路由</li><li>等等</li></ol><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- 组件库的组件 nuxt/ui --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtWelcome</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 监听全局路由</span></span>
<span class="line"><span style="color:#C678DD;">  let</span><span style="color:#E06C75;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRouter</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E5C07B;">  router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">form</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="nuxt-配置" tabindex="-1">Nuxt 配置 <a class="header-anchor" href="#nuxt-配置" aria-label="Permalink to &quot;Nuxt 配置&quot;">​</a></h2><p><code>nuxt.config.ts</code> 配置文件位于项目的根目录，可对 Nuxt 进行自定义配置。更多详细的配置信息可参考官网的 <a href="https://nuxt.com/docs/api/nuxt-config" target="_blank" rel="noreferrer"><strong>Nuxt Configuration</strong></a> ，例如：</p><h3 id="runtimeconfig-运行时配置" tabindex="-1">runtimeConfig：运行时配置 <a class="header-anchor" href="#runtimeconfig-运行时配置" aria-label="Permalink to &quot;runtimeConfig：运行时配置&quot;">​</a></h3><p><a href="https://nuxt.com/docs/api/nuxt-config#runtimeconfig" target="_blank" rel="noreferrer">runtimeConfig</a> 是 Nuxt 中的运行时配置，即可以在其中定义环境变量：</p><p>可通过 <code>.env </code>文件中的环境变量来覆盖 runtimeConfig 中配置的变量，优先级（.env &gt; runtimeConfig）</p><p><code>.env </code>的变量会打入到 <code>process.env</code> 中，符合规则的会覆盖 runtimeConfig 的变量</p><p><code>.env </code>一般用于某些终端启动应用时动态指定配置，同时支持 dev 和 production</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 这里定义的运行时配置会不能在 process.env 中访问</span></span>
<span class="line"><span style="color:#E06C75;">  runtimeConfig</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    appKey</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;aabbcc&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 可以在服务端访问</span></span>
<span class="line"><span style="color:#E06C75;">    public</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      baseURL</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;http://xxx.com&quot;</span><span style="color:#7F848E;font-style:italic;"> // 服务端和客户端都可以访问 </span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="appconfig-应用配置" tabindex="-1">appConfig：应用配置 <a class="header-anchor" href="#appconfig-应用配置" aria-label="Permalink to &quot;appConfig：应用配置&quot;">​</a></h3><p><a href="https://nuxt.com/docs/api/nuxt-config#appconfig" target="_blank" rel="noreferrer">appConfig</a> 是 Nuxt 中的应用配置，即可以在构建时确定的公共变量，如：theme 主题。</p><p>此配置会和 app.config.ts（存在于项目根目录中） 的配置合并（优先级 app.config.ts &gt; appConfig）。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 定义应用的配置</span></span>
<span class="line"><span style="color:#E06C75;">  appConfig</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello Nuxt3&quot;</span></span>
<span class="line"><span style="color:#E06C75;">    theme</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      primary</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;orange&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="app-app配置" tabindex="-1">app：app配置 <a class="header-anchor" href="#app-app配置" aria-label="Permalink to &quot;app：app配置&quot;">​</a></h3><p>通过 <a href="https://nuxt.com/docs/api/nuxt-config#app" target="_blank" rel="noreferrer">app</a> 可以给 app 所有的页面添加配置，如给每个页面上设置 head 信息。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // app 配置</span></span>
<span class="line"><span style="color:#E06C75;">  app</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 给 app 所有的页面的 head 添加的配置(SEO, 添加外部的资源)</span></span>
<span class="line"><span style="color:#E06C75;">    head</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;学习 Nuxt&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      charset</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      viewport</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#98C379;">        &quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,user-scalable=no&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      meta</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#E06C75;">          name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;keywords&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">          content</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Nuxt 官网&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#E06C75;">      link</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#E06C75;">          rel</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;shortcut icon&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">          href</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;favicon.ico&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">          type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;image/x-icon&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#E06C75;">      style</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#E06C75;">          children</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`body{ color: red; }\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#E06C75;">      script</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#E06C75;">          src</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;https://nuxt.com&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ]</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="router-配置路由相关的信息" tabindex="-1">router：配置路由相关的信息 <a class="header-anchor" href="#router-配置路由相关的信息" aria-label="Permalink to &quot;router：配置路由相关的信息&quot;">​</a></h3><p>通过配置 router 设置路由相关的信息，比如在客户端渲染可以配置 hash 路由。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  router</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    options</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      hashMode</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#7F848E;font-style:italic;"> // 只在spa应用是有效的</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="alias-路径的别名" tabindex="-1">alias：路径的别名 <a class="header-anchor" href="#alias-路径的别名" aria-label="Permalink to &quot;alias：路径的别名&quot;">​</a></h3><p>通过配置 <a href="https://link.juejin.cn?target=url" target="_blank" rel="noreferrer">alias</a> 可以设置路径的别名，默认已配好，我们可以直接使用路径别名。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#98C379;">  &quot;~&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;srcDir&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">  &quot;@&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;srcDir&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">  &quot;~~&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;rootDir&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">  &quot;@@&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;rootDir&gt;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">  &quot;assets&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;srcDir&gt;/assets&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">  &quot;public&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&lt;srcDir&gt;/public&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="modules" tabindex="-1">modules <a class="header-anchor" href="#modules" aria-label="Permalink to &quot;modules&quot;">​</a></h3><p>通过 <a href="https://nuxt.com/docs/api/nuxt-config#modules" target="_blank" rel="noreferrer">modules</a> 配置可以拓展 Nuxt 的模块，比如： @pinia/nuxt @nuxt/image。</p><p>更多 modules 可参考 <a href="https://nuxt.com/modules" target="_blank" rel="noreferrer">Nuxt Modules</a>。</p><h3 id="routerules" tabindex="-1">routeRules <a class="header-anchor" href="#routerules" aria-label="Permalink to &quot;routeRules&quot;">​</a></h3><p>通过 <a href="https://nuxt.com/docs/api/nuxt-config#routerules-1" target="_blank" rel="noreferrer">routeRules</a> 配置，可以定义路由规则，可更改路由的渲染模式或分配基于路由的缓存策略。</p><h3 id="builder" tabindex="-1">builder <a class="header-anchor" href="#builder" aria-label="Permalink to &quot;builder&quot;">​</a></h3><p>通过 <a href="https://nuxt.com/docs/api/nuxt-config#builder" target="_blank" rel="noreferrer">builder</a> 配置可指定用 Vite 还是 webpack 来构建应用，默认是 vite。如切换为 webpack 还需要安装额外的依赖。</p><h2 id="应用配置" tabindex="-1">应用配置 <a class="header-anchor" href="#应用配置" aria-label="Permalink to &quot;应用配置&quot;">​</a></h2><p>Nuxt3 提供了一个 <a href="https://nuxt.com/docs/guide/directory-structure/app-" target="_blank" rel="noreferrer"><strong>app.config</strong></a> 的应用配置文件，用来定义在构建时确定的公共变量。例如：网站的标题、主题色以及任何不敏感的项目配置等信息。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineAppConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Hello Nuxt3 liujun&quot;</span></span>
<span class="line"><span style="color:#E06C75;">  theme</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    primary</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;blue&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后我们就可以在 vue 文件中使用在 <strong>app.config</strong> 中定义的变量：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> appConfig</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useAppConfig</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">appConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">theme</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>值得注意的是，<strong>app.config</strong> 配置文件中的选项不能使用 env 环境变量来覆盖，这与 <strong>runtimeConfig</strong> 不同。</p><p>最好不要将秘密或敏感的信息放在 <strong>app.config</strong> 文件中，该文件是客户端公开的配置文件。</p><p><strong>两个配置（runtimeConifg、app.config）的区别：</strong> <strong>runtimeConfig</strong> 和 <strong>app.config</strong> 都用于向应用程序公开变量。对于这两个配置 <a href="https://nuxt.com/docs/getting-started/configuration#runtimeconfig-vs-appconfig" target="_blank" rel="noreferrer">Nuxt 官网也做出详细的对比</a>。</p><p>要确定是否应该使用其中一种，以下是一些指导原则：<strong>runtimeConfig</strong> 是用来定义环境变量的，比如： 运行时需要公共变量指定的私有或公共 token。而 <strong>app.config</strong> 是用来定义公共变量的，比如：在构建时确定的公共 token、网站配置等。</p><h1 id="nuxt基础知识" tabindex="-1">Nuxt基础知识 <a class="header-anchor" href="#nuxt基础知识" aria-label="Permalink to &quot;Nuxt基础知识&quot;">​</a></h1><h2 id="内置组件" tabindex="-1">内置组件 <a class="header-anchor" href="#内置组件" aria-label="Permalink to &quot;内置组件&quot;">​</a></h2><p>Nuxt3 框架也提供一些<a href="https://nuxt.com/docs/api/components/client-only" target="_blank" rel="noreferrer">内置的组件</a>，常用的如下：</p><p><a href="https://nuxt.com/docs/api/components/nuxt-layout" target="_blank" rel="noreferrer">NuxtLayout</a>：是 Nuxt 自带的页面布局组件。</p><p><a href="https://nuxt.com/docs/api/components/nuxt-welcome" target="_blank" rel="noreferrer">NuxtWelcome</a>：欢迎页面组件，该组件是 <a href="https://ui.nuxt.com/getting-started" target="_blank" rel="noreferrer">@nuxt/ui</a> 的一部分。</p><p><a href="https://nuxt.com/docs/api/components/client-only" target="_blank" rel="noreferrer">ClientOnly</a>：该组件中的默认插槽的内容只在客户端渲染，而fallback插槽的内容只在服务器端渲染。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;"> class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;home&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;我是Home Page&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">ClientOnly</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;我只会在 client 渲染&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;"> #</span><span style="color:#D19A66;">fallback</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;服务器端渲染的 loading 页面&lt;/</span><span style="color:#E06C75;">h2</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">ClientOnly</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><a href="https://nuxt.com/docs/api/components/nuxt-link" target="_blank" rel="noreferrer">NuxtLink</a>：是 Nuxt 自带的页面导航组件，是 Vue Router<code>&lt;RouterLink&gt;</code>组件 和 HTML<code>&lt;a&gt;</code>标签的封装。</p><p><a href="https://nuxt.com/docs/getting-started/seo-meta" target="_blank" rel="noreferrer">SEO组件</a>：<code>&lt;Title&gt;</code>, <code>&lt;Base&gt;</code>, <code>&lt;NoScript&gt;</code>, <code>&lt;Style&gt;</code>, <code>&lt;Meta&gt;</code>, <code>&lt;Link&gt;</code>, <code>&lt;Body&gt;</code>, <code>&lt;Html&gt;</code> and <code>&lt;Head&gt;</code>。</p><p><a href="https://nuxt.com/docs/api/components/nuxt-page" target="_blank" rel="noreferrer">NuxtPage</a>：是 Nuxt 自带的页面占位组件，需要显示位于目录中的顶级或嵌套页面 pages/ 目录中，是对 router-view 的封装。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;App&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!--是 对 router-view 封装 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="全局样式" tabindex="-1">全局样式 <a class="header-anchor" href="#全局样式" aria-label="Permalink to &quot;全局样式&quot;">​</a></h2><p><strong>编写全局样式、全局变量步骤</strong></p><p>在 assets 文件中编写全局样式，比如：globel.scss；</p><div class="language-scss line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">scss复制代码</span><span style="color:#7F848E;font-style:italic;">// 全局样式</span></span>
<span class="line"><span style="color:#E06C75;">$color</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">blue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">.global-style</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  color: </span><span style="color:#E06C75;">$color</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在 assets 文件中编写全局样式变量，比如： variables.scss；</p><div class="language-scss line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">scss复制代码</span><span style="color:#7F848E;font-style:italic;">// 定义全局的SCSS变量</span></span>
<span class="line"><span style="color:#E06C75;">$fsColor</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">purple</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">$fs20</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">20</span><span style="color:#E06C75;">px</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 混合</span></span>
<span class="line"><span style="color:#C678DD;">@mixin</span><span style="color:#61AFEF;"> border</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  border: </span><span style="color:#D19A66;">1</span><span style="color:#E06C75;">px</span><span style="color:#D19A66;"> solid</span><span style="color:#D19A66;"> red</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在 nuxt.config 中的 css 选项、vite 选项中进行配置，使定义的全局样式和全局变量生效</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// https://nuxt.com/docs/api/configuration/nuxt-config</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 定义全局样式</span></span>
<span class="line"><span style="color:#E06C75;">  css</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#98C379;">    &quot;@/assets/styles/global.scss&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 定义全局变量</span></span>
<span class="line"><span style="color:#E06C75;">  vite</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    css</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      preprocessorOptions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        scss</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">          // 自动的给 scss 模块首行添加额外的数据: @use &quot;@/assets/styles/variables.scss&quot; as *;</span></span>
<span class="line"><span style="color:#E06C75;">          additionalData</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;@use &quot;@/assets/styles/variables.scss&quot; as *;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>接着在命令行终端执行 <code>npm i –D sass</code> 即可，然后就可以在任意组件中或 scss 文件中直接使用全局变量</p><h2 id="资源的导入" tabindex="-1">资源的导入 <a class="header-anchor" href="#资源的导入" aria-label="Permalink to &quot;资源的导入&quot;">​</a></h2><h3 id="public目录" tabindex="-1">public目录 <a class="header-anchor" href="#public目录" aria-label="Permalink to &quot;public目录&quot;">​</a></h3><p>用作静态资源的公共服务器，可以在应用程序上通过 URL 直接访问</p><p>例如，引用 public/img/ 目录中的图像文件，在静态 URL 中可用 <code>/img/nuxt.png</code> 表示</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- public 资源的访问 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/img/nuxt.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>静态的 URL 也支持在背景中使用，如 <code>background-image: url(/logo.png)</code></p><h3 id="assets目录" tabindex="-1">assets目录 <a class="header-anchor" href="#assets目录" aria-label="Permalink to &quot;assets目录&quot;">​</a></h3><p>assets 经常用于存放如样式表、字体或 SVG 等资源</p><p>可以直接使用 ~/assets/ 路径引用位于 assets 目录中的资源文件</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- assets 资源的访问 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;@/assets/images/avatar.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;~/assets/images/avatar.png&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;  </span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其实 ~/assets/ 路径也支持在背景中使用，如<code>background-image: url(@/assets/images/avatar.png)</code></p><h2 id="新建页面" tabindex="-1">新建页面 <a class="header-anchor" href="#新建页面" aria-label="Permalink to &quot;新建页面&quot;">​</a></h2><p>Nuxt 项目中的页面是在 pages 目录下创建的</p><p>在 pages 目录创建的页面，Nuxt 会根据该页面的目录结构和其文件名来自动生成对应的路由</p><p>页面路由也称为文件系统路由器（file system router），路由是 Nuxt 的核心功能之一</p><p><strong>新建页面步骤</strong></p><ol><li>创建页面文件，比如： <code>pages/index.vue</code></li><li>将 <code>&lt;NuxtPage /&gt;</code> 内置组件添加到 <code>app.vue</code></li><li>页面如果使用 <code>scss</code> 那么需要安装： <code>npm i sass -D</code></li></ol><p><strong>命令快速创建页面</strong></p><ol><li><code>npx nuxi add page home</code> 用来创建 home 页面</li><li><code>npx nuxi add page detail/[id]</code> 用来创建 detail 页面</li><li><code>npx nuxi add page user-[role]/[id]</code> 用来创建 user 页面</li></ol><h2 id="组件导航-nuxtlink" tabindex="-1">组件导航（NuxtLink） <a class="header-anchor" href="#组件导航-nuxtlink" aria-label="Permalink to &quot;组件导航（NuxtLink）&quot;">​</a></h2><p><code>&lt;NuxtLink&gt;</code> 是 Nuxt 内置的组件，用来实现页面导航，本质上是对 RouterLink 的扩展，底层用的是一个 <code>&lt;a&gt;</code> 标签，因此使用 a + href 属性也支持路由导航。与 <code>&lt;NuxtLink&gt;</code> 不同的是，用 a 标签导航会有触发浏览器默认的刷新事件，而 <code>&lt;NuxtLink&gt;</code> 不会， <code>&lt;NuxtLink&gt;</code> 还扩展了其它的属性和功能，因此在 Nuxt 中我们可以使用 <code>&lt;NuxtLink&gt;</code> 进行组件之间的导航。</p><p><strong><code>&lt;NuxtLink&gt;</code> 组件的部分属性：</strong></p><p><strong><code>to</code>：</strong> 支持路由路径、路由对象、 URL</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/about&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    About page</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  &lt;!-- &lt;a href=&quot;/about&quot;&gt;...&lt;/a&gt; (+Vue Router &amp; prefetching) --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  &lt;!-- 以路由对象的形式传入 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtLink</span></span>
<span class="line"><span style="color:#D19A66;">      :to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;{</span></span>
<span class="line"><span style="color:#98C379;">        path: &#39;/category&#39;,</span></span>
<span class="line"><span style="color:#98C379;">        query: {</span></span>
<span class="line"><span style="color:#98C379;">          id: 100</span></span>
<span class="line"><span style="color:#98C379;">      }</span></span>
<span class="line"><span style="color:#98C379;">    }&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">   &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">     &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;category&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">   &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong><code>href</code>：</strong> to 的别名</p><p><strong><code>target</code>：</strong> 和 a 标签的 target 一样，指定何种方式显示新页面</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> href</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;https://www.nuxt.com&quot;</span><span style="color:#D19A66;"> target</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;_blank&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;nuxt.com&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><code>replace</code>：</strong> 默认为 false，是否替换当前路由</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> href</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/find&quot;</span><span style="color:#D19A66;"> replace</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;find replace&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><code>activeClass</code>：</strong> 激活链接的类名</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/home&quot;</span><span style="color:#D19A66;"> active-class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;active-home&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;home&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="编程式导航" tabindex="-1">编程式导航 <a class="header-anchor" href="#编程式导航" aria-label="Permalink to &quot;编程式导航&quot;">​</a></h2><h3 id="navigateto" tabindex="-1">navigateTo <a class="header-anchor" href="#navigateto" aria-label="Permalink to &quot;navigateTo&quot;">​</a></h3><p>Nuxt3 除了可以通过 <code>&lt;NuxtLink&gt;</code> 内置组件来实现导航，同时也支持编程导航：<a href="https://nuxt.com/docs/api/utils/navigate-to" target="_blank" rel="noreferrer"><strong>navigateTo</strong></a>，通过编程式导航，在应用程序中就可以轻松实现动态导航了，但是编程式导航不利于 SEO。<strong>navigateTo 函数在服务器端和客户端都可用</strong>，可以<strong>在插件、中间件中使用</strong>，也可以<strong>直接调用执行页面导航</strong>。</p><p>其中 navigateTo( to , options) 函数包含<strong>两个参数</strong>：</p><p><strong>第一个参数 <code>to</code> 可以是纯字符串或外部 URL 或路由对象；</strong></p><p><strong>第二个参数 <code>options</code> 为导航配置</strong>：</p><ol><li>replace：默认为 false，为 true 时会替换当前路由页面</li><li>external：默认为 false，不允许导航到外部连接，true 则允许</li></ol><p><strong>在 Vue 组件中直接使用</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#E06C75;"> setup</span><span style="color:#E06C75;"> lang</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// passing &#39;to&#39; as a string</span></span>
<span class="line"><span style="color:#C678DD;">await</span><span style="color:#61AFEF;"> navigateTo</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/search&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ... or as a route object</span></span>
<span class="line"><span style="color:#C678DD;">await</span><span style="color:#61AFEF;"> navigateTo</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/search&#39;</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ... or as a route object with query parameters</span></span>
<span class="line"><span style="color:#C678DD;">await</span><span style="color:#61AFEF;"> navigateTo</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/search&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">  query</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    page</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    sort</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;asc&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#56B6C2;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>在中间件中使用</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">export default defineNuxtRouteMiddleware((to, from) =&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">  if (to.path !== &#39;/search&#39;) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    // setting the redirect code to &#39;301 Moved Permanently&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    return navigateTo(&#39;/search&#39;, { redirectCode: 301 })</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="userouter" tabindex="-1">useRouter <a class="header-anchor" href="#userouter" aria-label="Permalink to &quot;useRouter&quot;">​</a></h3><p>Nuxt3 中的编程导航除了可以通过 navigateTo 来实现导航，同时也支持 useRouter (或 Options API 的 this.$router)。</p><p><a href="https://nuxt.com/docs/api/composables/use-router" target="_blank" rel="noreferrer">useRouter 常用的 API：</a></p><ol><li>back：页面返回，同 router.go(-1)</li><li>forward：页面前进，同 router.go(1)</li><li>go：页面返回或前进，如 router.go(-1) or router.go(1)</li><li>push：以编程方式导航到新页面，建议改用 navigateTo，支持性更好</li><li>replace：以编程方式导航到新页面，但会替换当前路由，建议改用 navigateTo，支持性更好</li><li>beforeEach：路由守卫钩子，每次导航前执行（用于全局监听）</li><li>afterEach：路由守卫钩子，每次导航后执行（用于全局监听）</li></ol><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- 通过编程的方式进行导航 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> @click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;goToHome&quot;</span><span style="color:#ABB2BF;">&gt;Go Home&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  &lt;!-- 是对router-view的封装 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// useRouter</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRouter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> goToHome</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">  router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/home&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> goBack</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">  router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">go</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 路由的守卫</span></span>
<span class="line"><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beforeEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">form</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">form</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="动态路由" tabindex="-1">动态路由 <a class="header-anchor" href="#动态路由" aria-label="Permalink to &quot;动态路由&quot;">​</a></h2><p>Nuxt3 和 Vue 一样，也是支持动态路由的，在 Nuxt3 中，动态路由是根据目录结构和文件的名称自动生成</p><p><strong>动态路由语法：</strong></p><ol><li>页面组件目录或页面组件文件都 支持 <strong>[ ]</strong> 方括号语法</li><li>方括号里编写动态路由的参数</li></ol><p>例如，动态路由支持如下写法：</p><ol><li><code>pages/detail/[id].vue</code> -&gt; <code>/detail/:id</code></li><li><code>pages/detail/user-[id].vue</code> -&gt; <code>/detail/user-:id</code></li><li><code>pages/detail/[role]/[id].vue</code> -&gt; <code>/detail/:role/:id</code></li><li><code>pages/detail-[role]/[id].vue</code> -&gt; <code>/detail-:role/:id</code></li></ol><h2 id="路由参数-useroute" tabindex="-1">路由参数( useRoute ) <a class="header-anchor" href="#路由参数-useroute" aria-label="Permalink to &quot;路由参数( useRoute )&quot;">​</a></h2><h3 id="动态路由参数" tabindex="-1">动态路由参数 <a class="header-anchor" href="#动态路由参数" aria-label="Permalink to &quot;动态路由参数&quot;">​</a></h3><p>通过 <strong>[ ]</strong> 方括号语法定义动态路由，比如： <code>/detail/[id].vue</code>。</p><p>页面跳转时，在 URL 路径中传递动态路由参数，比如： <code>/detail/100</code>。</p><p>目标页面通过 <code>route.params</code> 获取动态路由参数。</p><p><strong>示例：导航页面</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/detail/100&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;detail&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- router-view --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>示例：获取数据页面</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;id={{ id }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 拿到动态路由的参数</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRoute</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">params</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> scoped</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="查询字符串参数" tabindex="-1">查询字符串参数 <a class="header-anchor" href="#查询字符串参数" aria-label="Permalink to &quot;查询字符串参数&quot;">​</a></h3><p>页面跳转时，通过查询字符串方式传递参数，比如： <code>/detail/100?name=zhangsan</code>。</p><p>目标页面通过 <code>route.query</code> 获取查询字符串参数。</p><p><strong>示例：导航页面</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#D19A66;"> to</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/detail/100?name=zhangsan&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;detail&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">NuxtLink</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- router-view --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>示例：获取数据页面</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;id={{ id }} name={{ name }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 获取动态路由的参数</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRoute</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">params</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">query</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> scoped</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="路由匹配规则" tabindex="-1">路由匹配规则 <a class="header-anchor" href="#路由匹配规则" aria-label="Permalink to &quot;路由匹配规则&quot;">​</a></h2><p>路由匹配需注意的事项，预定义路由优先于动态路由，动态路由优先于捕获所有路由</p><p><strong>预定义路由：</strong><code>pages/detail/create.vue</code></p><ol><li>将匹配 <code>/detail/create</code></li></ol><p><strong>动态路由：</strong><code>pages/detail/[id].vue</code></p><ol><li>将匹配 <code>/detail/1</code>、<code>/detail/abc</code> 等</li><li>但不匹配 <code>/detail/create</code> 、<code>/detail/1/1</code>、<code>/detail/</code> 等</li></ol><p><strong>捕获所有路由：</strong><code>pages/detail/[...slug].vue</code></p><ol><li>将匹配 <code>/detail/1/2</code>, <code>/detail/a/b/c</code> 等</li><li>但不匹配 <code>/detail</code> 等</li></ol><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>Nuxt 框架是开箱即用的，并且学习成本也非常低，我们需要做的事情 Nuxt 都帮我们做好了，因此我们只要专注于业务的开发，而无需关心那些繁琐的配置。</p><p>对于一些内置的 API，我们不需要导入就可以直接使用；对于注册路由，我们直接使用 Nuxt 给我们提供的动态路由就可以直接导航到相应的页面，并直接获取路由参数；对于代码规范，Nuxt 也帮我们内置好了，布局相关的组件，我们直接只用 layout，有关中间件相关的，我们直接在 middleware 文件夹下定义。</p><p>Nuxt 相关的知识点不止这些，我们打开 Nuxt 官网大致浏览一下就会发现，内容非常丰富，知识点非常多，不过不用焦虑，由浅入深，分章节去学习是最好的方式。在下一篇文章《拥抱全栈框架 Nuxt | 进阶篇》中，我们会学习到 Nuxt 的页面渲染、插件开发、如何书写中间件、如何发送网络请求获取数据、如何写 API 接口、如何引入状态管理库 Pinia，以及如何引入第三方组件库等内容。</p><h2 id="_1-页面配置" tabindex="-1">1.页面配置 <a class="header-anchor" href="#_1-页面配置" aria-label="Permalink to &quot;1.页面配置&quot;">​</a></h2><p>根目录 app.vue 文件标签：</p><p><a href="https://v3.nuxtjs.org/api/components/nuxt-page" target="_blank" rel="noreferrer">NuxtPage</a>：默认显示的<strong>pages 目录</strong>的页面，首页为 index.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- app.vue --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a href="https://v3.nuxtjs.org/api/components/nuxt-layout" target="_blank" rel="noreferrer">NuxtLayout</a>：默认显示<strong>layouts 目录</strong>的布局页面，默认页是：default.vue</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- app.vue --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">NuxtLayout</span><span style="color:#D19A66;"> :name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;layout&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">NuxtLayout</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> layout</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;custom&#39;</span><span style="color:#7F848E;font-style:italic;"> // 指定layout为custom页，标签内使用 :name=&quot;layout&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><a href="https://v3.nuxtjs.org/api/components/nuxt-welcome" target="_blank" rel="noreferrer">NuxtWelcome</a>：默认的欢迎页面</p><h2 id="_2-页面路由" tabindex="-1">2.页面路由 <a class="header-anchor" href="#_2-页面路由" aria-label="Permalink to &quot;2.页面路由&quot;">​</a></h2><h3 id="pages-里面的页面都会自动生成路由" tabindex="-1">pages 里面的页面都会自动生成路由 <a class="header-anchor" href="#pages-里面的页面都会自动生成路由" aria-label="Permalink to &quot;pages 里面的页面都会自动生成路由&quot;">​</a></h3><p>可以是<mark>vue 组件</mark>或者后缀名为<code>.vue\`\`\`.js</code>.jsx<code>.ts</code>.tsx\`的文件</p><h3 id="路由跳转" tabindex="-1">路由跳转 <a class="header-anchor" href="#路由跳转" aria-label="Permalink to &quot;路由跳转&quot;">​</a></h3><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">nav</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;ul&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li&gt;&lt;NuxtLink to=&quot;/&quot;&gt;index&lt;/NuxtLink&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li&gt;&lt;NuxtLink to=&quot;/about&quot;&gt;About&lt;/NuxtLink&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li v-for=&quot;id in [1,2,3]&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;NuxtLink :to=&quot;{path: \`/posts/\${id}\`}&quot;&gt;Post {{id}}&lt;/NuxtLink&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li&gt;&lt;NuxtLink to=&quot;/posts/1&quot;&gt;click 1&lt;/NuxtLink&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li&gt;&lt;NuxtLink to=&quot;/posts/2&quot;&gt;click 2&lt;/NuxtLink&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;li&gt;&lt;button @click=&quot;$router.push(&#39;/about&#39;)&quot;&gt;跳转about&lt;/button&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">nav</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="router-和-route" tabindex="-1">router 和 route <a class="header-anchor" href="#router-和-route" aria-label="Permalink to &quot;router 和 route&quot;">​</a></h3><p>可以在 script 标签内通过 useRouter()useRoute()和获得，或者在 template 标签内通过$router和$route 获得</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&#39;ts&#39;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRouter</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;router&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">router</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRoute</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;route.query&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">query</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;route.params&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    ID：{{ $route.params.id }}</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    posts-{{ $route.params.id }}</span></span>
<span class="line"><span style="color:#ABB2BF;">    {{$router.hasRoute}}</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="编程式导航-1" tabindex="-1">编程式导航 <a class="header-anchor" href="#编程式导航-1" aria-label="Permalink to &quot;编程式导航&quot;">​</a></h3><p><code>navigateTo()</code>和<code>navigate()</code></p><p>**注意：**确保始终通过从函数返回来链接其结果。<code> await</code>、<code>navigateTo </code></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRouter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> name</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> type</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#61AFEF;"> navigate</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#C678DD;">  return</span><span style="color:#61AFEF;"> navigateTo</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">    path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/search&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    query</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">name</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">type</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="页面或者组件切换过渡动画配置" tabindex="-1">页面或者组件切换过渡动画配置 <a class="header-anchor" href="#页面或者组件切换过渡动画配置" aria-label="Permalink to &quot;页面或者组件切换过渡动画配置&quot;">​</a></h3><p>文档：<a href="https://v3.nuxtjs.org/getting-started/transitions#page-transitions" target="_blank" rel="noreferrer">过渡 ·努克斯特 (nuxtjs.org)</a></p><p>1.为所有页面设置过渡：</p><p>2.为页面设置不同的过渡：</p><p>3.为布局设置过渡：<a href="https://v3.nuxtjs.org/getting-started/transitions#layout-transitions" target="_blank" rel="noreferrer">Transitions · Nuxt (nuxtjs.org)</a></p><p>4.禁用特定页面的过：<a href="https://v3.nuxtjs.org/getting-started/transitions#disable-transitions" target="_blank" rel="noreferrer">Transitions · Nuxt (nuxtjs.org)</a></p><p>5.高度动态和自定义的过渡：<a href="https://v3.nuxtjs.org/getting-started/transitions#javascript-hooks" target="_blank" rel="noreferrer">Transitions · Nuxt (nuxtjs.org)</a></p><p>6.使用 NuxtPage 进行过渡：<a href="https://v3.nuxtjs.org/getting-started/transitions#transition-with-nuxtpage" target="_blank" rel="noreferrer">Transitions · Nuxt (nuxtjs.org)</a></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// nuxt.config.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	app</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		pageTransition</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;page&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;out-in&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>app.vue 文件设置动画</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#D19A66;">	.page-enter-active</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#D19A66;">	.page-leave-active</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		transition: </span><span style="color:#D19A66;">all</span><span style="color:#D19A66;"> 0.4</span><span style="color:#E06C75;">s</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#D19A66;">	.page-enter-from</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#D19A66;">	.page-leave-to</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		opacity: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		filter: </span><span style="color:#56B6C2;">blur</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#E06C75;">rem</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_3-middleware-文件夹-中间件的使用-路由前置守卫" tabindex="-1">3.middleware 文件夹：中间件的使用(路由前置守卫) <a class="header-anchor" href="#_3-middleware-文件夹-中间件的使用-路由前置守卫" aria-label="Permalink to &quot;3.middleware 文件夹：中间件的使用(路由前置守卫)&quot;">​</a></h2><p>nuxt.config.ts：是路由的全局守卫</p><p>1.定义中间件：middleware\\auth.ts</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// auth.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtRouteMiddleware</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;auth&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.页面内使用中间件：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">definePageMeta</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  middleware</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;auth&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#7F848E;font-style:italic;">// 中间件文件名字</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // or middleware: &#39;auth&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>3.动态添加或重写中间件：</p><p>可以使用辅助函数手动添加全局或命名路由中间件，下例是在插件目录中定义中间件：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// plugins/mideleware.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtPlugin</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">	addRouteMiddleware</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">		&quot;global-test&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">				&quot;this global middleware was added in a plugin and will be run on every route change&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">			);</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">		{ </span><span style="color:#E06C75;">global</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">	);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">	addRouteMiddleware</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;named-test&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">		console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#98C379;">			&quot;this named middleware was added in a plugin and would override any existing middleware of the same name&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">		);</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>调用也和上面的一样</p><h2 id="_4-meta-等标签的-seo-优化相关" tabindex="-1">4.Meta 等标签的 SEO 优化相关 <a class="header-anchor" href="#_4-meta-等标签的-seo-优化相关" aria-label="Permalink to &quot;4.Meta 等标签的 SEO 优化相关&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/seo-meta#components" target="_blank" rel="noreferrer">SEO and Meta · Nuxt (nuxtjs.org)</a></p><p>useHead 的标签组件：<a href="https://v3.nuxtjs.org/getting-started/seo-meta#components" target="_blank" rel="noreferrer">https://v3.nuxtjs.org/getting-started/seo-meta#components</a></p><p>useHead 的属性类型和作用：<a href="https://v3.nuxtjs.org/api/composables/use-head" target="_blank" rel="noreferrer">https://v3.nuxtjs.org/api/composables/use-head</a></p><p>SEO 标签总结 1：<a href="https://www.cnblogs.com/colorful-paopao1/p/10189962.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/colorful-paopao1/p/10189962.html</a></p><p>SEO 标签总结 2：<a href="https://www.cnblogs.com/hellowzd/p/6177836.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/hellowzd/p/6177836.html</a></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&#39;ts&#39;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">  useHead</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 网站标题（title）：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 一般设置3~5个关键词+一个品牌词，关键词要与网站定位相关，同时包含核心业务。当然，最好还要结合用户的搜索习惯。</span></span>
<span class="line"><span style="color:#E06C75;">    title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;导航首页&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 当前页面标题</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 标题模板</span></span>
<span class="line"><span style="color:#61AFEF;">    titleTemplate</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">title</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#E06C75;"> title</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> \`</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">title</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> - 前端|后端|学习|导航|前端导航|后端导航|前端库导航|前端学习导航\`</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &#39;前端|后端|学习|导航|前端导航|后端导航|前端库导航|前端学习导航&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    meta</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 网站描述（description）：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 主要是网站介绍的内容，可以适当包含title中的关键词，字数一般控制在70左右。正确填写网站描述，除了可提升网站业务相关性外，还能够增强网站关键词的匹配度，有利于网站关键词排名。</span></span>
<span class="line"><span style="color:#ABB2BF;">      { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;description&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;好用的前端后端开发者的导航网站，包含前端的学习资料，练习项目，面试题库，后端各种库的导航和学习资料&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 网站关键词（keyword）：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 设置关键词标签更多是辅助的作用，而且不会展示在搜索结果中，提炼时候可以重复title的内容。相对来说也没有标题和描述那么重要，但按照规范填写肯定更好。</span></span>
<span class="line"><span style="color:#ABB2BF;">      { </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;keyword&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;前端|后端|学习|导航|前端导航|后端导航|前端库导航|前端学习导航&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    ],</span></span>
<span class="line"><span style="color:#E06C75;">    script</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">      { </span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;console.log(</span><span style="color:#56B6C2;">\\&#39;</span><span style="color:#98C379;">Hello word</span><span style="color:#56B6C2;">\\&#39;</span><span style="color:#98C379;">)&#39;</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">  })</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">img</span><span style="color:#D19A66;"> src</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;/img/qr.jpg&quot;</span><span style="color:#D19A66;"> alt</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;二维码图片2&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> scoped</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;scss&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>与上列标签对应的组件</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">Title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Base&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Script&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;NoScript&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Style&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Meta&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Link&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Body&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Html&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;Head&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_5-自定义-hook-函数" tabindex="-1">5.自定义 hook 函数 <a class="header-anchor" href="#_5-自定义-hook-函数" aria-label="Permalink to &quot;5.自定义 hook 函数&quot;">​</a></h2><p><strong>composables 目录下定义文件，默认情况下不可再有文件夹，因为 Nuxt 默认只扫描该目录下的顶层的文件</strong></p><p><a href="https://v3.nuxtjs.org/guide/directory-structure/composables#how-files-are-scanned" target="_blank" rel="noreferrer">Composables · Nuxt Directory Structure (nuxtjs.org)</a></p><h3 id="定义" tabindex="-1">定义 <a class="header-anchor" href="#定义" aria-label="Permalink to &quot;定义&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// composables/useFoo.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用命名导出</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#61AFEF;"> useFoo</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> useState</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;foo&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> &quot;bar&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用默认导出</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// export default function () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   return useState(&#39;foo&#39;, () =&gt; &#39;bar&#39;)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="页面内使用-定义的方法会自动导入-可在-js-ts-vue文件中使用" tabindex="-1">页面内使用：定义的方法会自动导入，可在<code>.js\`\`.ts\`\`.vue</code>文件中使用 <a class="header-anchor" href="#页面内使用-定义的方法会自动导入-可在-js-ts-vue文件中使用" aria-label="Permalink to &quot;页面内使用：定义的方法会自动导入，可在\` .js\`\`.ts\`\`.vue \`文件中使用&quot;">​</a></h5><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;{{ foo }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> foo</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useFoo</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 使用</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">工具</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="工具函数嵌套组合使用" tabindex="-1">工具函数嵌套组合使用 <a class="header-anchor" href="#工具函数嵌套组合使用" aria-label="Permalink to &quot;工具函数嵌套组合使用&quot;">​</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// composables/test.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#61AFEF;"> useFoo</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> nuxtApp</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useNuxtApp</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> bar</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useBar</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="访问插件" tabindex="-1">访问插件 <a class="header-anchor" href="#访问插件" aria-label="Permalink to &quot;访问插件&quot;">​</a></h5><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// composables/test.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> const</span><span style="color:#61AFEF;"> useHello</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> nuxtApp</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useNuxtApp</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E5C07B;"> nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$hello</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_6-server-服务器目录" tabindex="-1">6.server 服务器目录 <a class="header-anchor" href="#_6-server-服务器目录" aria-label="Permalink to &quot;6.server 服务器目录&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/guide/directory-structure/server#server-directory" target="_blank" rel="noreferrer">Server · Nuxt Directory Structure (nuxtjs.org)</a></p><hr><p>Nuxt 会自动扫描 、 和目录中的文件，以使用 HMR 支持注册 API 和服务器处理程序。</p><h3 id="server-api-服务器-api-接口目录" tabindex="-1"><code>~/server/api</code>：服务器 API 接口目录 <a class="header-anchor" href="#server-api-服务器-api-接口目录" aria-label="Permalink to &quot;\`~/server/api\`：服务器 API 接口目录&quot;">​</a></h3><h4 id="_6-1-在根目录下位置创建文件夹下的新文件-server-api-hello-ts" tabindex="-1">6.1.在根目录下位置创建文件夹下的新文件：<code>server/api/hello.ts</code> <a class="header-anchor" href="#_6-1-在根目录下位置创建文件夹下的新文件-server-api-hello-ts" aria-label="Permalink to &quot;6.1.在根目录下位置创建文件夹下的新文件：\`server/api/hello.ts\`&quot;">​</a></h4><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;hello event&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		data</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;hello word&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	};</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>1.2.页面中调用此 API：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">await</span><span style="color:#61AFEF;"> $fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/api/hello&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>1.3 浏览器中访问：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">http://localhost:3000/api/hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_6-2-匹配路由参数的-api-接口" tabindex="-1">6.2.匹配路由参数的 API 接口 <a class="header-anchor" href="#_6-2-匹配路由参数的-api-接口" aria-label="Permalink to &quot;6.2.匹配路由参数的 API 接口&quot;">​</a></h4><p>新建目录下的文件：<code>~/server/api/user/[name].ts</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">	(</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> \`Hello, </span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">!\`</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>6.2.1 页面内调用：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// user后面的/nuxt就是返回来的：event.context.params.name</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> nuxt</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> $fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/api/user/nuxt&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_6-3-匹配-http-方法-四种方法-get、-post、-put、-delete" tabindex="-1">6.3.匹配 HTTP 方法：四种方法：.get、.post、.put、.delete <a class="header-anchor" href="#_6-3-匹配-http-方法-四种方法-get、-post、-put、-delete" aria-label="Permalink to &quot;6.3.匹配 HTTP 方法：四种方法：.get、.post、.put、.delete&quot;">​</a></h4><p>api 名.方法名.ts，例子：test.post.ts、test.get.ts</p><p>如果不写方法名，默认是 get 方法</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/test.get.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> &quot;Test get handler&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/test.post.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> &quot;Test post handler&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_6-4-包罗万象-捕获所有路由有助于回退路由处理" tabindex="-1">6.4.包罗万象：捕获所有路由有助于回退路由处理 <a class="header-anchor" href="#_6-4-包罗万象-捕获所有路由有助于回退路由处理" aria-label="Permalink to &quot;6.4.包罗万象：捕获所有路由有助于回退路由处理&quot;">​</a></h4><h6 id="_6-4-1-与任何路由处理程序不匹配的-所有请求注册一个-catch-all-错误捕捉" tabindex="-1">6.4.1 与任何路由处理程序不匹配的 所有请求注册一个 catch-all 错误捕捉 <a class="header-anchor" href="#_6-4-1-与任何路由处理程序不匹配的-所有请求注册一个-catch-all-错误捕捉" aria-label="Permalink to &quot;6.4.1 与任何路由处理程序不匹配的 所有请求注册一个 catch-all 错误捕捉&quot;">​</a></h6><p><code>~/server/api/foo/[...].ts</code>：catch-all 错误捕捉</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> \`Default foo handler\`</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>请求一个 foo 下不存在的接口：便会默认请求到上面的接口</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">http</span><span style="color:#ABB2BF;">:</span><span style="color:#7F848E;font-style:italic;">//localhost:3000/api/foo/dd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_6-5-处理请求-使用实例" tabindex="-1">6.5.处理请求：使用实例 <a class="header-anchor" href="#_6-5-处理请求-使用实例" aria-label="Permalink to &quot;6.5.处理请求：使用实例&quot;">​</a></h4><h6 id="_6-5-1-使用-readbody-正文处理请求" tabindex="-1">6.5.1 使用 readBody 正文处理请求 <a class="header-anchor" href="#_6-5-1-使用-readbody-正文处理请求" aria-label="Permalink to &quot;6.5.1 使用 readBody 正文处理请求&quot;">​</a></h6><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/submit.post.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> readBody</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>页面内   调用此 API： <code>$fetch(&#39;/api/submit&#39;, { method: &#39;post&#39;, body: { test: 123 } })</code></p><h6 id="_6-5-2-使用-getquery-查询参数处理请求" tabindex="-1">6.5.2 使用 getQuery 查询参数处理请求 <a class="header-anchor" href="#_6-5-2-使用-getquery-查询参数处理请求" aria-label="Permalink to &quot;6.5.2 使用 getQuery 查询参数处理请求&quot;">​</a></h6><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/query.get.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> query</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> getQuery</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">query</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">param1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">query</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">param2</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>浏览器页面参数示例查询：<code>/api/query?param1=a&amp;param2=b</code></p><h6 id="_6-5-3-访问请求-cookies" tabindex="-1">6.5.3 访问请求 cookies <a class="header-anchor" href="#_6-5-3-访问请求-cookies" aria-label="Permalink to &quot;6.5.3 访问请求 cookies&quot;">​</a></h6><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> cookies</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> parseCookies</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">cookies</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="_6-5-4-访问运行时配置-useruntimeconfig" tabindex="-1">6. 5.4 访问运行时配置：useRuntimeConfig() <a class="header-anchor" href="#_6-5-4-访问运行时配置-useruntimeconfig" aria-label="Permalink to &quot;6. 5.4 访问运行时配置：useRuntimeConfig()&quot;">​</a></h6><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/foo.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> config</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRuntimeConfig</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">KEY</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_6-6-高级用法示例" tabindex="-1">6.6.高级用法示例 <a class="header-anchor" href="#_6-6-高级用法示例" aria-label="Permalink to &quot;6.6.高级用法示例&quot;">​</a></h4><h6 id="_6-6-1-nitro的nuxt-config配置" tabindex="-1">6.6.1 <code>nitro</code>的<code>nuxt.config</code>配置 <a class="header-anchor" href="#_6-6-1-nitro的nuxt-config配置" aria-label="Permalink to &quot;6.6.1 \`nitro\`的\`nuxt.config\`配置&quot;">​</a></h6><p><a href="https://v3.nuxtjs.org/guide/directory-structure/server#nitro-configuration" target="_blank" rel="noreferrer">Server · Nuxt Directory Structure (nuxtjs.org)</a></p><h6 id="_6-6-2-使用嵌套路由-server-api-hello-ts" tabindex="-1">6.6.2 使用嵌套路由：server/api/hello.ts <a class="header-anchor" href="#_6-6-2-使用嵌套路由-server-api-hello-ts" aria-label="Permalink to &quot;6.6.2 使用嵌套路由：server/api/hello.ts&quot;">​</a></h6><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">createRouter</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;h3&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> createRouter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> &quot;Hello World&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#E06C75;"> router</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h6 id="_6-6-3-发送流" tabindex="-1">6.6.3 发送流 <a class="header-anchor" href="#_6-6-3-发送流" aria-label="Permalink to &quot;6.6.3 发送流&quot;">​</a></h6><p>**注意：**这是一项实验性功能，仅在 Node.js 环境中可用。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/foo.get.ts</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> fs</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;node:fs&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">sendStream</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &quot;h3&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#61AFEF;"> sendStream</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fs</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createReadStream</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/path/to/file&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h6 id="_6-6-4-返回旧版处理程序或中间件" tabindex="-1">6.6.4 返回旧版处理程序或中间件 <a class="header-anchor" href="#_6-6-4-返回旧版处理程序或中间件" aria-label="Permalink to &quot;6.6.4 返回旧版处理程序或中间件&quot;">​</a></h6><p><a href="https://v3.nuxtjs.org/guide/directory-structure/server#return-a-legacy-handler-or-middleware" target="_blank" rel="noreferrer">Server · Nuxt Directory Structure (nuxtjs.org)</a></p><h6 id="_6-6-5-服务存储" tabindex="-1">6.6.5 服务存储 <a class="header-anchor" href="#_6-6-5-服务存储" aria-label="Permalink to &quot;6.6.5 服务存储&quot;">​</a></h6><p><strong>6.6.5.1 使用 Redis 存储：nuxt.config.ts 文件设置</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	nitro</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		storage</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			redis</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">				driver</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;redis&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 使用Redis存储</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">				/* redis connector options */</span></span>
<span class="line"><span style="color:#E06C75;">				port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">6379</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// Redis port</span></span>
<span class="line"><span style="color:#E06C75;">				host</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;127.0.0.1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// Redis host</span></span>
<span class="line"><span style="color:#E06C75;">				username</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// needs Redis &gt;= 6</span></span>
<span class="line"><span style="color:#E06C75;">				password</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">				db</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// Defaults to 0</span></span>
<span class="line"><span style="color:#ABB2BF;">			},</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>6.6.5.2 服务器接口使用 Redis 存储：</strong></p><p>接口使用:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/test.post.ts：post接口使用</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> body</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> readBody</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	await</span><span style="color:#61AFEF;"> useStorage</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;redis:test&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#98C379;"> &quot;Data is set&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// server/api/test.get.ts：get接口使用</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> useStorage</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">getItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;redis:test&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>页面调用接口：</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;Post state: {{ resDataSuccess }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;Get Data: {{ resData.text }}&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">resDataSuccess</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> useFetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/api/test&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">		method</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;post&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">		body</span><span style="color:#ABB2BF;">: { </span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Nuxt is Awesome!&quot;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">resData</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> useFetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/api/test&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><h3 id="server-routes-服务器路由目录" tabindex="-1"><code>~/server/routes</code>：服务器路由目录 <a class="header-anchor" href="#server-routes-服务器路由目录" aria-label="Permalink to &quot;\`~/server/routes\`：服务器路由目录&quot;">​</a></h3><p>在根目录下新建文件夹下的文件：server\\routes\\hello.ts</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#98C379;"> &quot;Hello World!&quot;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>浏览器中访问：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">http</span><span style="color:#ABB2BF;">:</span><span style="color:#7F848E;font-style:italic;">//localhost:3000/hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h3 id="server-middleware-服务中间件目录" tabindex="-1"><code>~/server/middleware</code>：服务中间件目录 <a class="header-anchor" href="#server-middleware-服务中间件目录" aria-label="Permalink to &quot;\`~/server/middleware\`：服务中间件目录&quot;">​</a></h3><p>中间件处理程序将在任何其他服务器路由之前在每个请求上运行，用于添加或检查标头、记录请求或扩展事件的请求对象。</p><p>中间件处理程序不应返回任何内容（也不关闭或响应请求），而应仅检查或扩展请求上下文或引发错误。</p><p>服务器/中间件/日志</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;New request: &quot;</span><span style="color:#56B6C2;"> +</span><span style="color:#E5C07B;"> event</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>服务器/中间件/身份验证</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineEventHandler</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	event</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">auth</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">123</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h3 id="server-plugins-服务器插件目录" tabindex="-1"><code>~/server/plugins</code>：服务器插件目录 <a class="header-anchor" href="#server-plugins-服务器插件目录" aria-label="Permalink to &quot;\`~/server/plugins\`：服务器插件目录&quot;">​</a></h3><p>Nuxt 将自动读取目录中的任何文件，并将它们注册为 Nitro 插件。这允许扩展 Nitro 的运行时行为并挂钩到生命周期事件中。</p><p>在根目录下位置创建文件夹下的新文件：<code>server/plugins/nitroPlugin.ts</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNitroPlugin</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">nitroApp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Nitro plugin&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">nitroApp</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h3 id="server-utils-服务器公共工具程序目录" tabindex="-1"><code>~/server/utils</code>：服务器公共工具程序目录 <a class="header-anchor" href="#server-utils-服务器公共工具程序目录" aria-label="Permalink to &quot;\`~/server/utils\`：服务器公共工具程序目录&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="_7-使用-ui-组件库" tabindex="-1">7.使用 UI 组件库 <a class="header-anchor" href="#_7-使用-ui-组件库" aria-label="Permalink to &quot;7.使用 UI 组件库&quot;">​</a></h2><h5 id="官方教程-node-modules-组件安装路径里添加-nuxt-js-文件-里面写入配置" tabindex="-1">官方教程：node_modules 组件安装路径里添加 nuxt.js 文件，里面写入配置 <a class="header-anchor" href="#官方教程-node-modules-组件安装路径里添加-nuxt-js-文件-里面写入配置" aria-label="Permalink to &quot;官方教程：node_modules 组件安装路径里添加 nuxt.js 文件，里面写入配置&quot;">​</a></h5><p>官方文档：<a href="https://v3.nuxtjs.org/guide/directory-structure/components#library-authors" target="_blank" rel="noreferrer">Components · Nuxt Directory Structure (nuxtjs.org)</a></p><p>中文文档：<a href="https://www.nuxtjs.org.cn/directory-structure/components.html#%E5%BA%93%E4%BD%9C%E8%80%85" target="_blank" rel="noreferrer">components | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><h5 id="_2-在-plugins-目录下-用插件形式-使用-ui-组件库" tabindex="-1">2.在 plugins 目录下：用插件形式 使用 UI 组件库 <a class="header-anchor" href="#_2-在-plugins-目录下-用插件形式-使用-ui-组件库" aria-label="Permalink to &quot;2.在 plugins 目录下：用插件形式 使用 UI 组件库&quot;">​</a></h5><ol><li><p>安装所需的插件：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">yarn</span><span style="color:#98C379;"> add</span><span style="color:#D19A66;"> --dev</span><span style="color:#98C379;"> vue-gtag-next</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>创建一个插件文件<code>plugins/vue-gtag.client.js</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> VueGtag</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;vue-gtag-next&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtPlugin</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">nuxtApp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">	nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">vueApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">VueGtag</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">		property</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;GA_MEASUREMENT_ID&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><h5 id="_3-elementplus-引入" tabindex="-1">3. ElementPlus 引入 <a class="header-anchor" href="#_3-elementplus-引入" aria-label="Permalink to &quot;3. ElementPlus 引入&quot;">​</a></h5><p>官方文档：<a href="https://element-plus.gitee.io/zh-CN/guide/quickstart.html#%E4%BD%BF%E7%94%A8-nuxt-js" target="_blank" rel="noreferrer">快速开始 | Element Plus (gitee.io)</a></p><h5 id="_4-naiveui-引入" tabindex="-1">4.NaiveUI 引入 <a class="header-anchor" href="#_4-naiveui-引入" aria-label="Permalink to &quot;4.NaiveUI 引入&quot;">​</a></h5><p>官网：<a href="https://www.naiveui.com/" target="_blank" rel="noreferrer">Naive UI: 一个 Vue 3 组件库</a></p><p><a href="https://www.naiveui.com/zh-CN/os-theme/docs/ssr" target="_blank" rel="noreferrer">服务端渲染 Server-Sider Rendering - Naive UI</a></p><p><a href="https://www.bilibili.com/video/BV1Zt4y187EV?p=3&amp;spm_id_from=pageDriver&amp;vd_source=5f0c99b3deddffe219938763769b15ac" target="_blank" rel="noreferrer">课时 3.引入 NaiveUI 和基本使用_哔哩哔哩_bilibili</a></p><h2 id="_8-nuxt3-生命周期钩子" tabindex="-1">8.Nuxt3 生命周期钩子 <a class="header-anchor" href="#_8-nuxt3-生命周期钩子" aria-label="Permalink to &quot;8.Nuxt3 生命周期钩子&quot;">​</a></h2><p>Nuxt3 生命周期钩子列表文档：<a href="https://v3.nuxtjs.org/guide/going-further/hooks#lifecycle-hooks" target="_blank" rel="noreferrer">Lifecycle Hooks · Nuxt (nuxtjs.org)</a></p><p>生命周期钩子函数的用法：<a href="https://v3.nuxtjs.org/guide/going-further/hooks" target="_blank" rel="noreferrer">Lifecycle Hooks · Nuxt (nuxtjs.org)</a></p><h2 id="_9-plugins-nuxt-插件目录" tabindex="-1">9.plugins：Nuxt 插件目录 <a class="header-anchor" href="#_9-plugins-nuxt-插件目录" aria-label="Permalink to &quot;9.plugins：Nuxt 插件目录&quot;">​</a></h2><p>1.文档：<a href="https://v3.nuxtjs.org/guide/directory-structure/plugins" target="_blank" rel="noreferrer">Plugins · Nuxt Directory Structure (nuxtjs.org)</a></p><p>2.中文文档：<a href="https://www.nuxtjs.org.cn/directory-structure/plugins.html#%E6%8F%92%E4%BB%B6%E7%9B%AE%E5%BD%95" target="_blank" rel="noreferrer">插件 plugins | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><p>3.通过生命周期钩子来写插件，生命周期钩子文档：<a href="https://v3.nuxtjs.org/guide/going-further/hooks#lifecycle-hooks" target="_blank" rel="noreferrer">Lifecycle Hooks · Nuxt (nuxtjs.org)</a></p><p>4.生命周期钩子函数的用法：<a href="https://v3.nuxtjs.org/guide/going-further/hooks" target="_blank" rel="noreferrer">Lifecycle Hooks · Nuxt (nuxtjs.org)</a></p><h3 id="全局-loading-插件例子" tabindex="-1">全局 loading 插件例子 <a class="header-anchor" href="#全局-loading-插件例子" aria-label="Permalink to &quot;全局 loading 插件例子&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// plugins\\loading.ts</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1.导入相关的组件api</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2.生命周期中判断: 未开始，开始和完成 ，或发生错误时使用</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtPlugin</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">NuxtApp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> loading</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">	NuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hook</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;app:mounted&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">loading</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// 运行加载组件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			// loading.value = 加载组件</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">	NuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hook</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;page:start&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// loading.value?.start()</span><span style="color:#7F848E;font-style:italic;"> // 开始loading加载</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">	NuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hook</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;page:finish&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// loading.value?.finish()</span><span style="color:#7F848E;font-style:italic;"> // loading加载完成</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">	NuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hook</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;app:error&quot;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// 如果是在客户端</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">client</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;客户端app:error&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// 如果是在服务端</span></span>
<span class="line"><span style="color:#C678DD;">		if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">server</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">			console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;服务端app:error&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="_10-全局的错误处理" tabindex="-1">10.全局的错误处理 <a class="header-anchor" href="#_10-全局的错误处理" aria-label="Permalink to &quot;10.全局的错误处理&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/error-handling" target="_blank" rel="noreferrer">Error handling · Nuxt (nuxtjs.org)</a></p><h2 id="_11-自定义全局错误页面" tabindex="-1">11.自定义全局错误页面 <a class="header-anchor" href="#_11-自定义全局错误页面" aria-label="Permalink to &quot;11.自定义全局错误页面&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/error-handling#rendering-an-error-page" target="_blank" rel="noreferrer">Error handling · Nuxt (nuxtjs.org)</a></p><p>1.在根目录新建文件：error.vue 文件</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;发生了错误！！！&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">button</span><span style="color:#D19A66;"> @click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;handleError&quot;</span><span style="color:#ABB2BF;">&gt;返回首页&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#61AFEF;"> handleError</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> clearError</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">redirect</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>完成后重新启动项目</p><h2 id="_12-通过插件实现-全局-loading-组件" tabindex="-1">12.通过插件实现：全局 loading 组件 <a class="header-anchor" href="#_12-通过插件实现-全局-loading-组件" aria-label="Permalink to &quot;12.通过插件实现：全局 loading 组件&quot;">​</a></h2><p>1.nuxt 自带的路由跳转 全局顶部 loading 加载组件： <a href="https://v3.nuxtjs.org/api/components/nuxt-loading-indicator" target="_blank" rel="noreferrer">· Nuxt Components (nuxtjs.org)</a></p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- app.vue文件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;</span><span style="color:#E06C75;">NuxtLayout</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">NuxtLoadingIndicator</span></span>
<span class="line"><span style="color:#D19A66;">				color</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;#FF0000&quot;</span></span>
<span class="line"><span style="color:#D19A66;">				height</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;3&quot;</span></span>
<span class="line"><span style="color:#D19A66;">				duration</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;2000&quot;</span></span>
<span class="line"><span style="color:#D19A66;">				throttle</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;200&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">			/&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			&lt;!-- 在页面导航上显示进度条 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">			&lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">			&lt;!-- 路由出口 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">		&lt;/</span><span style="color:#E06C75;">NuxtLayout</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">	&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>2.自定义插件全局 loading 组件：看<a href="#8pluginsnuxt插件目录">8.plugins：Nuxt 插件目录：全局 loading 插件例子</a>↑</p><h2 id="_13-全局化配置" tabindex="-1">13.全局化配置 <a class="header-anchor" href="#_13-全局化配置" aria-label="Permalink to &quot;13.全局化配置&quot;">​</a></h2><p>主题、命名空间、继承主题、语言配置、使用操作系统主题、禁用 inline 主题</p><p>以 NaiveUI 的全局化配置为例：<a href="https://www.naiveui.com/zh-CN/light/components/config-provider" target="_blank" rel="noreferrer">全局化配置 Config Provider - Naive UI</a></p><p>教程：<a href="https://www.bilibili.com/video/BV1Zt4y187EV/?p=8&amp;spm_id_from=pageDriver&amp;vd_source=5f0c99b3deddffe219938763769b15ac" target="_blank" rel="noreferrer">课时 8.主布局实现_哔哩哔哩_bilibili</a></p><h2 id="_14-数据交互" tabindex="-1">14.数据交互 <a class="header-anchor" href="#_14-数据交互" aria-label="Permalink to &quot;14.数据交互&quot;">​</a></h2><p>官网文档：<a href="https://v3.nuxtjs.org/getting-started/data-fetching" target="_blank" rel="noreferrer">Data Fetching · Nuxt (nuxtjs.org)</a></p><p>中文文档：<a href="https://www.nuxtjs.org.cn/usage/data-fetching.html" target="_blank" rel="noreferrer">获取数据 | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><p><code>Nuxt3</code>提供了 4 种方式使得你可以在服务器端异步获取数据</p><ul><li>useAsyncData</li><li>useLazyAsyncData （useAsyncData+lazy:true）</li><li>useFetch</li><li>useLazyFetch （useFetch+lazy:true）</li></ul><blockquote><p>注意：他们只能在**<code>setup</code>**或者是<code>生命周期钩子</code>中使用</p></blockquote><h2 id="_15-状态管理" tabindex="-1">15.状态管理 <a class="header-anchor" href="#_15-状态管理" aria-label="Permalink to &quot;15.状态管理&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/state-management" target="_blank" rel="noreferrer">State Management · Nuxt (nuxtjs.org)</a></p><h2 id="_16-运行时配置" tabindex="-1">16.运行时配置 <a class="header-anchor" href="#_16-运行时配置" aria-label="Permalink to &quot;16.运行时配置&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/guide/going-further/runtime-config" target="_blank" rel="noreferrer">Runtime Config · Nuxt (nuxtjs.org)</a></p><h5 id="_1-公开的运行时配置" tabindex="-1">1 公开的运行时配置 <a class="header-anchor" href="#_1-公开的运行时配置" aria-label="Permalink to &quot;1 公开的运行时配置&quot;">​</a></h5><p>第二种方法看中文网文档：<a href="https://www.nuxtjs.org.cn/usage/runtime-config.html#%E5%85%AC%E5%BC%80%E8%BF%90%E8%A1%8C%E6%97%B6%E9%85%8D%E7%BD%AE-exposing-runtime-config" target="_blank" rel="noreferrer">运行时配置 Runtime Config | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><p>nuxt.config.ts 文件下配置 runtimeConfig：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	runtimeConfig</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// The private keys which are only available within server-side</span></span>
<span class="line"><span style="color:#E06C75;">		apiSecret</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;123&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">		// Keys within public, will be also exposed to the client-side</span></span>
<span class="line"><span style="color:#E06C75;">		public</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			apiBase</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/api&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>页面或服务器中使用（访问时运行）</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> runtimeConfig</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRuntimeConfig</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">runtimeConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">apiSecret</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">runtimeConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">public</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">apiBase</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Vue 实例页面中直接访问配置</strong>：使用上面选项 API 配置时，可通过 下面命令获得公共运行时配置</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$config</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h6 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h6><p>除了一些进程(process)环境变量之外，如果在项目的根目录中有一个  <code>.env</code>  文件，它将自动加载到  <code>process.env</code>  中，并且可以在  <code>nuxt.config</code>  文件和模块中访问。</p><p>.env 文件：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// .env</span></span>
<span class="line"><span style="color:#E5C07B;">BASE_URL</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> https</span><span style="color:#ABB2BF;">:</span><span style="color:#7F848E;font-style:italic;">//nuxtjs.org</span></span>
<span class="line"><span style="color:#E5C07B;">API_SECRET</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> api_secret_token</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>nuxt.config.ts 文件下访问：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">	publicRuntimeConfig</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		BASE_URL</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">BASE_URL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	privateRuntimeConfig</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">		API_SECRET</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">process</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">env</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">API_SECRET</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="_2-访问运行时配置" tabindex="-1">2 访问运行时配置 <a class="header-anchor" href="#_2-访问运行时配置" aria-label="Permalink to &quot;2 访问运行时配置&quot;">​</a></h5><p><a href="https://www.nuxtjs.org.cn/usage/runtime-config.html#%E8%AE%BF%E9%97%AE%E8%BF%90%E8%A1%8C%E6%97%B6%E9%85%8D%E7%BD%AE-accessing-runtime-config" target="_blank" rel="noreferrer">运行时配置 Runtime Config | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><p>在 Nuxt 应用程序的 Vue 实例中，需要调用  <code>useRuntimeConfig()</code>  来访问运行时配置。</p><p>Vue 实例中访问：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;font-style:italic;"> setup</span><span style="color:#ABB2BF;">&gt;const config = useRuntimeConfig()&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>插件中访问：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtPlugin</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">nuxtApp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> config</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRuntimeConfig</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">	console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;API base URL:&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">public</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">apiBase</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>服务器路由中访问：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#C678DD;"> async</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">	const</span><span style="color:#E5C07B;"> result</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#61AFEF;"> $fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;https://my.api.com/test&quot;</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">		headers</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">			Authorization</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\`Bearer </span><span style="color:#C678DD;">\${</span><span style="color:#61AFEF;">useRuntimeConfig</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">apiSecret</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">		},</span></span>
<span class="line"><span style="color:#ABB2BF;">	});</span></span>
<span class="line"><span style="color:#C678DD;">	return</span><span style="color:#E06C75;"> result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>手动输入运行是配置：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">declare</span><span style="color:#C678DD;"> module</span><span style="color:#98C379;"> &#39;@nuxt/schema&#39;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  interface</span><span style="color:#E5C07B;"> RuntimeConfig</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    apiSecret</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span></span>
<span class="line"><span style="color:#E06C75;">    public</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      apiBase</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 确保在扩充类型时 import/export 某</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">declare</span><span style="color:#C678DD;"> module</span><span style="color:#98C379;"> &#39;@nuxt/schema&#39;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  interface</span><span style="color:#E5C07B;"> PublicRuntimeConfig</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    testConfig</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#C678DD;">  interface</span><span style="color:#E5C07B;"> PrivateRuntimeConfig</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    token</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 确保在扩充类型时 import/export 某些比较重要的内容</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h2><h2 id="_17-nuxt3-第三方模块" tabindex="-1">17.Nuxt3 第三方模块 <a class="header-anchor" href="#_17-nuxt3-第三方模块" aria-label="Permalink to &quot;17.Nuxt3 第三方模块&quot;">​</a></h2><p>模块预览地址：<a href="https://modules.nuxtjs.org/?version=3.x" target="_blank" rel="noreferrer">Explore Nuxt Modules (nuxtjs.org)</a></p><p>模块都是带有 nuxt 名字的库：可以点击进去，然后看文档在项目中安装使用.</p><p>在 nuxt.config.js 文件配置好模块后，模块都是和正常 vue3 项目的模块使用一样</p><p>@pinia/nuxt 状态管理库的配合 useState()使用：<a href="https://www.bilibili.com/video/BV15Q4y1v7ug/?spm_id_from=pageDriver&amp;vd_source=5f0c99b3deddffe219938763769b15ac" target="_blank" rel="noreferrer">【Nuxt3 从入门到实战】第八啪：巧用社区“模块”，让开发超级高效，让 Nuxt 更加强大！_哔哩哔哩_bilibili</a></p><h2 id="_18-测试" tabindex="-1">18.测试 <a class="header-anchor" href="#_18-测试" aria-label="Permalink to &quot;18.测试&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/testing" target="_blank" rel="noreferrer">Testing · Nuxt (nuxtjs.org)</a></p><h2 id="_19-编译" tabindex="-1">19.编译 <a class="header-anchor" href="#_19-编译" aria-label="Permalink to &quot;19.编译&quot;">​</a></h2><p>1.pnpm run build 后：会在项目目录生成 .output 这个打包后的目录</p><p>2.运行 pnpm run preview 命令，预览打包后的项目。</p><h2 id="_20-项目部署" tabindex="-1">20.项目部署 <a class="header-anchor" href="#_20-项目部署" aria-label="Permalink to &quot;20.项目部署&quot;">​</a></h2><p>文档：<a href="https://v3.nuxtjs.org/getting-started/deployment" target="_blank" rel="noreferrer">Deployment · Nuxt (nuxtjs.org)</a></p><p>中文文档：<a href="https://www.nuxtjs.org.cn/deployment/azure.html#azure-functions" target="_blank" rel="noreferrer">Azure | Nuxt 3 - 中文文档 (nuxtjs.org.cn)</a></p><p>在 nuxt 项目中的 server 目录中：index.ts 做反向代理，</p><h2 id="_21-nuxt-缺点" tabindex="-1">21.Nuxt 缺点 <a class="header-anchor" href="#_21-nuxt-缺点" aria-label="Permalink to &quot;21.Nuxt 缺点&quot;">​</a></h2><p>1.Nuxt 的 server 的服务器端存在缺点：</p><ul><li><p>没有数据校验：如何去校验前端传来的数据</p></li><li><p>缺少必要的 orm：对象与关系数据库之间的桥梁</p></li></ul><p><strong>建议使用-服务端渲染 + 其他后端语言作服务器接口 来结合 开发：CSR + SSR 相结合</strong></p><h1 id="nuxt3-引入模块库" tabindex="-1">Nuxt3 引入模块库 <a class="header-anchor" href="#nuxt3-引入模块库" aria-label="Permalink to &quot;Nuxt3 引入模块库&quot;">​</a></h1><p>从 <a href="https://nuxt.com/modules" target="_blank" rel="noreferrer"><strong>Nuxt Modules</strong></a> 中寻找想要引入的组件库，我们以 <a href="https://ui.nuxt.com/" target="_blank" rel="noreferrer">Nuxt UI</a> 为例，介绍如何在 Nuxt 中使用组件库，进入 <a href="https://ui.nuxt.com/" target="_blank" rel="noreferrer">Nuxt UI</a> 官网，参照文档要求进行安装。</p><p>首先，在项目根目录中打开命令行终端并输入：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npx</span><span style="color:#98C379;"> nuxi@latest</span><span style="color:#98C379;"> module</span><span style="color:#98C379;"> add</span><span style="color:#98C379;"> ui</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这样，nuxi 脚手架会自动帮我们下载 <code>@nuxt/ui</code> 这个第三方包并自动注册到 <code>nuxt.config.ts</code> 中的 <code>modules</code> 数组中，这样我们就可以在页面中直接使用。</p><p><img src="`+r+`" alt="image-20240606214853356"></p><p><strong>示例代码：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">UButton</span><span style="color:#ABB2BF;">&gt;Button&lt;/</span><span style="color:#E06C75;">UButton</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">UInput</span><span style="color:#D19A66;"> color</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;primary&quot;</span><span style="color:#D19A66;"> variant</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;outline&quot;</span><span style="color:#D19A66;"> placeholder</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;Search...&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>引入组件就能使用，能达到立竿见影的效果。</p><h1 id="路由中间件-middleware" tabindex="-1">路由中间件（middleware） <a class="header-anchor" href="#路由中间件-middleware" aria-label="Permalink to &quot;路由中间件（middleware）&quot;">​</a></h1><p>Nuxt 提供了一个可定制的<a href="https://nuxt.com/docs/guide/directory-structure/middleware" target="_blank" rel="noreferrer"><strong>路由中间件</strong></a>，用来监听路由的导航，包括：局部和全局监听，而全局监听支持在服务器和客户端执行，路由中间件分为三种：<strong>匿名（或内联）路由中间件</strong>，<strong>命名路由中间件</strong>和<strong>全局路由中间件</strong>。</p><h3 id="匿名-或内联-路由中间件" tabindex="-1">匿名（或内联）路由中间件 <a class="header-anchor" href="#匿名-或内联-路由中间件" aria-label="Permalink to &quot;匿名（或内联）路由中间件&quot;">​</a></h3><p>在页面中使用 <code>definePageMeta</code> 函数定义，可监听局部路由，当注册多个中间件时，会按照注册顺序来执行。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;我是 Parent 二级路由页面的子页面 child1&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">definePageMeta</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 路由中间件( 监听路由 )</span></span>
<span class="line"><span style="color:#E06C75;">  middleware</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 第一个中间件</span></span>
<span class="line"><span style="color:#C678DD;">    function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;child1 第一个中间件&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 第二个中间件</span></span>
<span class="line"><span style="color:#C678DD;">    function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // console.log(from)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // console.log(to)</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;child1 第二个中间件&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 第三个中间件</span></span>
<span class="line"><span style="color:#C678DD;">    function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;child1 第三个中间件&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> scoped</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>示例演示：</strong></p><p><img src="`+t+'" alt="g2.gif"></p><h3 id="命名路由中间件" tabindex="-1">命名路由中间件 <a class="header-anchor" href="#命名路由中间件" aria-label="Permalink to &quot;命名路由中间件&quot;">​</a></h3><p>命名路由中间件，需要在 middleware 目录中定义，会自动加载中间件，应遵循 kebab-case 命名规范。</p><p>例如，在 <code>/pages/middleware</code> 文件夹下定义一个 <code>home.ts</code> 的中间件。</p><p><img src="'+c+`" alt="image-20240606215202645"></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtRouteMiddleware</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;home 中间件&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后，在需要使用的页面引入，直接以字符串的形式传入 <code>middleware</code> 数组中。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;我是 Parent 二级路由页面的子页面 child2&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#61AFEF;">definePageMeta</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 路由中间件( 监听路由 )</span></span>
<span class="line"><span style="color:#E06C75;">  middleware</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;"> scoped</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>示例演示：</strong></p><p><img src="`+i+'" alt="g3.gif"></p><h3 id="全局路由中间件" tabindex="-1">全局路由中间件 <a class="header-anchor" href="#全局路由中间件" aria-label="Permalink to &quot;全局路由中间件&quot;">​</a></h3><p>需要定义在 middleware 目录中， 并且创建的文件要带 <code>.global</code> 后缀，每次路由更改都会自动运行</p><p><img src="'+B+`" alt="image-20240606215244561"></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 这个优先级别是比较高的</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtRouteMiddleware</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;auth.global.ts 全局路由中间件&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，每次路由更改的时候都会在每个页面中执行，值得注意的是，<strong>全局路由中间件的优先级是比较高的</strong>，执行的顺序要优于其它类型的中间件。</p><p><strong>示例演示：</strong></p><p><img src="`+y+`" alt="g4.gif"></p><h2 id="路由验证-validate" tabindex="-1">路由验证( validate ) <a class="header-anchor" href="#路由验证-validate" aria-label="Permalink to &quot;路由验证( validate )&quot;">​</a></h2><p>Nuxt 支持对每个页面路由进行验证，我们可以通过 <code>definePageMeta</code> 中的 <code>validate</code> 属性来对路由进行一定的规则验证。其中 <code>validate</code> 属性接受一个回调函数，回调函数中以 <code>route</code> 作为参数。</p><p>回调函数的返回值：一方面<strong>支持返回布尔类型</strong>的值来确定是否放行路由，返回 <code>true</code> 则放行路由，返回 <code>false</code> 则默认重定向到内置的 404 页面中；另一方面<strong>支持返回一个对象</strong>，例如，返回 <code>{ statusCode:401 }</code>，同样表示路由验证失败，返回到默认的 404 页面中。</p><p>值得一提的是，对于路由验证失败来说，也是可以自定义错误页面的，在项目根目录新建 <code>error.vue</code> 页面，注意不是 pages 目录中，而是项目根目录中。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> lang</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ts&quot;</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 获取动态路由的参数</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> route</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useRoute</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">params</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">definePageMeta</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // 路由参数的验证</span></span>
<span class="line"><span style="color:#61AFEF;">  validate</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">route</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">route</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 在这里可以进行路由参数的验证，如使用正则进行验证</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 1. 返回布尔值</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // return /^\\d+$/.test(route.params.id as string)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 2. 返回一个对象</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">      statusCode</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">401</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 路由验证失败</span></span>
<span class="line"><span style="color:#E06C75;">      statusMessage</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;validata router error&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="nuxt-插件" tabindex="-1">Nuxt 插件 <a class="header-anchor" href="#nuxt-插件" aria-label="Permalink to &quot;Nuxt 插件&quot;">​</a></h2><p>Nuxt 有一个插件系统，可以在创建 Vue 应用程序时使用 Vue 插件等，Nuxt 会自动读取 plugins/ 目录中的文件，并在创建 Vue 应用程序时加载它们。</p><p>因此 Nuxt 支持自定义插件并进行扩展，创建插件有两种方式：</p><p><strong>方式一</strong>：直接使用 <code>useNuxtApp()</code> 中的 <code>provide(name, vlaue)</code> 方法直接创建，例如：可在 app.vue 中创建。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 方式一：创建插件</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> nuxtApp</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useNuxtApp</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E5C07B;">nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;provId&quot;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  return</span><span style="color:#98C379;"> &quot;省份名称&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#E5C07B;">nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;feskill&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Nuxt&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用插件</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$provId</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$feskill</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>方式二</strong>：在 plugins 目录中创建插件，例如，在 plugins 目录下创建 <code>date.ts</code> 插件。</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtPlugin</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">nuxtApp</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">    provide</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 自定义的插件，在创建 Vue 实例时就会自动注册</span></span>
<span class="line"><span style="color:#61AFEF;">      formDate</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">date</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#98C379;"> &#39;日期：&#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#E06C75;"> date</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>然后在组件中使用 <code>useNuxtApp()</code> 方法来获取到插件中的方法</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 方式二：在 plugins 目录中创建插件后，可以在这里获取</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> nuxtApp</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> useNuxtApp</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用插件</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">nuxtApp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$formDate</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;2024-4-30&#39;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="nuxt使用数据库" tabindex="-1">Nuxt使用数据库 <a class="header-anchor" href="#nuxt使用数据库" aria-label="Permalink to &quot;Nuxt使用数据库&quot;">​</a></h1><h2 id="可选数据库" tabindex="-1">可选数据库 <a class="header-anchor" href="#可选数据库" aria-label="Permalink to &quot;可选数据库&quot;">​</a></h2><h3 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;MySQL&quot;">​</a></h3><p>流行的关系型数据库，适合需要高度可靠性和多用户环境的应用。</p><p>可以使用<code>mysql2</code>库来在Nuxt中创建后端接口并请求数据库数据</p><p>关系型数据库，适合需要复杂查询、事务处理和数据完整性的应用。你可以使用<code>mysql2</code>库在Nuxt中创建后端接口并请求数据库数据。</p><h3 id="postgresql-关系型数据库" tabindex="-1">PostgreSQL：关系型数据库 <a class="header-anchor" href="#postgresql-关系型数据库" aria-label="Permalink to &quot;PostgreSQL：关系型数据库&quot;">​</a></h3><p>如果你的网站需要复杂的查询和事务处理，PostgreSQL是一个强大的关系型数据库选项。它提供了丰富的数据类型和强大的数据完整性支持。</p><p>可以使用 <code>@nuxtjs/supabase</code> 模块来轻松集成Supabase，它是基于PostgreSQL的</p><p>可以轻松应对大数据集的场景，并且直接支持 JSON 数据类型存储</p><p><a href="https://juejin.cn/post/7249205118533009469" target="_blank" rel="noreferrer">🚨 踩坑记录：nuxt3 - ssg 重构我的前端导航网站 - 掘金 (juejin.cn)</a></p><p>PG是PostgreSQL数据库的Node连接库：<a href="https://www.npmjs.com/package/pg" target="_blank" rel="noreferrer">https://www.npmjs.com/package/pg</a></p><p>GitHub：<a href="https://github.com/brianc/node-postgres" target="_blank" rel="noreferrer">https://github.com/brianc/node-postgres</a></p><h3 id="mongodb数据库" tabindex="-1">MongoDB数据库 <a class="header-anchor" href="#mongodb数据库" aria-label="Permalink to &quot;MongoDB数据库&quot;">​</a></h3><p>非关系型数据库</p><ul><li>适合需要高性能、易扩展性和灵活的数据模型的应用。</li><li>适合存储文档类型的数据，如网站的URL、介绍、说明和图标等。</li></ul><p>它的灵活性和扩展性使得它成为一个不错的选择。对于Nuxt.js，你可以使用<code>nuxt-mongodb</code>模块来方便地集成MongoDB</p><p><a href="https://www.cnblogs.com/bokemoqi/p/17724956.html" target="_blank" rel="noreferrer">如何在Nuxt3.0中使用MongoDB数据库 - 莫颀 - 博客园 (cnblogs.com)</a></p><p>操作库：</p><p><strong>nuxt-mongoose</strong>：<a href="https://nuxt.com.cn/modules/nuxt-mongoose" target="_blank" rel="noreferrer">Nuxt-mongoose · Nuxt Modules</a></p><h3 id="supabase-数据库" tabindex="-1">Supabase 数据库 <a class="header-anchor" href="#supabase-数据库" aria-label="Permalink to &quot;Supabase 数据库&quot;">​</a></h3><p>官网：<a href="https://supabase.com/" target="_blank" rel="noreferrer">https://supabase.com/</a></p><p>GitHub：<a href="https://supabase.com/" target="_blank" rel="noreferrer">https://supabase.com/</a></p><p>是一个开源的Firebase替代品，提供了包括数据库在内的后端功能。它使用PostgreSQL作为数据库，并支持SQL和RESTful API访问。Nuxt集成了<code>@nuxtjs/supabase</code>模块，使得用户认证和身份鉴权变得简单</p><p><a href="https://cloud.tencent.com/developer/article/2420698" target="_blank" rel="noreferrer">Nuxt3 实战 (七)：配置 Supabase 数据库-腾讯云开发者社区-腾讯云 (tencent.com)</a></p><h2 id="数据库-orm" tabindex="-1">数据库 ORM <a class="header-anchor" href="#数据库-orm" aria-label="Permalink to &quot;数据库 ORM&quot;">​</a></h2><h3 id="prisma-数据库-orm" tabindex="-1">Prisma：数据库 ORM <a class="header-anchor" href="#prisma-数据库-orm" aria-label="Permalink to &quot;Prisma：数据库 ORM&quot;">​</a></h3><p>下一代 Node.js、TypeScript、Go 的数据库 ORM</p><p>Prisma是一个开源的数据库工具链项目，帮助开发人员更快地构建应用程序并减少错误，支持PostgreSQL、MySQL、MongoDB、SQL Server和SQLite。</p><ul><li><strong>官网</strong>：<a href="https://www.prisma.io/" target="_blank" rel="noreferrer">https://www.prisma.io/</a></li><li><strong>中文网</strong>：<a href="https://prisma.yoga/" target="_blank" rel="noreferrer">Prisma 官方中文文档 - 下一代Node.js、TypeScript、Go 的数据库 ORM</a></li><li><strong>GitHub</strong>：<a href="https://github.com/prisma/prisma" target="_blank" rel="noreferrer">https://github.com/prisma/prisma</a></li><li><strong>示例项目</strong>：<a href="https://github.com/prisma/prisma-examples" target="_blank" rel="noreferrer">https://github.com/prisma/prisma-examples</a></li></ul><h3 id="sequelize" tabindex="-1">Sequelize <a class="header-anchor" href="#sequelize" aria-label="Permalink to &quot;Sequelize&quot;">​</a></h3><p>功能丰富的 ORM 适用于现代 Node.js 和 TypeScript，它支持 PostgreSQL（支持 JSON 和 JSONB）、MySQL、MariaDB、SQLite、MS SQL Server、Snowflake、Oracle DB （v6）、DB2 和 DB2 for IBM i。</p><ul><li>官网：<a href="https://sequelize.org/" target="_blank" rel="noreferrer">https://sequelize.org/</a></li><li>GitHub：<a href="https://github.com/sequelize/sequelize" target="_blank" rel="noreferrer">https://github.com/sequelize/sequelize</a></li><li>中文网： <ul><li><a href="https://www.sequelize.cn/" target="_blank" rel="noreferrer">Sequelize 简介 | Sequelize中文文档 | Sequelize中文网</a></li></ul></li></ul><h3 id="typeorm" tabindex="-1">TypeORM <a class="header-anchor" href="#typeorm" aria-label="Permalink to &quot;TypeORM&quot;">​</a></h3><p>用于 TypeScript 和 JavaScript 的 ORM。支持MySQL、PostgreSQL、MariaDB、SQLite、MS SQL Server、Oracle、SAP Hana、WebSQL数据库。适用于 NodeJS、Browser、Ionic、Cordova 和 Electron 平台。</p><ul><li>官网：<a href="https://typeorm.io/" target="_blank" rel="noreferrer">https://typeorm.io/</a></li><li>GitHub：<a href="https://github.com/typeorm/typeorm" target="_blank" rel="noreferrer">https://github.com/typeorm/typeorm</a></li><li>中文网： <ul><li><a href="https://www.typeorm.org/" target="_blank" rel="noreferrer">开始入门 | TypeORM 中文文档</a></li><li><a href="https://www.typeorm.net/" target="_blank" rel="noreferrer">TypeORM - 一个 ORM 框架 | TypeORM中文文档 | TypeORM中文网</a></li><li><a href="https://typeorm.bootcss.com/" target="_blank" rel="noreferrer">TypeORM - 一个 ORM 框架 | TypeORM 中文文档 | TypeORM 中文网 (bootcss.com)</a></li></ul></li></ul><h1 id="集成express后端框架" tabindex="-1">集成Express后端框架 <a class="header-anchor" href="#集成express后端框架" aria-label="Permalink to &quot;集成Express后端框架&quot;">​</a></h1><h2 id="基本要求" tabindex="-1">基本要求 <a class="header-anchor" href="#基本要求" aria-label="Permalink to &quot;基本要求&quot;">​</a></h2><p>确保开发环境已经安装了 Node.js、npm、MySQL。</p><h2 id="步骤-1-创建-nuxt-js-项目" tabindex="-1">步骤 1: 创建 Nuxt.js 项目 <a class="header-anchor" href="#步骤-1-创建-nuxt-js-项目" aria-label="Permalink to &quot;步骤 1: 创建 Nuxt.js 项目&quot;">​</a></h2><p>使用 create-nuxt-app 创建一个新的 Nuxt.js 项目：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>选择所需的配置。一旦项目创建完毕，进入项目文件夹：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#98C379;"> nuxt-crud-demo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="步骤-2-添加-express-作为服务器" tabindex="-1">步骤 2: 添加 Express 作为服务器 <a class="header-anchor" href="#步骤-2-添加-express-作为服务器" aria-label="Permalink to &quot;步骤 2: 添加 Express 作为服务器&quot;">​</a></h2><p>在项目根目录中创建一个名为 server 的文件夹。在 server 文件夹内创建一个 index.js 文件，用于设置 Express 服务器。</p><p>安装 Express:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> express</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在 server/index.js 中添加基础服务器设置：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> express</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">&#39;express&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> app</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> express</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">app.use(express.json(</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> PORT</span><span style="color:#98C379;"> =</span><span style="color:#D19A66;"> 3001</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">app.listen(PORT,</span><span style="color:#ABB2BF;"> () =&gt; {</span></span>
<span class="line"><span style="color:#61AFEF;">  console.log(</span><span style="color:#98C379;">\`</span><span style="color:#61AFEF;">Server</span><span style="color:#98C379;"> running on port \${</span><span style="color:#E06C75;">PORT</span><span style="color:#98C379;">}\`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="步骤-3-配置-sequelize-和-mysql" tabindex="-1">步骤 3: 配置 Sequelize 和 MySQL <a class="header-anchor" href="#步骤-3-配置-sequelize-和-mysql" aria-label="Permalink to &quot;步骤 3: 配置 Sequelize 和 MySQL&quot;">​</a></h2><p>安装 Sequelize 和 MySQL2:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npm</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> sequelize</span><span style="color:#98C379;"> mysql2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在 server 文件夹中创建一个 Sequelize 配置。这涉及配置数据库连接和模型。这里只是一个示例：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">//</span><span style="color:#98C379;"> server/models/index.js</span></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> Sequelize</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">&#39;sequelize&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> sequelize</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> new</span><span style="color:#98C379;"> Sequelize</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">&#39;database&#39;</span><span style="color:#61AFEF;">,</span><span style="color:#98C379;"> &#39;username&#39;,</span><span style="color:#98C379;"> &#39;password&#39;,</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">  host:</span><span style="color:#98C379;"> &#39;localhost&#39;,</span></span>
<span class="line"><span style="color:#61AFEF;">  dialect:</span><span style="color:#98C379;"> &#39;mysql&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">const</span><span style="color:#98C379;"> Model</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> Sequelize.Model</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">class</span><span style="color:#98C379;"> User</span><span style="color:#98C379;"> extends</span><span style="color:#98C379;"> Model</span><span style="color:#98C379;"> {}</span></span>
<span class="line"><span style="color:#61AFEF;">User.init(</span><span style="color:#98C379;">{</span></span>
<span class="line"><span style="color:#61AFEF;">  username:</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#56B6C2;">    type</span><span style="color:#98C379;">:</span><span style="color:#98C379;"> Sequelize.STRING,</span></span>
<span class="line"><span style="color:#61AFEF;">    allowNull:</span><span style="color:#D19A66;"> false</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;">  //</span><span style="color:#98C379;"> 其他字段...</span></span>
<span class="line"><span style="color:#ABB2BF;">}, {</span></span>
<span class="line"><span style="color:#61AFEF;">  sequelize,</span></span>
<span class="line"><span style="color:#61AFEF;">  modelName:</span><span style="color:#98C379;"> &#39;user&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">sequelize.sync</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">module.exports</span><span style="color:#98C379;"> =</span><span style="color:#98C379;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">  User</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="步骤-4-创建后端-crud-路由" tabindex="-1">步骤 4: 创建后端 CRUD 路由 <a class="header-anchor" href="#步骤-4-创建后端-crud-路由" aria-label="Permalink to &quot;步骤 4: 创建后端 CRUD 路由&quot;">​</a></h2><p>在 server/index.js 中添加 CRUD 路由：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;./models&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 创建用户</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/users&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">error</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 获取用户列表</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/users&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> users</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findAll</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">  res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">users</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 更新用户</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/users/:id&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findByPk</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      await</span><span style="color:#E5C07B;"> user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;User not found&#39;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">error</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 删除用户</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/users/:id&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> User</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findByPk</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">req</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      await</span><span style="color:#E5C07B;"> user</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">destroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;User deleted&#39;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">      res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">404</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;User not found&#39;</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">status</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">400</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">json</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">error</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">error</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="步骤-5-创建前端页面" tabindex="-1">步骤 5: 创建前端页面 <a class="header-anchor" href="#步骤-5-创建前端页面" aria-label="Permalink to &quot;步骤 5: 创建前端页面&quot;">​</a></h2><p>在 Nuxt.js 项目中创建用于增删改查的前端页面。例如，在 <code>pages/index.vue</code> 中，可以使用 Axios（如果在创建项目时选择了它）来与 Express 后端进行交互：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    &lt;!-- 用户界面和逻辑... --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">    async</span><span style="color:#61AFEF;"> fetchUsers</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">      try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        const</span><span style="color:#E5C07B;"> response</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$axios</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;http://localhost:3001/users&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">users</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> response</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#61AFEF;">    fetchUsers</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="用-nest-js构建后端-和-nuxt-js构建前端" tabindex="-1">用 Nest.js构建后端 和 Nuxt.js构建前端 <a class="header-anchor" href="#用-nest-js构建后端-和-nuxt-js构建前端" aria-label="Permalink to &quot;用 Nest.js构建后端 和 Nuxt.js构建前端&quot;">​</a></h1><p>使用Nuxt.js开发网站时，即使选择使用Nest.js作为后端而不是Nuxt自带的服务器，仍然可以实现服务端渲染(SSR)。Nuxt.js负责页面的生成和渲染，而Nest.js则处理API请求和服务器逻辑。可以通过将Nuxt.js作为中间件集成到Nest.js中，来保持服务端渲染的功能。</p><p>具体来说，需要在Nest.js应用程序中安装Nuxt.js，然后编写Nuxt.js模板文件，这些文件将被用于渲染静态内容。</p><p>接下来，可以使用Nest.js的守护进程功能，在应用程序启动时启动Nuxt进程。</p><p>NestJS守护进程可以在应用程序启动时执行某些预先定义的操作，包括启动Nuxt进程的操作。可以使用NestJS的BootstrapModule模块完成这一操作，并在Nuxt进程启动后，将其与NestJS请求路由系统进行整合。</p><p>最后，创建一个Nuxt控制器和中间件，以处理客户端请求并将其路由到正确的Nuxt控制器。</p><p>这样，就可以在Nest.js后端上实现Nuxt.js的服务端渲染，同时享受Nest.js提供的结构化和模块化的优势。这种结合使用可以提供高效可靠的客户端应用程序，从而提升用户体验及应用程序流畅度。</p><h3 id="框架融合的好处" tabindex="-1">框架融合的好处 <a class="header-anchor" href="#框架融合的好处" aria-label="Permalink to &quot;框架融合的好处&quot;">​</a></h3><p>将 Nest.js 和 Nuxt.js 集成在一起提供了许多好处，包括：</p><ul><li><strong>提高开发效率：</strong> 这两个框架都提供了一系列工具和功能，使开发者能够快速有效地构建应用程序。</li><li><strong>代码重用：</strong> Nest.js 和 Nuxt.js 共享许多概念和模式，这使得在不同层之间重用代码变得更加容易。</li><li><strong>可扩展性和维护性：</strong> 这两个框架都以其可扩展性和可维护性而闻名，这使得应用程序在随着时间的推移而增长和变化时更容易维护。</li><li><strong>社区支持：</strong> Nest.js 和 Nuxt.js 都有活跃的社区，提供支持、文档和示例。</li></ul><h3 id="实现融合" tabindex="-1">实现融合 <a class="header-anchor" href="#实现融合" aria-label="Permalink to &quot;实现融合&quot;">​</a></h3><p>在Nuxt.js项目中集成Nest.js后端时，有两种主流的结构方式：<strong>单独的项目</strong>和<strong>Monorepo结构</strong>。</p><ol><li><strong>单独的项目</strong>：您可以将Nuxt.js和Nest.js作为两个独立的项目来开发。这种方式的好处是项目结构清晰，前后端分离，便于团队协作和版本控制。但是，这也意味着您需要分别管理两个项目的依赖和配置。</li><li><strong>Monorepo结构</strong>：另一种方式是在同一个仓库中创建一个Monorepo，其中包含两个子项目：一个用于Nuxt.js前端，另一个用于Nest.js后端：<a href="https://juejin.cn/post/7360493040136110118" target="_blank" rel="noreferrer">如何搭建 Nuxt3+Nest 全栈式项目 - 掘金 (juejin.cn)</a>。这种方式使得项目的依赖管理更加集中，同时也方便了跨项目的代码共享和重构。</li></ol><p>根据您的项目需求和团队工作流程，您可以选择最适合您的结构方式。如果您的团队更倾向于前后端分离的开发模式，那么单独的项目可能更适合您。如果您希望更紧密地集成前后端，并且希望简化项目管理，那么Monorepo结构可能是一个更好的选择。</p><p>在实际操作中，Monorepo结构通常通过使用像pnpm这样的工具来支持，它原生支持Monorepo，并允许您在同一个仓库中管理多个项目。这种结构也有助于统一构建和测试流程，使得整个开发过程更加高效。</p><p>将 Nest.js 和 Nuxt.js 集成在一起涉及以下步骤：</p><ol><li><strong>创建 Nest.js 后端：</strong> 使用 Nest.js CLI 创建一个新的 Nest.js 项目。</li><li><strong>安装 Nuxt.js：</strong> 在 Nest.js 项目中安装 Nuxt.js 依赖项。</li><li><strong>集成两个框架：</strong> 配置 Nest.js 和 Nuxt.js 以相互通信。</li><li><strong>构建前端：</strong> 使用 Nuxt.js 构建前端应用程序。</li><li><strong>部署应用程序：</strong> 将应用程序部署到生产环境中。</li></ol><h3 id="代码示例" tabindex="-1">代码示例 <a class="header-anchor" href="#代码示例" aria-label="Permalink to &quot;代码示例&quot;">​</a></h3><p>以下代码示例展示了如何集成 Nest.js 和 Nuxt.js：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">// Nest.js 代码</span></span>
<span class="line"><span style="color:#ABB2BF;">@Controller(&#39;api/users&#39;)</span></span>
<span class="line"><span style="color:#ABB2BF;">export class UsersController {</span></span>
<span class="line"><span style="color:#ABB2BF;">  constructor(private usersService: UsersService) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  @Get()</span></span>
<span class="line"><span style="color:#ABB2BF;">  findAll(): Promise&lt;</span><span style="color:#E06C75;">User</span><span style="color:#D19A66;">[]</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">    return this.usersService.findAll();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">// Nuxt.js 代码</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;h1&gt;Users&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;ul&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;li v-for=&quot;user in users&quot; :key=&quot;user.id&quot;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        {{ user.name }}</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/li&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/ul&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/div&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  export default {</span></span>
<span class="line"><span style="color:#ABB2BF;">    async asyncData() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      const { data } = await this.$axios.$get(&#39;/api/users&#39;);</span></span>
<span class="line"><span style="color:#ABB2BF;">      return { users: data };</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/script&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="结论" tabindex="-1">结论 <a class="header-anchor" href="#结论" aria-label="Permalink to &quot;结论&quot;">​</a></h3><p>将 Nest.js 和 Nuxt.js 集成在一起为 TypeScript 全栈开发提供了一种强大且灵活的方法。通过利用这两个框架的优势，开发者可以创建健壮、可扩展和可维护的 Web 应用程序。在本文中，我们探讨了框架融合的好处、实现过程以及代码示例。通过遵循这些步骤，您将能够构建一个功能齐全的全栈应用程序，该应用程序充分利用了 TypeScript 的强大功能和 Nest.js 和 Nuxt.js 的优势。</p><h2 id="构建一个简单的用户管理系统-包括传输加解密-密码存储加密-权限控制" tabindex="-1">构建一个简单的用户管理系统，包括传输加解密，密码存储加密，权限控制 <a class="header-anchor" href="#构建一个简单的用户管理系统-包括传输加解密-密码存储加密-权限控制" aria-label="Permalink to &quot;构建一个简单的用户管理系统，包括传输加解密，密码存储加密，权限控制&quot;">​</a></h2><h3 id="_1、新建nest项目" tabindex="-1">1、新建nest项目 <a class="header-anchor" href="#_1、新建nest项目" aria-label="Permalink to &quot;1、新建nest项目&quot;">​</a></h3><p>在我们想要新建nest项目的目录下打开命令行工具运行以下命令</p><div class="language-csharp line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">nest</span><span style="color:#C678DD;"> new</span><span style="color:#E06C75;"> project</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>为了让我们的请求地址看起来正规一点，我们这里加上一个统一的前缀吧</p><p>main.ts</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">async</span><span style="color:#C678DD;"> function</span><span style="color:#61AFEF;"> bootstrap</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> app</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> NestFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">AppModule</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setGlobalPrefix</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;manager&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">  await</span><span style="color:#E5C07B;"> app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">listen</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2、新建user模块" tabindex="-1">2、新建user模块 <a class="header-anchor" href="#_2、新建user模块" aria-label="Permalink to &quot;2、新建user模块&quot;">​</a></h3><p>src目录下运行以下命令</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;"> nest</span><span style="color:#E06C75;"> g</span><span style="color:#E06C75;"> res</span><span style="color:#E06C75;"> user</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>出现选项选第一个跟Y就行了，它们自动把你新建的模块引入到app主模块中去</p><p>src目录下已经有user模块并且在app.module中自动引入了</p><h3 id="_3、启动nestjs项目" tabindex="-1">3、启动nestjs项目 <a class="header-anchor" href="#_3、启动nestjs项目" aria-label="Permalink to &quot;3、启动nestjs项目&quot;">​</a></h3><p>要加dev，才有热更新</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">npm</span><span style="color:#E06C75;"> run</span><span style="color:#E06C75;"> start</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4、构建一个用户的实体" tabindex="-1">4、构建一个用户的实体 <a class="header-anchor" href="#_4、构建一个用户的实体" aria-label="Permalink to &quot;4、构建一个用户的实体&quot;">​</a></h3><p>用户拥有哪些基本数据：</p><p>用户名，不能重复，昵称（可选），密码，创建时间，最后一次登录时间，角色（用于控制权限，后面需要新建权限表），id(自增)，用户状态（枚举值），deleted（用于软删除，新建时默认为否），token数组，因为考虑到多端登录情况，暂时想到这些，后面可以再加，其实还想搞个头像功能的，但是考虑到还要专门搞个文件服务器，还是先不搞了</p><p>过程：</p><h5 id="_1、新建user-token实体" tabindex="-1">1、新建user，token实体 <a class="header-anchor" href="#_1、新建user-token实体" aria-label="Permalink to &quot;1、新建user，token实体&quot;">​</a></h5><p><img src="`+u+'" alt="image-20240606210103168"></p><h5 id="_2、在app-module中引入typeormmodule连接数据库" tabindex="-1">2、在app.module中引入TypeOrmModule连接数据库 <a class="header-anchor" href="#_2、在app-module中引入typeormmodule连接数据库" aria-label="Permalink to &quot;2、在app.module中引入TypeOrmModule连接数据库&quot;">​</a></h5><p><img src="'+b+'" alt="image-20240606210123121"></p><h5 id="_3、在user-module中引入typeormmodule并放入user-token实体" tabindex="-1">3、在user.module中引入TypeOrmModule并放入user,token实体 <a class="header-anchor" href="#_3、在user-module中引入typeormmodule并放入user-token实体" aria-label="Permalink to &quot;3、在user.module中引入TypeOrmModule并放入user,token实体&quot;">​</a></h5><p><img src="'+d+'" alt="image-20240606210146599"></p><h5 id="_4、在user-service中引入两张库表-用来对对应表进行增删改查操作" tabindex="-1">4、在user.service中引入两张库表，用来对对应表进行增删改查操作 <a class="header-anchor" href="#_4、在user-service中引入两张库表-用来对对应表进行增删改查操作" aria-label="Permalink to &quot;4、在user.service中引入两张库表，用来对对应表进行增删改查操作&quot;">​</a></h5><p><img src="'+m+'" alt="image-20240606210213681"></p><p>都保存完之后数据库中已经出现这两张表了</p><p><img src="'+F+'" alt="image-20240606210231823"></p><p>新增用户接口写好之后调一下接口</p><p><img src="'+A+'" alt="image-20240606210320503"></p><p>成功了，再看下数据库中数据，有了</p><p><img src="'+g+'" alt="image-20240606210336737"></p><p>为了后面删除操作，可以多搞了几条测试数据</p><p>自己把增删改查搞定了。</p><h3 id="_5、新建nuxt3前端工程" tabindex="-1">5、新建nuxt3前端工程 <a class="header-anchor" href="#_5、新建nuxt3前端工程" aria-label="Permalink to &quot;5、新建nuxt3前端工程&quot;">​</a></h3><div class="language-swift line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">npx nuxi</span><span style="color:#C678DD;">@latest</span><span style="color:#C678DD;"> init</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">project</span><span style="color:#ABB2BF;">-name&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>后面很多活都可以交给tongyilingma了，比如你直接跟他说，我要用某某组件（例：element-plus,甚至可以带上具体版本号）写一个后台管理页面，或者写一个表格，表格里面有哪些内容，写一个弹窗，弹窗里面有哪些内容，然后copy到页面里面，改写数据，就差不多了，看下效果</p><p><img src="'+C+'" alt="image-20240606210441034"></p><p>增删改查都写好了，增删改查的弹窗都可以交给tongyilingma然后自己稍微改改调接口就行</p><p><img src="'+h+'" alt="image-20240606210459902"></p><p>经测试增删改查功能都没问题，接着我们既然要模拟真实应用，就要对后端应用进行改良</p><h3 id="_6、登录" tabindex="-1">6、登录 <a class="header-anchor" href="#_6、登录" aria-label="Permalink to &quot;6、登录&quot;">​</a></h3><p>登录方法给用户发token，数组存储，但是我们这里暂时只允许存在一个token</p><p><img src="'+E+'" alt="image-20240606210536105"></p><p>jwt依赖安装：</p><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">npm i jsonwebtoken</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> jwt</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;jsonwebtoken&#39;</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+v+'" alt="image-20240606210614013"></p><p>调用login方法，搞定</p><p><img src="'+f+`" alt="image-20240606210634918"></p><p>token校验，校验通过返回用户信息即可：</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">async</span><span style="color:#61AFEF;"> checkToken</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> decoded</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> jwt</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">verify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">secretKey</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;checktoken decoded &#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">decoded</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">userId</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">decoded</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">userId</span><span style="color:#ABB2BF;">) { </span><span style="color:#7F848E;font-style:italic;">// 验证通过,返回用户信息</span></span>
<span class="line"><span style="color:#C678DD;">        const</span><span style="color:#E5C07B;"> user</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">usersRespository</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">findOne</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">          where</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            { </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">decoded</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">userId</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;checktoken user &#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#E06C75;"> user</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#E06C75;"> decoded</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;checkToken err &#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#D19A66;"> null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_7、密码加解密" tabindex="-1">7、密码加解密 <a class="header-anchor" href="#_7、密码加解密" aria-label="Permalink to &quot;7、密码加解密&quot;">​</a></h3><ol><li>前后端传输加密，这里用我们常用的aes（对称加解密），这一步搞了好久，篇幅较长，重起一片文章写这个了：<a href="https://blog.csdn.net/weixin_55458088/article/details/138153008" target="_blank" rel="noreferrer">前端cryptojs加解密，后端node环境（nestjs）crypto加解密_nest接口加密解密-CSDN博客</a></li><li>数据库存储密码加密，我们肯定不能直接前端加密密码传输然后后端直接将前端aes加密后的密码字段存在数据库，因为我们知道对称加密前后端秘钥一致，且这个秘钥是很容易搞到的，所以如果直接存前端传过来的加密密码方案肯定不可行，而且一般前后端加密传输一般都是针对整个请求对象加解密，一般不止针对密码加密</li></ol><p>所以这里我们用nestjs推荐的bcypt</p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">npm </span><span style="color:#E06C75;">i</span><span style="color:#C678DD;"> bcrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">npm </span><span style="color:#E06C75;">i</span><span style="color:#C678DD;"> -D</span><span style="color:#ABB2BF;"> @</span><span style="color:#C678DD;">types</span><span style="color:#ABB2BF;">/</span><span style="color:#C678DD;">bcrypt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>存储密码前加密</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">password</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> bcrypt</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hash</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">config</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pwdSaltOrRounds</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>调用添加方法，再查看数据库：</p><p><img src="`+x+'" alt="image-20240606210805392"></p><p>可以看到，数据已经被加密了</p><p>这时候我们能想到，之前登录方法里面的用户名密码对比肯定走不通了，bcrypt提供了对比方法，因为我们给user的实体中的password设置了select：false，是无法查询到的，所以这里要加select才能查出来</p><p><img src="'+D+'" alt="image-20240606210834111"></p><p>调用一下登录方法，成功</p><p>注意要在我们搞完加解密之后调接口新产生的数据，才是有做数据库存储加解密的数据</p><p><img src="'+q+'" alt="image-20240606210858314"></p><p>让我们输个错误密码试下，没问题</p><p><img src="'+k+`" alt="image-20240606210916495"></p><p>在这里说一下，不要用前端传入密码用bcrypt加密然后跟数据库存储的密码去做对比，因为每次机密产生的字符串都是不一样的，结果永远是false，要用bcrypt提供的同步对比方法</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">bcrypt</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">compareSync</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_8、权限控制" tabindex="-1">8、权限控制 <a class="header-anchor" href="#_8、权限控制" aria-label="Permalink to &quot;8、权限控制&quot;">​</a></h3><p>这是最后一步，作为管理系统，用户的增删改查肯定不是所有用户都有权限操作，所以我们要加一个权限控制，所以我们要在加一个用户角色表</p><p>每个用户暂时只能有一个角色吧，一对一</p><p>每个路由前面加个权限判断</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      const</span><span style="color:#E5C07B;"> hasPermission</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">userService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">hasPermission</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ADD</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">hasPermission</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">userService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">createUserDto</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;没有添加用户权限&#39;</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;没有添加用户权限&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>权限判断</p><div class="language-TypeScript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#E06C75;">async</span><span style="color:#61AFEF;"> hasPermission</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">permission</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">PermissionCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">): </span><span style="color:#E5C07B;">Promise</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">boolean</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">    if</span><span style="color:#ABB2BF;"> (!</span><span style="color:#E06C75;font-style:italic;">permission</span><span style="color:#ABB2BF;"> || !</span><span style="color:#E06C75;font-style:italic;">token</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#D19A66;"> false</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    const </span><span style="color:#E06C75;">adminPermissions</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ADD</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">DELETE</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">UPDATE</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">QUERY</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    const </span><span style="color:#E06C75;">operatorPermissions</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ADD</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">QUERY</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    const </span><span style="color:#E06C75;">userPermissions</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">PermissionCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">QUERY</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    const </span><span style="color:#E06C75;">user</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">checkToken</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    console.log(</span><span style="color:#98C379;">&#39;hasPermission user &#39;</span><span style="color:#ABB2BF;">, user)</span></span>
<span class="line"><span style="color:#61AFEF;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">user</span><span style="color:#ABB2BF;"> &amp;&amp; user.roles &amp;&amp; user.roles.code) {</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">roles</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">code</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> RoleCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">ADMIN</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> adminPermissions</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">permission</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">roles</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">code</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> RoleCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">Operator</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> operatorPermissions</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">permission</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">roles</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">code</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> RoleCode</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">USER</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> userPermissions</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">permission</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    return </span><span style="color:#E06C75;">false</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>首先，未登录状态下试下</p><p><img src="`+N+'" alt="image-20240606211005633"></p><p>没问题，让我们登录管理员再试下，添加成功</p><p><img src="'+_+'" alt="image-20240606211028221"></p><p>这里面用到的登录就是常规的，登录完之后得到token，把token放在缓存里面，在请求的时候把token放在请求头里面，服务端拿这个token去做校验，校验通过拿到用户信息及用户角色信息，根据角色信息判断是否有改权限，从而继续后面的操作</p><p>到这里一个简单的用户管理系统就基本完成了。</p><h1 id="pwa-渐进式web应用程序-是自己开发的网站在edge浏览器中显示为可安装的应用程序" tabindex="-1">（PWA）渐进式Web应用程序：是自己开发的网站在Edge浏览器中显示为可安装的应用程序 <a class="header-anchor" href="#pwa-渐进式web应用程序-是自己开发的网站在edge浏览器中显示为可安装的应用程序" aria-label="Permalink to &quot;（PWA）渐进式Web应用程序：是自己开发的网站在Edge浏览器中显示为可安装的应用程序&quot;">​</a></h1><ul><li><a href="https://juejin.cn/post/7375386125797998618" target="_blank" rel="noreferrer">关于离线应用在nextjs中的开发实践（pwa） - 掘金 (juejin.cn)</a></li><li><a href="https://juejin.cn/post/7260845826394144825" target="_blank" rel="noreferrer">一次性完整学完搭建PWA项目 - 掘金 (juejin.cn)</a></li></ul><p>如在地址栏显示这个图标：</p><p><img src="'+w+`" alt="image-20240616221857933"></p><p>示例网站：<a href="https://yinghe.app/" target="_blank" rel="noreferrer">https://yinghe.app/</a></p><p>这涉及以下几个关键步骤：</p><p><strong>MDN文档</strong>：<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noreferrer">渐进式 Web 应用（PWA） | MDN (mozilla.org)</a></p><ol><li><strong>创建Web应用清单</strong>：这是一个JSON文件，告诉浏览器您的网站应该如何显示和表现。它包含了一些定义PWA外观或行为的成员集合，例如应用名称、图标、启动URL等：<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable%E3%80%82" target="_blank" rel="noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable。</a></li><li><strong>实现Service Worker</strong>：Service Worker是一种运行在浏览器背后的脚本，它可以帮助您的应用提供离线功能，并且是使网站可安装的关键技术之一。</li><li><strong>通过HTTPS提供</strong>：为了确保内容的安全性，您的网站必须通过HTTPS提供。这是PWA的一个基本要求。</li><li><strong>响应式设计</strong>：您的网站应该能够适应不同的屏幕尺寸和设备。</li><li><strong>添加到应用商店</strong>：如果您希望通过应用商店分发您的PWA，您可以将其打包并提交到Google Play商店或Microsoft Store等平台。</li></ol><p>具体到Edge浏览器，当用户访问符合PWA标准的网站时，地址栏旁边会出现一个安装图标。用户点击该图标后，浏览器会提示安装应用程序。安装后，PWA就会在设备上获得一个应用图标，用户可以像启动其他任何应用程序一样直接从操作系统启动它。</p><p>如果您需要更详细的指导，MDN Web Docs提供了一个关于<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable" target="_blank" rel="noreferrer">制作可安装的PWA</a>的完整指南，您可以参考它来为您的网站添加PWA功能。</p><h3 id="将nuxt-js开发的应用转换为pwa" tabindex="-1">将Nuxt.js开发的应用转换为PWA <a class="header-anchor" href="#将nuxt-js开发的应用转换为pwa" aria-label="Permalink to &quot;将Nuxt.js开发的应用转换为PWA&quot;">​</a></h3><ul><li><strong>GitHub</strong>：<a href="https://github.com/vite-pwa/nuxt" target="_blank" rel="noreferrer">vite-pwa/nuxt： Nuxt 3 的零配置 PWA 插件 (github.com)</a></li><li><strong>模块文档</strong>：<a href="https://nuxt.com.cn/modules/vite-pwa-nuxt" target="_blank" rel="noreferrer">Vite-pwa-nuxt · Nuxt Modules</a></li><li><strong>文档</strong>：<a href="https://vite-pwa-org.netlify.app/frameworks/nuxt.html" target="_blank" rel="noreferrer">Nuxt 3 | Frameworks | Vite PWA (vite-pwa-org.netlify.app)</a></li></ul><p>要将Nuxt.js开发的应用转换为PWA，可以按照以下步骤操作：</p><ol><li><p><strong>安装 @vite-pwa/nuxt 模块</strong>： 在您的Nuxt项目中，运行以下命令来安装必要的模块：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">npx</span><span style="color:#98C379;"> nuxi@latest</span><span style="color:#98C379;"> module</span><span style="color:#98C379;"> add</span><span style="color:#98C379;"> @vite-pwa/nuxt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>更新 nuxt.config.js</strong>： 在 <code>nuxt.config.js</code> 文件中，将 <code>@vite-pwa/nuxt</code> 模块添加到 <code>modules</code> 部分。这将自动为您的应用程序添加PWA功能，包括Web应用清单和Service Worker。</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  modules</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#98C379;">    &#39;@vite-pwa/nuxt&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  ],</span></span>
<span class="line"><span style="color:#E06C75;">  pwa</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // PWA模块的配置选项</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p><strong>配置 Web 应用清单</strong>： <strong>注册 Service Worker</strong>: 要在的 Nuxt 3 应用中注册 PWA 网页清单，可以在 <code>app.vue</code> 或所有布局文件中添加 <code>VitePwaManifest</code> 或 <code>NuxtPwaManifest</code> 功能组件。只需添加其中一个即可。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">VitePwaManifest</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">或</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtPwaManifest</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">NuxtPage</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p><strong>配置 Manifest 和 Workbox</strong>：在 <code>nuxt.config.ts</code> 文件中，可以定义网页清单和 Workbox 的相关设置。例如，可以设置缓存策略和资源预缓存：</p><ol><li>workbox：<a href="https://pwa.nuxtjs.org/workbox/" target="_blank" rel="noreferrer">https://pwa.nuxtjs.org/workbox/</a></li><li>manifest：<a href="https://pwa.nuxtjs.org/manifest/%E3%80%82" target="_blank" rel="noreferrer">https://pwa.nuxtjs.org/manifest/。</a></li></ol><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// nuxt.config.ts</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#61AFEF;"> defineNuxtConfig</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  pwa</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    strategies</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sw</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &#39;injectManifest&#39;</span><span style="color:#C678DD;"> :</span><span style="color:#98C379;"> &#39;generateSW&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    srcDir</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sw</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &#39;public&#39;</span><span style="color:#C678DD;"> :</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    filename</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">sw</span><span style="color:#C678DD;"> ?</span><span style="color:#98C379;"> &#39;sw.ts&#39;</span><span style="color:#C678DD;"> :</span><span style="color:#D19A66;"> undefined</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    registerType</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;autoUpdate&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    pwaAssets</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        config</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    manifest</span><span style="color:#ABB2BF;">:{</span></span>
<span class="line"><span style="color:#E06C75;">      name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;pwa&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      short_name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;short&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      description</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;说明&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">      &quot;background_color&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;#fff&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">      &quot;theme_color&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;#fff&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">      &quot;orientation&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;any&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">      &quot;display&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;standalone&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">      &quot;icons&quot;</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#98C379;">          &quot;src&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/icon.webp&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">          &quot;sizes&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;120x120&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">          &quot;type&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;image/webp&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      ],</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    workbox</span><span style="color:#ABB2BF;">:{</span></span>
<span class="line"><span style="color:#E06C75;">      navigateFallback</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      globPatterns</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;**/*.{js,css,html,png,svg,ico}&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    injectManifest</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        globPatterns</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;**/*.{js,css,html,png,svg,ico}&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    client</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        installPrompt</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        periodicSyncForUpdates</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3600</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    devOptions</span><span style="color:#ABB2BF;">:{</span></span>
<span class="line"><span style="color:#E06C75;">      enabled</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      suppressWarnings</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;module&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      navigateFallback</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      navigateFallbackAllowlist</span><span style="color:#ABB2BF;">: [</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#56B6C2;">\\/</span><span style="color:#C678DD;">$</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    injectRegister</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;auto&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    registerType</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;autoUpdate&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div></li><li><p><strong>使用 PWA 功能</strong>: <code>@vite-pwa/nuxt</code> 模块会注册一个插件，通过 <code>$pwa</code> 属性提供 PWA 逻辑。您可以在 Vue 组件的模板或脚本中直接访问 <code>$pwa</code> 属性。例如，您可以使用 <code>$pwa.updateServiceWorker</code> 方法来更新服务工作线程：<a href="https://nuxt.com/modules/vite-pwa-nuxt%E3%80%82" target="_blank" rel="noreferrer">https://nuxt.com/modules/vite-pwa-nuxt。</a></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#D19A66;"> setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">updateServiceWorker</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#61AFEF;"> useNuxtApp</span><span style="color:#ABB2BF;">().</span><span style="color:#E06C75;">$pwa</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 当需要更新服务工作线程时调用</span></span>
<span class="line"><span style="color:#61AFEF;">updateServiceWorker</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>运行：package.json：如果运行后，打开浏览器输入地址，地址栏不出现安装应用，就要清除缓存，删掉<code>.nuxt</code>文件夹，再运行</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#98C379;">&quot;scripts&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt dev --dotenv .env.development --host&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;plugin:pwa&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;VITE_PLUGIN_PWA=true nuxt dev --port 30333&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;dev:pwa&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;VITE_DEV_PWA=true nuxt dev --port 30333&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;uat&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt dev --dotenv .env.uat --host&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;prod&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt dev --dotenv .env.production --host&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;build&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt build&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;build:dev&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt build --dotenv .env.development&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;build:uat&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt build --dotenv .env.uat&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;build:prod&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt build --dotenv.production&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;generate&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt generate&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;preview&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt preview&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;postinstall&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxt prepare&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;prepare&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;nuxi prepare&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;start&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;node .output/server/index.mjs&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;start:generate&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;npx serve .output/public&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    &quot;typecheck&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;vue-tsc --noEmit&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ol><p>以上步骤基于官方文档和社区资源。将帮助您将Nuxt应用转换为PWA，使其能够提供类似原生应用的体验，并且可以安装到用户的设备上。</p><h1 id="部署服务端完整流程" tabindex="-1">部署服务端完整流程 <a class="header-anchor" href="#部署服务端完整流程" aria-label="Permalink to &quot;部署服务端完整流程&quot;">​</a></h1><h2 id="工具" tabindex="-1">工具 <a class="header-anchor" href="#工具" aria-label="Permalink to &quot;工具&quot;">​</a></h2><p>1、一台阿里云服务器实例加一个弹性公网</p><p>2、一套nestjs代码+mysql</p><p>3、nuxt前端代码</p><p>4、WinSCP</p><p>代码开发工具用的vscode，插件Database Client连接本地数据库，tongyilingma帮我快速构建前端代码，当然里面的逻辑还是要你自己写的</p><h2 id="后端部署和环境配置" tabindex="-1">后端部署和环境配置 <a class="header-anchor" href="#后端部署和环境配置" aria-label="Permalink to &quot;后端部署和环境配置&quot;">​</a></h2><h3 id="_1、用winscp-代码文件上传" tabindex="-1">1、用WinSCP：代码文件上传 <a class="header-anchor" href="#_1、用winscp-代码文件上传" aria-label="Permalink to &quot;1、用WinSCP：代码文件上传&quot;">​</a></h3><p>连接远程服务器之后可以看到，还是上次那些文件，注意，WinSCP不会自动保存上次登录站点并且自动保存，所以要注意你这里是不是这种root开头的文件夹，如果是C/D开头的这种看清楚，可能没连上远程服务器，两边都是本地文件夹</p><p><img src="`+j+'" alt="image-20240606211243081"></p><p>把后端文件拖到nest文件夹内 ，最主要的就是src文件夹跟package.json文件</p><p>因为之前有过这个文件夹跟里面的一些文件，直接覆盖的话之前文件夹内比现在多的文件还是会保留，所以我们直接把全部文件跟文件夹删掉，包括dist跟node_modules</p><p>注意：删除操作最好去阿里云远程连接服务器删，不要用WinSCP，会很慢</p><p>正常来说只有这几个文件跟文件夹是必须的，当然你如果在项目里面建了跟src同级的目录那另算</p><p><img src="'+P+'" alt="image-20240606211303526"></p><h3 id="_2、安装依赖" tabindex="-1">2、安装依赖 <a class="header-anchor" href="#_2、安装依赖" aria-label="Permalink to &quot;2、安装依赖&quot;">​</a></h3><p>阿里云远程连接，切换到nest目录，安装依赖</p><p><img src="'+S+'" alt="image-20240606211326899"></p><h3 id="_3、测试环境打包" tabindex="-1">3、测试环境打包 <a class="header-anchor" href="#_3、测试环境打包" aria-label="Permalink to &quot;3、测试环境打包&quot;">​</a></h3><p>先假设我们的项目分三个环境，dev，test，prod</p><p>我们部署这个环境就当做test环境吧，运行package.json中写的命令</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#98C379;">&quot;build:test&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;cross-env NODE_ENV=test nest build NODE_ENV=test&quot;</span><span style="color:#ABB2BF;">,</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>记得把config里面test环境变量配置成你这台服务器的，主要是数据库配置</p><div class="language-cobol line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cobol</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">npm </span><span style="color:#C678DD;">run</span><span style="color:#ABB2BF;"> build:</span><span style="color:#C678DD;">test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>报错了，让我们本地试试</p><p><img src="'+L+'" alt="image-20240606211424411"></p><p>本地没问题</p><p><img src="'+R+'" alt="image-20240606211447519"></p><p>看下本地和服务器的node版本号是否一致</p><p>不一致，则需要设置服务器的Node的版本</p><p>完成了，直接ls查看目录，或者WinSCP刷新查看一下,可以看到已经有dist目录了</p><p>切换到dist目录,用pm2命令查看正在运行的项目，可以看到之前的项目还在运行中，所以先把之前的同名项目停掉</p><p><img src="'+T+'" alt="image-20240606211615565"></p><p>再运行</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">pm2</span><span style="color:#98C379;"> start</span><span style="color:#98C379;"> main.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+M+'" alt="image-20240606211638346"></p><p><img src="'+U+'" alt="image-20240606211706385"></p><p>启动成功，让我们先调接口创建一个管理员</p><p><img src="'+O+'" alt="image-20240606211728395"></p><p>报错了，我们看一下服务端日志，数据库的问题，找不到我们新加的这个库</p><p><img src="'+I+'" alt="image-20240606211745814"></p><p><strong>阿里云远程连接服务器上打开一个新终端</strong>，查看下mysql安装列表</p><p><img src="'+W+'" alt="image-20240606211805942"></p><p>查看一下sql状态</p><p><img src="'+V+'" alt="image-20240606211828588"></p><p>可以看到在12号就已经启动了的,没问题，那我连接一下数据库，查看现在有哪些库</p><p><img src="'+z+'" alt="image-20240606211842569"></p><p>所以可以看到，现在是没有我们用的的user_db这个库的，那新建一个</p><p><img src="'+H+'" alt="image-20240606211859205"></p><p>有了，再调一下之前的创建管理员接口</p><p><img src="'+Q+'" alt="image-20240606211915935"></p><p>又报错，继续看日志</p><p><img src="'+Z+'" alt="image-20240606211931215"></p><p>role表不存在，看下user_db库下的表</p><p><img src="'+K+'" alt="image-20240606211947892"></p><p>没有，这是怎么回事，猜测应该是运行main.js的时候没有连上正确的数据库表，所以没有正确创建实体，后续创建库之后并不会再次自动创建实体，所以我们试下重新启动main.js</p><p>尝试了下，还是不行，看下代码配置</p><p><img src="'+J+'" alt="image-20240606212014884"></p><p>本地试一下就知道为啥了，改成false，保存，新建一个test实体，保存，刷新数据库，没有 ，改成true，保存，刷新一下数据库，出来了，所以是这个问题</p><p><img src="'+X+'" alt="image-20240606212031252"></p><p>一般<strong>synchronize</strong>这个选项在测试跟生产环境是不建议打开的，我们这里测试环境也当做生产环境操作吧，这里配置的是false，他不会自动加载，那咋办，只能自己一个一个建mysql表了</p><h3 id="_4、服务器数据库建sql表" tabindex="-1">4、服务器数据库建sql表 <a class="header-anchor" href="#_4、服务器数据库建sql表" aria-label="Permalink to &quot;4、服务器数据库建sql表&quot;">​</a></h3><p>作为一个前端，不会写那么长的sql咋办，</p><p>1、问AI</p><p>2、vscode里面这个mysql插件里面可以看，连接上数据库之后，点击某个具体的表，点击，Properties，点击DDL，就可以看到建表语句了，直接copy过去，在远程服务器上运行语句</p><p><img src="'+G+'" alt="image-20240606212117254"></p><p>建表，报错了，查到是需要升级mysql版本，这个过程中花了不少时间去解决，单独写了一篇文章描述问题过程与解决办法了，在这里，<a href="https://blog.csdn.net/weixin_55458088/article/details/138346167" target="_blank" rel="noreferrer">阿里云服务器mysql5升级mysql8爬坑</a> ，</p><p>升级成功之后连接数据库，重新跑建表语句,记住，<strong>copy过来的建表语句记得加上英文的&quot;;&quot;符号</strong></p><p><img src="'+Y+'" alt="image-20240606212256669"></p><p>报错了，没有关联表，那我们先建关联表吧</p><p><img src="'+$+'" alt="image-20240606212224928"></p><p>再建user表</p><p><img src="'+ss+'" alt="image-20240606212318917"></p><p>之前本来是想搞角色表跟权限表的，后面一想没必要搞那么复杂，就只搞了user,role,token三个表了</p><p><img src="'+ns+'" alt="image-20240606212400906"></p><h3 id="_5、创建数据" tabindex="-1">5、创建数据 <a class="header-anchor" href="#_5、创建数据" aria-label="Permalink to &quot;5、创建数据&quot;">​</a></h3><p>数据库问题解决，node服务之前是开着的不用动，我们再请求一下接口创建管理员试试</p><p><img src="'+as+'" alt="image-20240606212423015"></p><p>终于成功了，查下表</p><p><img src="'+ls+'" alt="image-20240606212456307"></p><h2 id="前端部署" tabindex="-1">前端部署 <a class="header-anchor" href="#前端部署" aria-label="Permalink to &quot;前端部署&quot;">​</a></h2><h3 id="前端本地连服务器" tabindex="-1">前端本地连服务器 <a class="header-anchor" href="#前端本地连服务器" aria-label="Permalink to &quot;前端本地连服务器&quot;">​</a></h3><p>好了，接下来就是部署前端了，我们先把前端的代理地址换到阿里云服务器的这个弹性公网地址</p><p>接下来就是部署前端了，我们先把前端的代理地址换到阿里云服务器的这个弹性公网地址</p><p><img src="'+ps+'" alt="image-20240606212634457"></p><h3 id="前端部署服务端" tabindex="-1">前端部署服务端 <a class="header-anchor" href="#前端部署服务端" aria-label="Permalink to &quot;前端部署服务端&quot;">​</a></h3><p>在打前端包之前，得改一下我们的请求配置，因为我们之前都是本地请求，用的axios，没有配置baseUrl，现在要请求远端了，所以要配置url了，url就是我们的代理地址，直接把代理地址改到url里面去，如果有多个环境要自己配，我们这里假设只有本地dev跟服务端环境</p><p><img src="'+es+'" alt="image-20240606212658359"></p><h4 id="_1、前端代码上传" tabindex="-1">1、前端代码上传 <a class="header-anchor" href="#_1、前端代码上传" aria-label="Permalink to &quot;1、前端代码上传&quot;">​</a></h4><p><img src="'+os+'" alt="image-20240606212731071"></p><h4 id="_2、安装依赖-1" tabindex="-1">2、安装依赖 <a class="header-anchor" href="#_2、安装依赖-1" aria-label="Permalink to &quot;2、安装依赖&quot;">​</a></h4><p><img src="'+rs+'" alt="image-20240606212747395"></p><p>出了一大堆node版本问题，需要升级一下服务端的node版本</p><p><img src="'+ts+'" alt="image-20240606212810892"></p><p>安装依赖</p><p><img src="'+cs+'" alt="image-20240606212836874"></p><h4 id="_3、打包" tabindex="-1">3、打包 <a class="header-anchor" href="#_3、打包" aria-label="Permalink to &quot;3、打包&quot;">​</a></h4><p><img src="'+is+'" alt="image-20240606212857230"></p><p>可以看到，打包完之后怎么启动服务都告诉你了</p><p><img src="'+Bs+'" alt="image-20240606212916818"></p><p>但是我们还是用之前的pm2跑</p><p>node升级了，重装一下pm2,重装完pm2顺便把之前的nest服务也重启一下</p><p><img src="'+ys+'" alt="image-20240606213001246"></p><p>访问不到，看下日志</p><p><img src="'+us+'" alt="image-20240606213017806"></p><p>可以看到，因为在同一台服务器上，并且3000端口已经被之前的nest服务监听了</p><h4 id="_4、更换监听端口" tabindex="-1">4、更换监听端口 <a class="header-anchor" href="#_4、更换监听端口" aria-label="Permalink to &quot;4、更换监听端口&quot;">​</a></h4><p><img src="'+bs+'" alt="image-20240606213046435"></p><p>停掉前端服务，更换监听端口重启</p><p><img src="'+ds+'" alt="image-20240606213106498"></p><p>没生效，找的教程，不生效的原因是教程里面是另外写了个一个服务的js去启动的，这个环境变量会传到那个js里面去，而我们这里没有，所以换种方式，官方的，加个文件，改个端口号</p><p><img src="'+ms+'" alt="image-20240606213124691"></p><p>还是没生效，换种方式，在script语句里面注入变量，也是官方推荐方法</p><p><img src="'+Fs+'" alt="image-20240606213138740"></p><p>也没搞定，一气之下直接把后端服务先停了，也监听3000端口，终于有了，可是。。。。。。我页面呢，这什么玩意</p><p><img src="'+As+'" alt="image-20240606213203840"></p><p>本地试了下，发现是脚本的问题，运行脚本不能叫PORT=3001，去掉之后本地打包没问题了</p><p><img src="'+gs+'" alt="image-20240606213219526"></p><p>服务端更换package.json文件重新跑打包脚本，终于可以了，但是这里我们后端服务停了，所以找不到</p><p><img src="'+Cs+'" alt="image-20240606213236364"></p><p>尝试换后端监听端口,前端端口号换成3000，后端监听端口换成3001，前端请求里面的baseUrl跟nest里面的跨域地址也要记得更换，换完之后都重启一下</p><p><img src="'+hs+'" alt="image-20240606213254755"></p><p><img src="'+Es+'" alt="image-20240606213309160"></p><p>可以看到接口是通了，只不是超时了，看下后端日志,搞了半天，发现好像是dist目录下的main文件没更新，所以端口号没变，直接rm -rf dist删除dist目录重新打包</p><p>后面重新打包重新请求一直不通，没请求到后端，吃饭的时候我就在想，之前3000的端口为啥就没问题呢，突然灵光一现，端口号，<strong>安全组！！，阿里云安全组设置</strong>，之前提过的，3001这个端口之前没加过，加上，再试下</p><p><img src="'+vs+'" alt="image-20240606213336630"></p><p>直接调是没问题了，再启动前端工程，在前端工程里面调用一下试试</p><p><img src="'+fs+'" alt="image-20240606213414817"></p><h4 id="_5、跨域问题解决" tabindex="-1">5、跨域问题解决 <a class="header-anchor" href="#_5、跨域问题解决" aria-label="Permalink to &quot;5、跨域问题解决&quot;">​</a></h4><p>报跨域问题，我们之前后端项目里面是打开了跨域的，但是可以看到我们用的还是localhost，改一下,改完更新文件重新打包，重新启动项目，刷新页面</p><p><img src="'+xs+'" alt="image-20240606213433251"></p><p><img src="'+Ds+'" alt="image-20240606213447982"></p><p>通了，棒，这个返回是我自己做的拦截，到登录页登录一下，换个token回来，刷新页面</p><p><img src="'+qs+'" alt="image-20240606213518033"></p><p>有了，新增一个用户试试</p><p><img src="'+ks+'" alt="image-20240606213531831"></p><p>也没问题，其他的跟本地一样的就不再演示了，至此，完整流程走通，一个简单的用户体系就搞完了</p>',798)]))}const Ms=n(Ns,[["render",_s]]);export{Ts as __pageData,Ms as default};
